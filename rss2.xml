<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Namgung Jong Min</title>
    <link>https://NamgungJongMin.github.io/</link>
    
    <atom:link href="https://namgungjongmin.github.io/rss2.xml" rel="self" type="application/rss+xml"/>
    
    <description></description>
    <pubDate>Tue, 11 Feb 2025 16:08:10 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>WEGO ) Custom Fetcher를 작성하여 API 공통 로직을 중앙 집중화하기!</title>
      <link>https://namgungjongmin.github.io/2025/01/23/project/wego/customfetcher/</link>
      <guid>https://namgungjongmin.github.io/2025/01/23/project/wego/customfetcher/</guid>
      <pubDate>Thu, 23 Jan 2025 04:32:33 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;API 통신은 현대 웹 애</description>
        
      
      
      
      <content:encoded><![CDATA[<p><img src="https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png"></p><blockquote><p>API 통신은 현대 웹 애플리케이션의 핵심 요소입니다. 하지만 기본적인 fetch API를 직접 사용하면 다양한 문제점들이 발생할 수 있습니다. 이번 포스트에서는 우리 프로젝트에 Custom Fetcher를 도입하게 된 이유와 구현 방식, 효과에 대해 살펴보겠습니다.</p></blockquote><h1 id="▪︎-기존-fetch-사용-방식의-단점"><a href="#▪︎-기존-fetch-사용-방식의-단점" class="headerlink" title="▪︎ 기존 fetch 사용 방식의 단점"></a>▪︎ 기존 fetch 사용 방식의 단점</h1><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getReview = <span class="keyword">async</span> (&#123; pageParam, sortOrder &#125;: <span class="title class_">ReviewParams</span>): <span class="title class_">Promise</span>&lt;<span class="title class_">ReviewResponse</span>&gt; =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`/api/reviews?page=<span class="subst">$&#123;pageParam&#125;</span>&amp;sortBy=<span class="subst">$&#123;sortOrder&#125;</span>&amp;limit=12`</span>, &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">    <span class="attr">credentials</span>: <span class="string">&quot;include&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!res.<span class="property">ok</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> error = <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Login failed&quot;</span>) <span class="keyword">as</span> <span class="title class_">ReviewError</span>;</span><br><span class="line">    error.<span class="property">status</span> = res.<span class="property">status</span>;</span><br><span class="line">    error.<span class="property">message</span> = <span class="string">`Server error: <span class="subst">$&#123;res.status&#125;</span>`</span>;</span><br><span class="line">    <span class="keyword">throw</span> error;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res.<span class="title function_">json</span>();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>기존에 API 요청 코드들을 작성할 때에는 각 요청마다 method와 credentials와 같은 config 코드들을 작성해야 했고, 반환할 에러 타입들도 각각 작성해주어야 했습니다. 추가로 Next.js의 서버 컴포넌트와 같이 쿠키가 자동으로 실려가지 않는 상황에 대비하기 위한 코드들도 작성해야 했습니다.</p><p>따라서 API 관련 코드를 작성하는 개발자들은 각 API가 어디서 쓰일지, 어떤 설정이 필요한지를 매번 생각하고 코드에 적용해야 했습니다. 또한 이러한 API 요청 코드 구조의 변화가 있을 경우, 각 API 요청 코드를 전부 찾아가 일일이 수정해주어야 했습니다. 뿐만아니라 각 개발자마다 다른 구현 방식으로 인해 코드의 일관성이 떨어졌고, 이는 가독성을 저해하는 요소였습니다.</p><p>정리해보자면 다음과 같은 문제점들이 있었습니다.</p><ol><li>반복적인 코드<ul><li>기본 URL 설정</li><li>헤더 설정</li><li>에러 처리</li><li>응답 파싱</li></ul></li><li>일관성 부족<ul><li>개발자마다 다른 구현 방식</li><li>에러 처리 방식의 차이</li><li>타입 처리의 비일관성</li></ul></li><li>유지보수의 어려움<ul><li>API 로직 변경 시 여러 곳에 전체적인 수정 필요</li></ul></li></ol><p>위와 같은 기본 fetcher의 단점을 극복하기 위해 우리 프로젝트에 Custom Fetcher를 만들었습니다.</p><h1 id="▪︎-Custom-Fetcher-구현"><a href="#▪︎-Custom-Fetcher-구현" class="headerlink" title="▪︎ Custom Fetcher 구현"></a>▪︎ Custom Fetcher 구현</h1><h2 id="▫︎-전체-코드"><a href="#▫︎-전체-코드" class="headerlink" title="▫︎ 전체 코드"></a>▫︎ 전체 코드</h2><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">FetcherError</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@/@types/api&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; getAccessTokenFromCookies &#125; <span class="keyword">from</span> <span class="string">&quot;@/utils/cookies&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">HTTPMethod</span> = <span class="string">&quot;GET&quot;</span> | <span class="string">&quot;POST&quot;</span> | <span class="string">&quot;PUT&quot;</span> | <span class="string">&quot;DELETE&quot;</span> | <span class="string">&quot;PATCH&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">FetcherConfig</span> <span class="keyword">extends</span> <span class="title class_">RequestInit</span> &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="title class_">HTTPMethod</span>;</span><br><span class="line">  credentials?: <span class="title class_">RequestCredentials</span>;</span><br><span class="line">  headers?: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;;</span><br><span class="line">  body?: <span class="built_in">any</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">BASE_URL</span> = process.<span class="property">env</span>.<span class="property">NEXT_PUBLIC_BASE_URL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * HTTP 요청을 처리하는 기본 fetcher 함수</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">endpoint</span> - API 엔드포인트 경로</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">config</span> - fetch 설정 객체</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> Promise&lt;T&gt; - API 응답 데이터</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> <span class="variable">FetcherError</span> - API 요청 실패 시 발생하는 에러</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> fetcher&lt;T&gt;(<span class="attr">endpoint</span>: <span class="built_in">string</span>, config?: <span class="title class_">FetcherConfig</span>): <span class="title class_">Promise</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">defaultConfig</span>: <span class="title class_">FetcherConfig</span> = &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">    <span class="attr">credentials</span>: <span class="string">&quot;include&quot;</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> accessToken = <span class="keyword">typeof</span> <span class="variable language_">window</span> === <span class="string">&quot;undefined&quot;</span> ? <span class="keyword">await</span> <span class="title function_">getAccessTokenFromCookies</span>() : <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> mergedConfig = &#123;</span><br><span class="line">    ...defaultConfig,</span><br><span class="line">    ...config,</span><br><span class="line">    <span class="attr">headers</span>: <span class="title class_">Object</span>.<span class="title function_">fromEntries</span>(</span><br><span class="line">      <span class="title class_">Object</span>.<span class="title function_">entries</span>(&#123;</span><br><span class="line">        ...defaultConfig.<span class="property">headers</span>,</span><br><span class="line">        ...config?.<span class="property">headers</span>,</span><br><span class="line">        ...(accessToken ? &#123; <span class="title class_">Cookie</span>: <span class="string">`accessToken=<span class="subst">$&#123;accessToken&#125;</span>`</span> &#125; : &#123;&#125;),</span><br><span class="line">        <span class="comment">// eslint-disable-next-line</span></span><br><span class="line">      &#125;).<span class="title function_">filter</span>(<span class="function">(<span class="params">[key, value]</span>) =&gt;</span> value !== <span class="literal">undefined</span>)</span><br><span class="line">    ),</span><br><span class="line">  &#125; <span class="keyword">as</span> <span class="title class_">FetcherConfig</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (mergedConfig.<span class="property">body</span> <span class="keyword">instanceof</span> <span class="title class_">FormData</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (mergedConfig.<span class="property">headers</span>) &#123;</span><br><span class="line">      <span class="keyword">delete</span> mergedConfig.<span class="property">headers</span>[<span class="string">&quot;Content-Type&quot;</span>];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (mergedConfig.<span class="property">body</span>) &#123;</span><br><span class="line">    mergedConfig.<span class="property">body</span> = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(mergedConfig.<span class="property">body</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`<span class="subst">$&#123;BASE_URL&#125;</span><span class="subst">$&#123;endpoint&#125;</span>`</span>, mergedConfig);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (endpoint === <span class="string">&quot;/auth/token/verification&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">status</span>: response.<span class="property">status</span> &#125; <span class="keyword">as</span> T;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!response.<span class="property">ok</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> error = <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;API request failed&quot;</span>) <span class="keyword">as</span> <span class="title class_">FetcherError</span>;</span><br><span class="line">    error.<span class="property">status</span> = response.<span class="property">status</span>;</span><br><span class="line">    error.<span class="property">message</span> = <span class="string">`Server error: <span class="subst">$&#123;response.status&#125;</span>`</span>;</span><br><span class="line">    <span class="keyword">throw</span> error;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> response.<span class="title function_">json</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 편의성 메서드</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> http = &#123;</span><br><span class="line">  <span class="attr">get</span>: &lt;T,&gt;<span class="function">(<span class="params">endpoint: <span class="built_in">string</span>, config?: Omit&lt;FetcherConfig, <span class="string">&quot;method&quot;</span>&gt;</span>) =&gt;</span></span><br><span class="line">    fetcher&lt;T&gt;(endpoint, &#123; ...config, <span class="attr">method</span>: <span class="string">&quot;GET&quot;</span> &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="attr">post</span>: &lt;T,&gt;<span class="function">(<span class="params">endpoint: <span class="built_in">string</span>, data?: <span class="built_in">any</span>, config?: Omit&lt;FetcherConfig, <span class="string">&quot;method&quot;</span> | <span class="string">&quot;body&quot;</span>&gt;</span>) =&gt;</span></span><br><span class="line">    fetcher&lt;T&gt;(endpoint, &#123; ...config, <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>, <span class="attr">body</span>: data &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="attr">put</span>: &lt;T,&gt;<span class="function">(<span class="params">endpoint: <span class="built_in">string</span>, data?: <span class="built_in">any</span>, config?: Omit&lt;FetcherConfig, <span class="string">&quot;method&quot;</span> | <span class="string">&quot;body&quot;</span>&gt;</span>) =&gt;</span></span><br><span class="line">    fetcher&lt;T&gt;(endpoint, &#123; ...config, <span class="attr">method</span>: <span class="string">&quot;PUT&quot;</span>, <span class="attr">body</span>: data &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="attr">delete</span>: &lt;T,&gt;<span class="function">(<span class="params">endpoint: <span class="built_in">string</span>, config?: Omit&lt;FetcherConfig, <span class="string">&quot;method&quot;</span>&gt;</span>) =&gt;</span></span><br><span class="line">    fetcher&lt;T&gt;(endpoint, &#123; ...config, <span class="attr">method</span>: <span class="string">&quot;DELETE&quot;</span> &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="attr">patch</span>: &lt;T,&gt;<span class="function">(<span class="params">endpoint: <span class="built_in">string</span>, data?: <span class="built_in">any</span>, config?: Omit&lt;FetcherConfig, <span class="string">&quot;method&quot;</span> | <span class="string">&quot;body&quot;</span>&gt;</span>) =&gt;</span></span><br><span class="line">    fetcher&lt;T&gt;(endpoint, &#123; ...config, <span class="attr">method</span>: <span class="string">&quot;PATCH&quot;</span>, <span class="attr">body</span>: data &#125;),</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="▫︎-기본-구조-설정"><a href="#▫︎-기본-구조-설정" class="headerlink" title="▫︎ 기본 구조 설정"></a>▫︎ 기본 구조 설정</h2><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">HTTPMethod</span> = <span class="string">&quot;GET&quot;</span> | <span class="string">&quot;POST&quot;</span> | <span class="string">&quot;PUT&quot;</span> | <span class="string">&quot;DELETE&quot;</span> | <span class="string">&quot;PATCH&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">FetcherConfig</span> <span class="keyword">extends</span> <span class="title class_">RequestInit</span> &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="title class_">HTTPMethod</span>;</span><br><span class="line">  credentials?: <span class="title class_">RequestCredentials</span>;</span><br><span class="line">  headers?: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;;</span><br><span class="line">  body?: <span class="built_in">any</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">BASE_URL</span> = process.<span class="property">env</span>.<span class="property">NEXT_PUBLIC_BASE_URL</span>;</span><br></pre></td></tr></table></figure><p>우선 Custom Fetcher의 기본 구조를 타입스크립트를 통해 설정했습니다. 이를 통해 HTTP 메서드의 타입 안정성을 확보하였고, 설정 객체의 타입 또한 명확하게 정의했습니다.</p><h2 id="▫︎-핵심-Fetcher-함수"><a href="#▫︎-핵심-Fetcher-함수" class="headerlink" title="▫︎ 핵심 Fetcher 함수"></a>▫︎ 핵심 Fetcher 함수</h2><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> fetcher&lt;T&gt;(<span class="attr">endpoint</span>: <span class="built_in">string</span>, config?: <span class="title class_">FetcherConfig</span>): <span class="title class_">Promise</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">defaultConfig</span>: <span class="title class_">FetcherConfig</span> = &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">    <span class="attr">credentials</span>: <span class="string">&quot;include&quot;</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// SSR을 고려한 토큰 처리</span></span><br><span class="line">  <span class="keyword">const</span> accessToken = <span class="keyword">typeof</span> <span class="variable language_">window</span> === <span class="string">&quot;undefined&quot;</span> ? <span class="keyword">await</span> <span class="title function_">getAccessTokenFromCookies</span>() : <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> mergedConfig = &#123;</span><br><span class="line">    ...defaultConfig,</span><br><span class="line">    ...config,</span><br><span class="line">    <span class="attr">headers</span>: <span class="title class_">Object</span>.<span class="title function_">fromEntries</span>(</span><br><span class="line">      <span class="title class_">Object</span>.<span class="title function_">entries</span>(&#123;</span><br><span class="line">        ...defaultConfig.<span class="property">headers</span>,</span><br><span class="line">        ...config?.<span class="property">headers</span>,</span><br><span class="line">        ...(accessToken ? &#123; <span class="title class_">Cookie</span>: <span class="string">`accessToken=<span class="subst">$&#123;accessToken&#125;</span>`</span> &#125; : &#123;&#125;),</span><br><span class="line">        <span class="comment">// eslint-disable-next-line</span></span><br><span class="line">      &#125;).<span class="title function_">filter</span>(<span class="function">(<span class="params">[key, value]</span>) =&gt;</span> value !== <span class="literal">undefined</span>)</span><br><span class="line">    ),</span><br><span class="line">  &#125; <span class="keyword">as</span> <span class="title class_">FetcherConfig</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 특수 케이스 처리</span></span><br><span class="line">  <span class="keyword">if</span> (mergedConfig.<span class="property">body</span> <span class="keyword">instanceof</span> <span class="title class_">FormData</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (mergedConfig.<span class="property">headers</span>) &#123;</span><br><span class="line">      <span class="keyword">delete</span> mergedConfig.<span class="property">headers</span>[<span class="string">&quot;Content-Type&quot;</span>];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (mergedConfig.<span class="property">body</span>) &#123;</span><br><span class="line">    mergedConfig.<span class="property">body</span> = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(mergedConfig.<span class="property">body</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`<span class="subst">$&#123;BASE_URL&#125;</span><span class="subst">$&#123;endpoint&#125;</span>`</span>, mergedConfig);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (endpoint === <span class="string">&quot;/auth/token/verification&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">status</span>: response.<span class="property">status</span> &#125; <span class="keyword">as</span> T;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 커스텀 에러 객체를 사용하여 일관된 에러 형식 제공</span></span><br><span class="line">  <span class="keyword">if</span> (!response.<span class="property">ok</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> error = <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;API request failed&quot;</span>) <span class="keyword">as</span> <span class="title class_">FetcherError</span>;</span><br><span class="line">    error.<span class="property">status</span> = response.<span class="property">status</span>;</span><br><span class="line">    error.<span class="property">message</span> = <span class="string">`Server error: <span class="subst">$&#123;response.status&#125;</span>`</span>;</span><br><span class="line">    <span class="keyword">throw</span> error;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> response.<span class="title function_">json</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>fetcher 함수에서는 타입스크립트 제네릭을 통해 응답 타입을 보장할 수 있도록 하였습니다. 또한 기본적인 설정에 사용자 설정을 병합하도록 하여 보다 유연하고 확장성있게 사용될 수 있도록 하였습니다. 뿐만아니라 Next.js SSR 환경을 고려한 토큰 처리도 해주었습니다.</p><h3 id="특수케이스-처리"><a href="#특수케이스-처리" class="headerlink" title="특수케이스 처리"></a>특수케이스 처리</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (mergedConfig.<span class="property">body</span> <span class="keyword">instanceof</span> <span class="title class_">FormData</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (mergedConfig.<span class="property">headers</span>) &#123;</span><br><span class="line">    <span class="keyword">delete</span> mergedConfig.<span class="property">headers</span>[<span class="string">&quot;Content-Type&quot;</span>];</span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (mergedConfig.<span class="property">body</span>) &#123;</span><br><span class="line">  mergedConfig.<span class="property">body</span> = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(mergedConfig.<span class="property">body</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>우리 앱에서 기본적으로 사용되는 api 의 content type인 application&#x2F;json이 아닌 회원가입, 여행 만들기 등에 활용되는 FormData 타입일 때 content type을 바꿔주도록 구성했습니다. FormData 처리를 위해 Content-Type을 자동으로 제거하였고, JSON 데이터를 자동으로 직렬화하도록 하였습니다.</p><h3 id="에러-처리"><a href="#에러-처리" class="headerlink" title="에러 처리"></a>에러 처리</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!response.<span class="property">ok</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> error = <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;API request failed&quot;</span>) <span class="keyword">as</span> <span class="title class_">FetcherError</span>;</span><br><span class="line">  error.<span class="property">status</span> = response.<span class="property">status</span>;</span><br><span class="line">  error.<span class="property">message</span> = <span class="string">`Server error: <span class="subst">$&#123;response.status&#125;</span>`</span>;</span><br><span class="line">  <span class="keyword">throw</span> error;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>에러처리는 Tanstack Query와의 조합을 생각하여 Query를 작성할 때 가독성이 좋을 것이라고 판단한 구조로 커스텀 에러 객체를 반환하도록 하였습니다. 이를 통해 HTTP 상태 코드를 포함한 객체와 메시지로 일관된 에러 형식을 제공할 수 있었습니다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">useMutation</span>(&#123;</span><br><span class="line">    <span class="attr">mutationFn</span>: login,</span><br><span class="line">    <span class="attr">onError</span>: <span class="function">(<span class="params">error: QueryError</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">switch</span> (error.<span class="property">status</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">401</span>:</span><br><span class="line">          <span class="title function_">showToast</span>(<span class="string">&#x27;잘못된 이메일 또는 비밀번호입니다.&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">500</span>:</span><br><span class="line">          <span class="title function_">showToast</span>(<span class="string">&#x27;네트워크를 확인해주세요.&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">          <span class="title function_">showToast</span>(<span class="string">&#x27;알 수 없는 에러가 발생했습니다.&#x27;</span>, <span class="string">&#x27;error&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">onSuccess</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      router.<span class="title function_">push</span>(<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>백엔드에서 반환하는 response의 status를 바로 읽어 에러객체에 저장해주었고 실제 Tanstack Query에 사용할 때에는 에러 객체에서 status를 읽는 방식으로 가독성을 높이고 구조를 통일했습니다.</p><h2 id="▫︎-편의성-메서드"><a href="#▫︎-편의성-메서드" class="headerlink" title="▫︎ 편의성 메서드"></a>▫︎ 편의성 메서드</h2><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> http = &#123;</span><br><span class="line">  <span class="attr">get</span>: &lt;T,&gt;<span class="function">(<span class="params">endpoint: <span class="built_in">string</span>, config?: Omit&lt;FetcherConfig, <span class="string">&quot;method&quot;</span>&gt;</span>) =&gt;</span></span><br><span class="line">    fetcher&lt;T&gt;(endpoint, &#123; ...config, <span class="attr">method</span>: <span class="string">&quot;GET&quot;</span> &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="attr">post</span>: &lt;T,&gt;<span class="function">(<span class="params">endpoint: <span class="built_in">string</span>, data?: <span class="built_in">any</span>, config?: Omit&lt;FetcherConfig, <span class="string">&quot;method&quot;</span> | <span class="string">&quot;body&quot;</span>&gt;</span>) =&gt;</span></span><br><span class="line">    fetcher&lt;T&gt;(endpoint, &#123; ...config, <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>, <span class="attr">body</span>: data &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="attr">put</span>: &lt;T,&gt;<span class="function">(<span class="params">endpoint: <span class="built_in">string</span>, data?: <span class="built_in">any</span>, config?: Omit&lt;FetcherConfig, <span class="string">&quot;method&quot;</span> | <span class="string">&quot;body&quot;</span>&gt;</span>) =&gt;</span></span><br><span class="line">    fetcher&lt;T&gt;(endpoint, &#123; ...config, <span class="attr">method</span>: <span class="string">&quot;PUT&quot;</span>, <span class="attr">body</span>: data &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="attr">delete</span>: &lt;T,&gt;<span class="function">(<span class="params">endpoint: <span class="built_in">string</span>, config?: Omit&lt;FetcherConfig, <span class="string">&quot;method&quot;</span>&gt;</span>) =&gt;</span></span><br><span class="line">    fetcher&lt;T&gt;(endpoint, &#123; ...config, <span class="attr">method</span>: <span class="string">&quot;DELETE&quot;</span> &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="attr">patch</span>: &lt;T,&gt;<span class="function">(<span class="params">endpoint: <span class="built_in">string</span>, data?: <span class="built_in">any</span>, config?: Omit&lt;FetcherConfig, <span class="string">&quot;method&quot;</span> | <span class="string">&quot;body&quot;</span>&gt;</span>) =&gt;</span></span><br><span class="line">    fetcher&lt;T&gt;(endpoint, &#123; ...config, <span class="attr">method</span>: <span class="string">&quot;PATCH&quot;</span>, <span class="attr">body</span>: data &#125;),</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>위에 서술한 fetcher함수를 이용하여 편의성 메서드를 작성하였습니다. 이를 통해 메서드별 타입을 최적화하고, 팀원들에게 간결한 사용법을 통한 일관된 인터페이스를 제공할 수 있었습니다.</p><h1 id="▪︎-실제-사용-예시"><a href="#▪︎-실제-사용-예시" class="headerlink" title="▪︎ 실제 사용 예시"></a>▪︎ 실제 사용 예시</h1><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getMyReview</span> = (<span class="params">limit: <span class="built_in">number</span>, offset: <span class="built_in">number</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> http.<span class="property">get</span>&lt;<span class="title class_">ListResponse</span>&lt;<span class="title class_">Review</span>&gt;&gt;(<span class="string">`/reviews/mine?size=<span class="subst">$&#123;limit&#125;</span>&amp;page=<span class="subst">$&#123;offset&#125;</span>`</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getReviewDetail</span> = (<span class="params">reviewId: <span class="built_in">number</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> http.<span class="property">get</span>&lt;<span class="title class_">BaseResponse</span>&lt;<span class="title class_">Review</span>&gt;&gt;(<span class="string">`/reviews/<span class="subst">$&#123;reviewId&#125;</span>`</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">postReviewLike</span> = (<span class="params">reviewId: <span class="built_in">number</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> http.<span class="property">post</span>&lt;<span class="title class_">BaseResponse</span>&lt;<span class="built_in">unknown</span>&gt;&gt;(<span class="string">`/reviews/<span class="subst">$&#123;reviewId&#125;</span>/likes`</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">deleteReviewLike</span> = (<span class="params">reviewId: <span class="built_in">number</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> http.<span class="property">delete</span>&lt;<span class="title class_">BaseResponse</span>&lt;<span class="built_in">unknown</span>&gt;&gt;(<span class="string">`/reviews/<span class="subst">$&#123;reviewId&#125;</span>/likes`</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>처음 소개했던 기존 방식에 비해 훨씬 간결하고 가독성있게 API 요청 코드를 관리할 수 있게 되었습니다. API 설정 관련하여 고민하며 작성했던 기존 코드에 비해 중앙 집중화되어 관리되는 Custom Fetcher를 통해 실제 팀원들이 API 요청을 작성할 때에는 “메서드”, “엔드포인트”, “반환 타입”만 신경쓴다면 바로 쉽게 사용할 수 있었습니다.</p><h1 id="▪︎-마치며"><a href="#▪︎-마치며" class="headerlink" title="▪︎ 마치며"></a>▪︎ 마치며</h1><p>Custom Fetcher는 단순한 HTTP 클라이언트를 넘어 애플리케이션의 데이터 통신 계층을 체계화합니다. 타입 안정성, 코드 재사용성, 유지보수성을 모두 고려한 설계로, 개발 생산성을 크게 향상시킬 수 있습니다. 특히 Next.js의 서버 컴포넌트와 미들웨어 환경에서도 원활하게 동작하도록 구현되어, 현대적인 웹 애플리케이션 개발에 매우 적합합니다.</p>]]></content:encoded>
      
      
      <category domain="https://NamgungJongMin.github.io/categories/Project/">Project</category>
      
      
      <category domain="https://NamgungJongMin.github.io/tags/WEGO/">WEGO</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/">프로젝트</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/fetch/">fetch</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/custom-fetcher/">custom fetcher</category>
      
      
      <comments>https://namgungjongmin.github.io/2025/01/23/project/wego/customfetcher/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>WEGO ) Next.js의 SSR을 활용한 SEO 최적화와 성능 개선</title>
      <link>https://namgungjongmin.github.io/2025/01/22/project/wego/ssr/</link>
      <guid>https://namgungjongmin.github.io/2025/01/22/project/wego/ssr/</guid>
      <pubDate>Wed, 22 Jan 2025 07:42:15 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;▪︎-데이터-페칭-방식의-이해-CSR-v</description>
        
      
      
      
      <content:encoded><![CDATA[<p><img src="https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png"></p><h1 id="▪︎-데이터-페칭-방식의-이해-CSR-vs-SSR"><a href="#▪︎-데이터-페칭-방식의-이해-CSR-vs-SSR" class="headerlink" title="▪︎ 데이터 페칭 방식의 이해: CSR vs SSR"></a>▪︎ 데이터 페칭 방식의 이해: CSR vs SSR</h1><p>웹 애플리케이션에서 데이터를 가져오는 방식은 크게 클라이언트 사이드 렌더링(CSR)과 서버 사이드 렌더링(SSR)으로 나눌 수 있습니다.</p><p>클라이언트 사이드 데이터 페칭의 경우, 브라우저가 JavaScript를 실행하여 데이터를 가져오기 때문에 초기 HTML은 비어있는 상태입니다. 사용자는 데이터가 로드되기 전까지 로딩 상태를 보게 되며, 검색 엔진은 초기 HTML에서 의미 있는 컨텐츠를 찾을 수 없습니다.</p><p>반면 서버 사이드 데이터 페칭은 서버에서 데이터를 미리 가져와 완성된 HTML을 생성합니다. 이는 사용자에게 더 빠른 초기 로드 경험을 제공하며, 검색 엔진이 컨텐츠를 즉시 크롤링할 수 있게 합니다.</p><h1 id="▪︎-SEO에서-SSR의-장점"><a href="#▪︎-SEO에서-SSR의-장점" class="headerlink" title="▪︎ SEO에서 SSR의 장점"></a>▪︎ SEO에서 SSR의 장점</h1><p>검색 엔진 최적화(SEO)에 있어서 SSR은 다음과 같은 핵심적인 이점을 제공합니다.</p><h2 id="▫︎-완성된-HTML-제공"><a href="#▫︎-완성된-HTML-제공" class="headerlink" title="▫︎ 완성된 HTML 제공"></a>▫︎ <strong>완성된 HTML 제공</strong></h2><ul><li>검색 엔진 크롤러가 JavaScript 실행 없이도 모든 컨텐츠 접근 가능</li><li>메타 데이터와 구조화된 데이터를 초기 HTML에 포함 가능</li></ul><h2 id="▫︎-빠른-초기-로드"><a href="#▫︎-빠른-초기-로드" class="headerlink" title="▫︎ 빠른 초기 로드"></a>▫︎ <strong>빠른 초기 로드</strong></h2><ul><li>Time to First Contentful Paint (FCP) 개선</li><li>사용자 경험 향상으로 인한 간접적 SEO 효과</li></ul><h2 id="▫︎-신뢰성-있는-컨텐츠-제공"><a href="#▫︎-신뢰성-있는-컨텐츠-제공" class="headerlink" title="▫︎ 신뢰성 있는 컨텐츠 제공"></a>▫︎ <strong>신뢰성 있는 컨텐츠 제공</strong></h2><ul><li>동적 데이터 로딩으로 인한 컨텐츠 누락 방지</li><li>일관된 컨텐츠 구조 제공</li></ul><h1 id="▪︎-프로젝트-적용-구현-예시"><a href="#▪︎-프로젝트-적용-구현-예시" class="headerlink" title="▪︎ 프로젝트 적용 (구현 예시)"></a>▪︎ 프로젝트 적용 (구현 예시)</h1><p>예시로 우리 프로젝트에서는 리뷰 상세 페이지에 SSR을 적용했습니다. 이 페이지는 정적인 정보를 주로 다루며 SEO가 중요한 페이지이기 때문입니다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/app/review/[id]/page.tsx</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">ReviewDetailPage</span> = <span class="keyword">async</span> (<span class="params">&#123; params &#125;: &#123; params: <span class="built_in">Promise</span>&lt;&#123; id: <span class="built_in">number</span> &#125;&gt; &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; id &#125; = <span class="keyword">await</span> params;</span><br><span class="line">  <span class="keyword">const</span> queryClient = <span class="keyword">new</span> <span class="title class_">QueryClient</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// fetchQuery를 사용한 서버 사이드 데이터 페칭</span></span><br><span class="line">  <span class="keyword">await</span> queryClient.<span class="title function_">fetchQuery</span>(&#123;</span><br><span class="line">    <span class="attr">queryKey</span>: [<span class="string">&quot;reviews&quot;</span>, <span class="string">&quot;detail&quot;</span>, id],</span><br><span class="line">    <span class="attr">queryFn</span>: <span class="function">() =&gt;</span> <span class="title function_">getReviewDetail</span>(id),</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> data = queryClient.<span class="property">getQueryData</span>&lt;<span class="title class_">BaseResponse</span>&lt;<span class="title class_">Review</span>&gt;&gt;([<span class="string">&quot;reviews&quot;</span>, <span class="string">&quot;detail&quot;</span>, id]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;pb-[120px]&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Header</span> <span class="attr">title</span>=<span class="string">&quot;리뷰 상세보기&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;data &amp;&amp; <span class="tag">&lt;<span class="name">ReviewDetailContainer</span> <span class="attr">data</span>=<span class="string">&#123;data.data&#125;</span> /&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="▫︎-fetchQuery-vs-prefetchQuery"><a href="#▫︎-fetchQuery-vs-prefetchQuery" class="headerlink" title="▫︎ fetchQuery vs prefetchQuery"></a>▫︎ <strong>fetchQuery vs prefetchQuery</strong></h2><p>구현 과정에서 fetchQuery와 prefetchQuery 중 어떤 것을 사용할지 고민했습니다. 테스트 결과 fetchQuery가 더 나은 성능을 보여주었는데, 이는 다음과 같은 이유 때문입니다.</p><h3 id="fetchQuery"><a href="#fetchQuery" class="headerlink" title="fetchQuery"></a>fetchQuery</h3><ul><li>데이터를 즉시 가져오고 캐시에 저장</li><li>Promise가 resolve될 때까지 대기</li><li>데이터가 확실히 있는 상태에서 렌더링 시작</li></ul><h3 id="prefetchQuery"><a href="#prefetchQuery" class="headerlink" title="prefetchQuery"></a>prefetchQuery</h3><ul><li>백그라운드에서 데이터를 가져옴</li><li>데이터 로딩 완료를 기다리지 않음</li><li>때로는 데이터가 없는 상태에서 렌더링이 시작될 수 있음</li></ul><p>prefetchQuery의 경우 가져온 데이터들을 즉시 캐시에 저장하고 반영하는 것이 아니라 prefetch를 통해 백그라운드에 저장해놓은 데이터를 다시 한번 캐시에 등록하는 과정이 추가됩니다. 따라서 fetchQuery에 비해 로딩 속도가 비교적 낮았습니다.</p><h1 id="▪︎-성능-측정-및-개선-효과"><a href="#▪︎-성능-측정-및-개선-효과" class="headerlink" title="▪︎ 성능 측정 및 개선 효과"></a>▪︎ <strong>성능 측정 및 개선 효과</strong></h1><p>SSR 적용 후 다음과 같은 개선 효과를 확인할 수 있었습니다.</p><h2 id="▫︎-검색엔진-크롤링-향상"><a href="#▫︎-검색엔진-크롤링-향상" class="headerlink" title="▫︎ 검색엔진 크롤링 향상"></a>▫︎ <strong>검색엔진 크롤링 향상</strong></h2><ul><li>Google Search Console의 색인 생성 증가</li><li>크롤링 오류 감소</li></ul><h2 id="▫︎-페이지-성능-개선"><a href="#▫︎-페이지-성능-개선" class="headerlink" title="▫︎ 페이지 성능 개선"></a>▫︎ 페이지 성능 개선</h2><p>기존 CSR 방식과 비교하여 LCP 지표에서 큰 차이가 있었습니다.</p><p><img src="https://velog.velcdn.com/images/vbghdl/post/bc9f022d-2211-4b5b-bbe4-347c8b3e5f53/image.png" alt="image.png"></p><p>기존 CSR 방식) LCP: 654.93 ms</p><p><img src="https://velog.velcdn.com/images/vbghdl/post/7baf6991-8e19-43c2-a01d-9e8a2b2f66fb/image.png" alt="image.png"></p><p>수정 SSR 방식) LCP: 182.55 ms</p><p>기존 하위 클라이언트 컴포넌트에서 각 데이터를 페칭하여 페이지에 적용했을 경우 LCP 지표가 654.93 ms로 확인되었습니다. 그러나 SSR을 적용한 이후에는 182.55 ms로 약 72% 개선한 수치를 보여주었습니다.</p><h2 id="▫︎-LCP-지표-개선의-이유"><a href="#▫︎-LCP-지표-개선의-이유" class="headerlink" title="▫︎ LCP 지표 개선의 이유"></a>▫︎ LCP 지표 개선의 이유</h2><p>LCP 지표에 이렇게 큰 차이가 발생하는 이유를 단계별로 확인해보겠습니다.</p><h3 id="CSR의-렌더링-단계-654-93ms"><a href="#CSR의-렌더링-단계-654-93ms" class="headerlink" title="CSR의 렌더링 단계 (654.93ms)"></a>CSR의 렌더링 단계 (654.93ms)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1. 빈 HTML 다운로드</span><br><span class="line">2. JavaScript 번들 다운로드</span><br><span class="line">3. React 초기화</span><br><span class="line">4. useQuery 실행</span><br><span class="line">5. API 요청 및 대기</span><br><span class="line">6. 데이터 수신</span><br><span class="line">7. DOM 렌더링</span><br><span class="line">8. 이미지 로드 시작</span><br></pre></td></tr></table></figure><h3 id="SSR의-렌더링-단계-182-55ms"><a href="#SSR의-렌더링-단계-182-55ms" class="headerlink" title="SSR의 렌더링 단계 (182.55ms)"></a>SSR의 렌더링 단계 (182.55ms)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. 서버에서 데이터 페칭 (다른 단계와 병렬 처리)</span><br><span class="line">2. 서버에서 HTML 생성</span><br><span class="line">3. 완성된 HTML 다운로드 (이미지 URL 포함)</span><br><span class="line">4. 이미지 로드 시작 (HTML 파싱과 동시에)</span><br></pre></td></tr></table></figure><ul><li><strong>네트워크 요청 최적화</strong><ul><li>CSR: HTML → JS → API (순차적)</li><li>SSR: HTML(데이터 포함) → 리소스 (병렬)</li></ul></li><li><strong>렌더링 프로세스 최적화</strong><ul><li>CSR: JS 실행 → 데이터 페칭 → 렌더링</li><li>SSR: 서버에서 미리 렌더링 완료</li></ul></li><li><strong>리소스 로딩 최적화</strong><ul><li>CSR: 데이터 수신 후 이미지 로드 시작</li><li>SSR: HTML 파싱과 동시에 이미지 로드</li></ul></li></ul><p>이 측정 결과는 SEO뿐만 아니라 성능 측면에서도 SSR이 매우 효과적인 선택이었음을 입증합니다.</p><h1 id="▪︎-마치며"><a href="#▪︎-마치며" class="headerlink" title="▪︎ 마치며"></a>▪︎ 마치며</h1><p>SSR을 통한 SEO 최적화는 현대 웹 애플리케이션에서 필수적인 요소입니다. 특히 Next.js의 서버 컴포넌트를 활용하면 효과적으로 SSR을 구현할 수 있으며, 이는 검색 엔진 최적화뿐만 아니라 전반적인 사용자 경험 향상에도 큰 도움이 됩니다.</p><p>우리 프로젝트에서는 fetchQuery를 활용한 서버 사이드 데이터 페칭으로 완성도 높은 SSR을 구현했으며, 이는 SEO와 성능 모두에서 긍정적인 결과를 가져왔습니다. 앞으로도 지속적인 모니터링과 최적화를 통해 더 나은 사용자 경험을 제공할 계획입니다.</p>]]></content:encoded>
      
      
      <category domain="https://NamgungJongMin.github.io/categories/Project/">Project</category>
      
      
      <category domain="https://NamgungJongMin.github.io/tags/WEGO/">WEGO</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/">프로젝트</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/LCP-%EC%B5%9C%EC%A0%81%ED%99%94/">LCP 최적화</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/SSR/">SSR</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EC%84%9C%EB%B2%84-%EC%82%AC%EC%9D%B4%EB%93%9C-%EB%A0%8C%EB%8D%94%EB%A7%81/">서버 사이드 렌더링</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EC%84%9C%EB%B2%84-%EC%82%AC%EC%9D%B4%EB%93%9C-%ED%8E%98%EC%B9%AD/">서버 사이드 페칭</category>
      
      
      <comments>https://namgungjongmin.github.io/2025/01/22/project/wego/ssr/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>WEGO ) 레이아웃 시프팅 현상을 해결하여 CLS 지표 개선하기</title>
      <link>https://namgungjongmin.github.io/2025/01/21/project/wego/cls%EC%B5%9C%EC%A0%81%ED%99%94/</link>
      <guid>https://namgungjongmin.github.io/2025/01/21/project/wego/cls%EC%B5%9C%EC%A0%81%ED%99%94/</guid>
      <pubDate>Tue, 21 Jan 2025 11:12:15 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;▪︎-CLS란-무엇일까&quot;&gt;&lt;a href=</description>
        
      
      
      
      <content:encoded><![CDATA[<p><img src="https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png"></p><h1 id="▪︎-CLS란-무엇일까"><a href="#▪︎-CLS란-무엇일까" class="headerlink" title="▪︎ CLS란 무엇일까?"></a>▪︎ <strong>CLS란 무엇일까?</strong></h1><p>CLS(Cumulative Layout Shift)는 Google의 Core Web Vitals 중 하나로, 페이지 로딩 과정에서 발생하는 예기치 않은 레이아웃 이동을 측정하는 지표입니다. 쉽게 말해, 페이지가 얼마나 ‘덜컥거리는지’를 수치화한 것입니다.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[CLS 점수 기준]</span><br><span class="line">좋음: 0.1 이하</span><br><span class="line">개선 필요: 0.1 ~ 0.25</span><br><span class="line">나쁨: 0.25 이상</span><br></pre></td></tr></table></figure><p>CLS 수치가 점수 기준에서 합격점이라 할지라도 실제 페이지에서 유저가 경험할 때 부자연스러운 부분들이 있을 수 있습니다. WEGO 프로젝트에서 시프팅 현상으로 인한 부자연스로운 페이지 로딩의 예시를 살펴보고, 개선 방법들을 적용하여 실제 CLS 지표의 변화까지 살펴보겠습니다.</p><h1 id="▪︎-레이아웃-시프트가-사용자-경험에-미치는-영향"><a href="#▪︎-레이아웃-시프트가-사용자-경험에-미치는-영향" class="headerlink" title="▪︎ 레이아웃 시프트가 사용자 경험에 미치는 영향"></a>▪︎ 레이아웃 시프트가 사용자 경험에 미치는 영향</h1><p>레이아웃 시프트는 다음과 같은 부정적인 영향을 미칩니다.</p><h2 id="▫︎-사용자-불편"><a href="#▫︎-사용자-불편" class="headerlink" title="▫︎ 사용자 불편"></a>▫︎ <strong>사용자 불편</strong></h2><ul><li>읽고 있던 텍스트의 위치가 갑자기 변경</li><li>클릭하려던 버튼이 순간적으로 이동</li><li>스크롤 위치의 예상치 못한 변화</li></ul><h2 id="▫︎-신뢰성-저하"><a href="#▫︎-신뢰성-저하" class="headerlink" title="▫︎ 신뢰성 저하"></a>▫︎ <strong>신뢰성 저하</strong></h2><ul><li>웹사이트의 완성도가 떨어져 보임</li><li>전문성에 대한 의구심 유발</li><li>사용자의 재방문율 감소</li></ul><h1 id="▪︎-프로젝트에서-발견된-CLS-이슈"><a href="#▪︎-프로젝트에서-발견된-CLS-이슈" class="headerlink" title="▪︎ 프로젝트에서 발견된 CLS 이슈"></a>▪︎ 프로젝트에서 발견된 CLS 이슈</h1><h2 id="▫︎-스크롤바-시프팅"><a href="#▫︎-스크롤바-시프팅" class="headerlink" title="▫︎ 스크롤바 시프팅"></a>▫︎ 스크롤바 시프팅</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[문제 상황]</span><br><span class="line">1. 초기 페이지 로드 시 데이터 없음 -&gt; 스크롤바 없음</span><br><span class="line">2. 데이터 로드 완료 -&gt; 스크롤바 생성</span><br><span class="line">3. 페이지 너비가 스크롤바 너비만큼 감소</span><br><span class="line">4. 전체 레이아웃이 왼쪽으로 시프트</span><br></pre></td></tr></table></figure><p><img src="https://velog.velcdn.com/images/vbghdl/post/03240db9-3c9c-4e90-8cce-ac339c9b74c4/image.png" alt="image.png"></p><h3 id="해결-방안-1-min-height"><a href="#해결-방안-1-min-height" class="headerlink" title="해결 방안 1) min-height"></a>해결 방안 1) min-height</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 항상 스크롤바 공간 확보 */</span></span><br><span class="line"><span class="selector-class">.page-container</span> &#123;</span><br><span class="line">  <span class="attribute">min-height</span>: <span class="number">101</span>dvh; <span class="comment">/* 스크롤바가 항상 표시되도록 설정 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>간단하면서 효율적인 방식으로 해결하는 방법으로 min-height에 적정한 값을 주어 항상 스크롤이 존재하는 페이지로 보여주는 방법을 적용하였습니다.</p><h3 id="해결-방안-2-Skeleton-UI"><a href="#해결-방안-2-Skeleton-UI" class="headerlink" title="해결 방안 2) Skeleton UI"></a>해결 방안 2) Skeleton UI</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">   <span class="keyword">if</span> (isLoading) <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ReviewSkeleton</span> /&gt;</span></span>;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>데이터 페칭이 진행중일 때, 스크롤바가 생길 정도의 데이터만큼 스켈레톤 UI를 렌더링하여 스크롤바가 존재하도록 하였습니다.</p><blockquote><p>위 두가지 방법을 통해 페이지 초기 로드 시부터 스크롤바 공간을 확보하여 레이아웃의 변화가 없도록 하였고 일관된 사용자 경험을 제공할 수 있었습니다.</p></blockquote><h3 id="개선-이후-측정-결과"><a href="#개선-이후-측정-결과" class="headerlink" title="개선 이후 측정 결과"></a>개선 이후 측정 결과</h3><p><img src="https://velog.velcdn.com/images/vbghdl/post/fd4f4a7e-44e8-4050-b2f2-ad8af599ccc2/image.png" alt="image.png"></p><h2 id="▫︎-이미지-시프팅"><a href="#▫︎-이미지-시프팅" class="headerlink" title="▫︎ 이미지 시프팅"></a>▫︎ 이미지 시프팅</h2><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Image</span></span><br><span class="line">  src=&#123;travelImage&#125;</span><br><span class="line">  alt=&#123;<span class="string">`<span class="subst">$&#123;travelName&#125;</span> - <span class="subst">$&#123;travelLocation&#125;</span> 여행 이미지`</span>&#125;</span><br><span class="line">  width=&#123;<span class="number">300</span>&#125;</span><br><span class="line">  height=&#123;<span class="number">300</span>&#125;</span><br><span class="line">  className=<span class="string">&quot;h-full w-full rounded object-cover&quot;</span> <span class="comment">// 이미지 로드 전후로 스타일 변경</span></span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><p>이미지가 로드되면서 object-fit의 기본값에서 object-cover가 적용되는 과정이 화면에 보여지며 덜컥거리는 현상이 발생하였습니다.</p><p><img src="https://velog.velcdn.com/images/vbghdl/post/38b10722-7549-4d1e-b019-c6b6c494f4ab/image.png" alt="image.png"></p><h3 id="해결방안"><a href="#해결방안" class="headerlink" title="해결방안"></a>해결방안</h3><p>이를 해결하기 위해 Next.js Image 컴포넌트의 onLoadingComplete 속성을 적용하여 이미지가 완전 로드되기 전까지는 투명상태를 유지하고, 로드 완료 시 부드러운 페이드인 효과를 적용하였습니다.</p><h3 id="개선-이후-측정-결과-1"><a href="#개선-이후-측정-결과-1" class="headerlink" title="개선 이후 측정 결과"></a>개선 이후 측정 결과</h3><p><img src="https://velog.velcdn.com/images/vbghdl/post/f3794c68-4a73-46af-ba0f-2937e6d45b55/image.png" alt="image.png"></p><h1 id="▪︎-개선-효과"><a href="#▪︎-개선-효과" class="headerlink" title="▪︎ 개선 효과"></a>▪︎ 개선 효과</h1><ol><li><strong>사용자 경험 향상</strong><ul><li>부드러운 페이지 전환</li><li>예측 가능한 인터랙션</li><li>전문적인 웹사이트 인상</li></ul></li><li><strong>성능 지표 개선</strong><ul><li>CLS 점수 0.1 이하 달성</li><li>Core Web Vitals 전반적 향상</li><li>모바일 사용성 개선</li></ul></li><li><strong>비즈니스 효과</strong><ul><li>사용자 이탈률 감소</li><li>페이지 체류 시간 증가</li><li>전환율 향상 가능성</li></ul></li></ol><h1 id="▪︎-마치며"><a href="#▪︎-마치며" class="headerlink" title="▪︎ 마치며"></a>▪︎ 마치며</h1><p>CLS 최적화는 단순한 성능 지표의 개선을 넘어 사용자 경험의 질적 향상을 가져옵니다. 특히 무한 스크롤이나 동적 이미지 로딩이 많은 현대 웹 애플리케이션에서는 필수적인 최적화 요소입니다. 우리 프로젝트에서 적용한 두 가지 해결 방안은 간단하면서도 효과적인 CLS 최적화 전략의 좋은 예시가 될 수 있습니다.</p>]]></content:encoded>
      
      
      <category domain="https://NamgungJongMin.github.io/categories/Project/">Project</category>
      
      
      <category domain="https://NamgungJongMin.github.io/tags/WEGO/">WEGO</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/">프로젝트</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/CLS-%EC%B5%9C%EC%A0%81%ED%99%94/">CLS 최적화</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EC%8A%A4%ED%81%AC%EB%A1%A4-%EC%8B%9C%ED%94%84%ED%8C%85/">스크롤 시프팅</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EB%A0%88%EC%9D%B4%EC%95%84%EC%9B%83-%EC%8B%9C%ED%94%84%ED%8C%85/">레이아웃 시프팅</category>
      
      
      <comments>https://namgungjongmin.github.io/2025/01/21/project/wego/cls%EC%B5%9C%EC%A0%81%ED%99%94/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>WEGO ) Skeleton UI를 활용한 웹 성능 및 사용자 경험 최적화</title>
      <link>https://namgungjongmin.github.io/2025/01/20/project/wego/skeleton/</link>
      <guid>https://namgungjongmin.github.io/2025/01/20/project/wego/skeleton/</guid>
      <pubDate>Mon, 20 Jan 2025 14:32:35 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;웹 애플리케이션에서 데이터</description>
        
      
      
      
      <content:encoded><![CDATA[<p><img src="https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png"></p><blockquote><p>웹 애플리케이션에서 데이터 로딩은 피할 수 없는 과정입니다. 특히 네트워크 상태가 불안정하거나 대량의 데이터를 처리해야 하는 경우, 사용자는 빈 화면이나 로딩 스피너를 보며 기다려야 합니다. 이러한 대기 시간은 사용자 경험을 저하시키는 주요 요인이 됩니다. 이 문제를 해결하기 위해 저희는 스켈레톤 UI를 구현하여 적용했습니다.</p></blockquote><h1 id="▪︎-Skeleton-UI-구현-과정"><a href="#▪︎-Skeleton-UI-구현-과정" class="headerlink" title="▪︎ Skeleton UI 구현 과정"></a>▪︎ Skeleton UI 구현 과정</h1><h2 id="▫︎-기본-스타일-설정"><a href="#▫︎-기본-스타일-설정" class="headerlink" title="▫︎ 기본 스타일 설정"></a>▫︎ 기본 스타일 설정</h2><p>먼저 Tailwind 설정 파일에서 스켈레톤 UI의 기본 스타일을 정의했습니다. 스켈레톤 UI의 핵심은 로딩 상태를 시각적으로 표현하는 애니메이션입니다. 이를 위해 그라데이션 효과와 움직임을 결합했습니다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tailwind.config.ts</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">addUtilities</span>(&#123;</span><br><span class="line">  <span class="string">&quot;.skeleton-style&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">background</span>: <span class="string">&quot;linear-gradient(90deg, #E5E7EB 35%, #F3F4F6 50%, #E5E7EB 65%)&quot;</span>,</span><br><span class="line">    <span class="attr">backgroundSize</span>: <span class="string">&quot;300% auto&quot;</span>,</span><br><span class="line">    <span class="attr">animation</span>: <span class="string">&quot;skeleton-loading 1.5s ease-in-out infinite&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;@keyframes skeleton-loading&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;0%&quot;</span>: &#123; <span class="attr">backgroundPosition</span>: <span class="string">&quot;100% 0&quot;</span> &#125;,</span><br><span class="line">    <span class="string">&quot;100%&quot;</span>: &#123; <span class="attr">backgroundPosition</span>: <span class="string">&quot;0 0&quot;</span> &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>이 설정은 세 가지 주요 요소로 구성됩니다.</p><ul><li>그라데이션 배경: 밝은 회색(#F3F4F6)에서 어두운 회색(#E5E7EB)으로 자연스럽게 변화</li><li>배경 크기: 실제 요소보다 3배 큰 배경을 설정하여 부드러운 이동 효과 구현</li><li>애니메이션: 1.5초 동안 배경이 좌우로 움직이며 무한 반복</li></ul><h2 id="▫︎-재사용-가능한-스켈레톤-컴포넌트"><a href="#▫︎-재사용-가능한-스켈레톤-컴포넌트" class="headerlink" title="▫︎ 재사용 가능한 스켈레톤 컴포넌트"></a>▫︎ <strong>재사용 가능한 스켈레톤 컴포넌트</strong></h2><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Skeleton.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Skeleton</span> = (<span class="params">&#123; className, classNameCondition &#125;: Props</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;cn(</span>&quot;<span class="attr">skeleton-style</span>&quot;, <span class="attr">className</span>, <span class="attr">classNameCondition</span>)&#125; /&gt;</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>이 컴포넌트는 단순하지만 유연합니다. className prop을 통해 각 사용처에 맞는 크기와 스타일을 적용할 수 있으며, classNameCondition을 통해 조건부 스타일링도 가능합니다.</p><h2 id="▫︎-실제-적용-여행-카드-스켈레톤"><a href="#▫︎-실제-적용-여행-카드-스켈레톤" class="headerlink" title="▫︎ 실제 적용 (여행 카드 스켈레톤)"></a>▫︎ 실제 적용 (여행 카드 스켈레톤)</h2><p>마이페이지에서 MyTravelCardSkeleton 을 적용한 예시입니다. 실제 데이터가 로드되기 전의 UI를 표현합니다.</p><h3 id="컴포넌트에-적용할-Skeleton-UI-작성"><a href="#컴포넌트에-적용할-Skeleton-UI-작성" class="headerlink" title="컴포넌트에 적용할 Skeleton UI 작성"></a>컴포넌트에 적용할 Skeleton UI 작성</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyTravelCardSkeleton.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">MyTravelCardSkeleton</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;w-full max-w-[335px] pb-10 md:max-w-[688px] xl:max-w-[1400px]&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;grid w-full gap-5 xl:grid-cols-2 xl:gap-6&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;Array.from(&#123; length: 6 &#125;).map((_, index) =&gt; (</span></span><br><span class="line"><span class="language-xml">          // eslint-disable-next-line react/no-array-index-key</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&#123;</span>`<span class="attr">skeleton-</span>$&#123;<span class="attr">index</span>&#125;`&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;relative flex max-w-[335px] gap-4 md:max-w-[688px] md:gap-9&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">Skeleton</span> <span class="attr">className</span>=<span class="string">&quot;h-[120px] w-[100px] flex-shrink-0 rounded md:h-[160px] md:w-[223px]&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;relative flex w-full flex-col justify-between&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex flex-col gap-1&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;<span class="name">Skeleton</span> <span class="attr">className</span>=<span class="string">&quot;h-5 w-12 rounded-[20px]&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;<span class="name">Skeleton</span> <span class="attr">className</span>=<span class="string">&quot;h-6 w-full md:h-[26px]&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex flex-col gap-2.5&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;<span class="name">Skeleton</span> <span class="attr">className</span>=<span class="string">&quot;h-5 w-full&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;<span class="name">Skeleton</span> <span class="attr">className</span>=<span class="string">&quot;h-4 w-full&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Skeleton</span> <span class="attr">className</span>=<span class="string">&quot;mt-5 h-[1px] w-full max-w-[1400px]&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ))&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="마이페이지-여행-카드에-적용"><a href="#마이페이지-여행-카드에-적용" class="headerlink" title="마이페이지 여행 카드에 적용"></a>마이페이지 여행 카드에 적용</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Upcomming</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> itemsPerPage = <span class="number">6</span>;</span><br><span class="line">  <span class="keyword">const</span> [currentPage, setCurrentPage] = <span class="title function_">useState</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">const</span> &#123; <span class="attr">data</span>: travels, isLoading &#125; = <span class="title function_">useUpcommingTravel</span>(itemsPerPage, currentPage - <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">const</span> totalPages = travels ? <span class="title class_">Math</span>.<span class="title function_">ceil</span>(travels.<span class="property">data</span>.<span class="property">total</span> / itemsPerPage) : <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">paginate</span> = (<span class="params">pageNumber: <span class="built_in">number</span></span>) =&gt; <span class="title function_">setCurrentPage</span>(pageNumber);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (isLoading) <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">MyTravelCardSkeleton</span> /&gt;</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">section</span> <span class="attr">className</span>=<span class="string">&quot;w-full max-w-[335px] pb-10 md:max-w-[688px] xl:max-w-[1400px]&quot;</span> <span class="attr">data-testid</span>=<span class="string">&quot;upcomming-travels&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;travels &amp;&amp; travels.data.total &gt; 0 ? (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;grid w-full gap-5 xl:grid-cols-2 xl:gap-6&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;travels.data?.content.map((travel: TravelCardProps) =&gt; (</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&#123;travel.travelId&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">TravelCard</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">key</span>=<span class="string">&#123;travel.travelId&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">travelId</span>=<span class="string">&#123;travel.travelId&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">travelImage</span>=<span class="string">&#123;travel.travelImage&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">isDomestic</span>=<span class="string">&#123;travel.isDomestic&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">travelName</span>=<span class="string">&#123;travel.travelName&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">travelLocation</span>=<span class="string">&#123;travel.travelLocation&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">maxTravelMateCount</span>=<span class="string">&#123;travel.maxTravelMateCount&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">currentTravelMateCount</span>=<span class="string">&#123;travel.currentTravelMateCount&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">startAt</span>=<span class="string">&#123;travel.startAt&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">endAt</span>=<span class="string">&#123;travel.endAt&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">bookmarkFlag</span>=<span class="string">&#123;travel.bookmarkFlag&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">formattedStartDate</span>=<span class="string">&#123;checkTomorrow(travel.startAt)&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              /&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">HorizontalDivider</span> <span class="attr">className</span>=<span class="string">&quot;mt-5 xl:mt-6&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          ))&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      ) : (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">NoTravel</span> <span class="attr">message</span>=<span class="string">&quot;아직 참여한 여행이 없어요!&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      )&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Pagination</span> <span class="attr">totalPages</span>=<span class="string">&#123;totalPages&#125;</span> <span class="attr">currentPage</span>=<span class="string">&#123;currentPage&#125;</span> <span class="attr">paginate</span>=<span class="string">&#123;paginate&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>이 컴포넌트는 실제 여행 카드 리스트와 동일한 레이아웃을 가지며, 반응형 디자인을 지원합니다. 6개의 더미 카드를 생성하여 데이터 로딩 중에도 페이지의 구조를 명확히 보여줍니다.</p><h2 id="▫︎-완성된-Skeleton-UI"><a href="#▫︎-완성된-Skeleton-UI" class="headerlink" title="▫︎ 완성된 Skeleton UI"></a>▫︎ 완성된 Skeleton UI</h2><p><img src="https://velog.velcdn.com/images/vbghdl/post/9360c31a-bde2-404e-8f58-a4a0c28f1b19/image.gif" alt="image.png"></p><h1 id="▪︎-효과"><a href="#▪︎-효과" class="headerlink" title="▪︎ 효과"></a>▪︎ 효과</h1><p>스켈레톤 UI 구현은 Core Web Vitals를 포함한 주요 웹 성능 메트릭스의 개선에 큰 영향을 미쳤습니다. 성능의 개선은 사용자 경험 향상으로도 이어집니다.</p><h2 id="▫︎-FCP-First-Contentful-Paint-최적화"><a href="#▫︎-FCP-First-Contentful-Paint-최적화" class="headerlink" title="▫︎ FCP(First Contentful Paint) 최적화"></a>▫︎ <strong>FCP(First Contentful Paint) 최적화</strong></h2><p>스켈레톤 UI는 FCP 개선에도 기여합니다. 페이지의 첫 번째 의미 있는 콘텐츠가 그려지는 시점이 빨라지기 때문입니다.</p><ul><li><strong>즉각적인 시각적 피드백</strong>: 스켈레톤 UI는 실제 콘텐츠보다 훨씬 가벼워, 페이지 진입 시 즉시 렌더링됩니다.</li><li><strong>점진적 로딩</strong>: 메인 콘텐츠가 로드되는 동안 의미 있는 UI를 제공하여 체감 LCP를 개선합니다.</li><li><strong>레이아웃 안정성</strong>: CLS(Cumulative Layout Shift) 또한 개선되어, 콘텐츠 로드 시 레이아웃 변화를 최소화합니다.</li></ul><p><img src="https://velog.velcdn.com/images/vbghdl/post/6091e539-ba73-431b-af15-f0ebd88f1de3/image.png"></p><p>Chrome Dev Tools의 성능 탭에서 같은 조건으로 확인해봤을 때 다음과 같은 차이가 있었습니다. 생각보다 큰 차이가 있어 놀랐습니다.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[스켈레톤 UI 적용 전]</span><br><span class="line">FCP: 559.8ms</span><br><span class="line"></span><br><span class="line">[스켈레톤 UI 적용 후]</span><br><span class="line">FCP: 119ms (약 78% 개선)</span><br></pre></td></tr></table></figure><p>이러한 성능 개선은 특히 모바일 사용자와 불안정한 네트워크 환경에서 더욱 큰 효과를 발휘합니다. Google의 Core Web Vitals 지표 개선은 검색 엔진 최적화(SEO)에도 긍정적인 영향을 미치며, 이는 결과적으로 웹사이트의 가시성 향상으로 이어집니다.</p><h1 id="▪︎-마치며"><a href="#▪︎-마치며" class="headerlink" title="▪︎ 마치며"></a>▪︎ 마치며</h1><p>스켈레톤 UI 구현을 통해 다음과 같은 효과를 얻을 수 있었습니다:</p><ol><li><strong>인지된 성능 향상</strong><ul><li>사용자는 빈 화면이나 로딩 스피너 대신 콘텐츠의 구조를 즉시 확인할 수 있습니다.</li><li>이는 실제 로딩 시간이 동일하더라도 더 빠르게 느껴지는 효과를 줍니다.</li></ul></li><li><strong>자연스러운 전환</strong><ul><li>스켈레톤에서 실제 콘텐츠로의 전환이 부드럽게 이루어집니다.</li><li>레이아웃 시프트가 최소화되어 더 안정적인 사용자 경험을 제공합니다.</li></ul></li><li><strong>프로그레시브 로딩</strong><ul><li>페이지의 구조가 먼저 로드되어 사용자가 전체적인 레이아웃을 파악할 수 있습니다.</li><li>이는 특히 모바일 환경에서 중요한 이점을 제공합니다.</li></ul></li><li><strong>반응형 디자인 지원</strong><ul><li>스켈레톤 UI도 실제 컴포넌트와 동일한 반응형 규칙을 따릅니다.</li><li>모든 화면 크기에서 일관된 로딩 경험을 제공합니다.</li><li></li></ul></li></ol><p>이러한 스켈레톤 UI 구현은 단순한 시각적 개선을 넘어 전반적인 사용자 경험 향상에 기여했습니다.</p><p>특히 네트워크 상태가 불안정한 모바일 환경에서 더욱 효과적으로 작동하며, 사용자의 이탈률을 줄이는 데 도움이 될 것이라 생각합니다.</p>]]></content:encoded>
      
      
      <category domain="https://NamgungJongMin.github.io/categories/Project/">Project</category>
      
      
      <category domain="https://NamgungJongMin.github.io/tags/WEGO/">WEGO</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/">프로젝트</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/Skeleton-UI/">Skeleton UI</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/FCP-%EC%B5%9C%EC%A0%81%ED%99%94/">FCP 최적화</category>
      
      
      <comments>https://namgungjongmin.github.io/2025/01/20/project/wego/skeleton/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>WEGO ) 커스텀 훅을 활용한 인증 폼 구현과 리렌더링 최적화</title>
      <link>https://namgungjongmin.github.io/2025/01/17/project/wego/%EC%9D%B8%EC%A6%9D%ED%8F%BC%EA%B5%AC%ED%98%84/</link>
      <guid>https://namgungjongmin.github.io/2025/01/17/project/wego/%EC%9D%B8%EC%A6%9D%ED%8F%BC%EA%B5%AC%ED%98%84/</guid>
      <pubDate>Fri, 17 Jan 2025 12:52:55 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;▪︎-로그인-폼-구현-과정과-고민들&quot;&gt;&lt;</description>
        
      
      
      
      <content:encoded><![CDATA[<p><img src="https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png"></p><h1 id="▪︎-로그인-폼-구현-과정과-고민들"><a href="#▪︎-로그인-폼-구현-과정과-고민들" class="headerlink" title="▪︎ 로그인 폼 구현 과정과 고민들"></a>▪︎ 로그인 폼 구현 과정과 고민들</h1><h2 id="▫︎-상태-관리-방식의-선택"><a href="#▫︎-상태-관리-방식의-선택" class="headerlink" title="▫︎ 상태 관리 방식의 선택"></a>▫︎ 상태 관리 방식의 선택</h2><p>로그인 폼을 구현할 때 가장 먼저 고민했던 것은 입력값을 어떤 방식으로 관리할 것인가였습니다. React에서는 크게 두 가지 접근 방식이 있습니다:</p><h3 id="제어-컴포넌트-Controlled-Component"><a href="#제어-컴포넌트-Controlled-Component" class="headerlink" title="제어 컴포넌트 (Controlled Component)"></a><strong>제어 컴포넌트 (Controlled Component)</strong></h3><ul><li>리액트가 폼 데이터를 완전히 제어</li><li>useState를 사용하여 상태 관리</li><li>실시간으로 입력값 검증 가능</li></ul><h3 id="비제어-컴포넌트-Uncontrolled-Component"><a href="#비제어-컴포넌트-Uncontrolled-Component" class="headerlink" title="비제어 컴포넌트 (Uncontrolled Component)"></a><strong>비제어 컴포넌트 (Uncontrolled Component)</strong></h3><ul><li>DOM이 폼 데이터를 처리</li><li>useRef를 사용하여 DOM에 직접 접근</li><li>필요할 때만 값을 참조</li></ul><p>저는 다음과 같은 3가지 이유로 useState를 선택하여 구현하였습니다.</p><h3 id="1-상태의-본질"><a href="#1-상태의-본질" class="headerlink" title="1. 상태의 본질"></a>1. 상태의 본질</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">LoginForm</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> email = <span class="title function_">useAuthInput</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;email&#x27;</span> &#125;);</span><br><span class="line">    <span class="keyword">const</span> password = <span class="title function_">useAuthInput</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;password&#x27;</span> &#125;);</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>입력값은 시간에 따라 변화하는 애플리케이션의 상태</li><li>UI에 즉시 반영되어야 하는 데이터</li><li>상태 변화에 따른 부수 효과(유효성 검증) 필요</li></ul><h3 id="2-실시간-유효성-검증"><a href="#2-실시간-유효성-검증" class="headerlink" title="2. 실시간 유효성 검증"></a>2. 실시간 유효성 검증</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> validate = (&#123; name, value, password &#125;: <span class="title class_">ValidateOptions</span>): <span class="function"><span class="params">boolean</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (name) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;email&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="variable constant_">REGEX</span>.<span class="property">email</span>.<span class="title function_">test</span>(value);</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>사용자 경험 향상을 위한 즉각적인 피드백 필요</li><li>상태 변화를 감지하여 자동으로 검증 수행</li></ul><h3 id="3-제어-컴포넌트의-이점"><a href="#3-제어-컴포넌트의-이점" class="headerlink" title="3. 제어 컴포넌트의 이점"></a>3. 제어 컴포넌트의 이점</h3><ul><li>폼 데이터에 대한 완벽한 제어 가능</li><li>입력값 포맷팅이나 제한 용이</li><li>여러 입력 필드 간의 연동 용이</li></ul><h2 id="▫︎-로직을-분리하여-기능-구현"><a href="#▫︎-로직을-분리하여-기능-구현" class="headerlink" title="▫︎ 로직을 분리하여 기능 구현"></a>▫︎ 로직을 분리하여 기능 구현</h2><p>코드의 재사용성과 유지보수성을 높이기 위해 다음과 같이 구조를 분리했습니다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// hooks/useAuthInput.ts</span></span><br><span class="line"><span class="comment">// 상태 관리와 이벤트 핸들링을 위한 커스텀 훅</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">useAuthInput</span> = (<span class="params">&#123; name, password &#125;: Props</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [value, setValue] = <span class="title function_">useState</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> [isValid, setIsValid] = useState&lt;<span class="built_in">boolean</span> | <span class="literal">null</span>&gt;(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> debouncedValidate = <span class="title function_">useMemo</span>(</span><br><span class="line">    <span class="function">() =&gt;</span></span><br><span class="line">      <span class="title function_">debounce</span>(<span class="function">(<span class="params">newValue: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!newValue) &#123;</span><br><span class="line">          <span class="title function_">setIsValid</span>(<span class="literal">null</span>);</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> validationResult = <span class="title function_">validate</span>(&#123; name, <span class="attr">value</span>: newValue, password &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="title function_">setIsValid</span>(validationResult);</span><br><span class="line">      &#125;, <span class="number">250</span>),</span><br><span class="line">    [name, password]</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleChange = <span class="title function_">useCallback</span>(</span><br><span class="line">    <span class="function">(<span class="params">e: React.ChangeEvent&lt;HTMLInputElement&gt;</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> newValue = e.<span class="property">target</span>.<span class="property">value</span>;</span><br><span class="line"></span><br><span class="line">      <span class="title function_">setValue</span>(newValue);</span><br><span class="line">      <span class="title function_">debouncedValidate</span>(newValue);</span><br><span class="line">    &#125;,</span><br><span class="line">    [debouncedValidate]</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      debouncedValidate.<span class="title function_">cancel</span>();</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;, [debouncedValidate]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    value,</span><br><span class="line">    isValid,</span><br><span class="line">    setValue,</span><br><span class="line">    setIsValid,</span><br><span class="line">    handleChange,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// utils/validateAuthInput.ts</span></span><br><span class="line"><span class="comment">// 유효성 검증 로직</span></span><br><span class="line"><span class="keyword">const</span> validate = (&#123; name, value, password &#125;: <span class="title class_">ValidateOptions</span>): <span class="function"><span class="params">boolean</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (name) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;email&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="variable constant_">REGEX</span>.<span class="property">email</span>.<span class="title function_">test</span>(value);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;password&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="variable constant_">REGEX</span>.<span class="property">password</span>.<span class="title function_">test</span>(value);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;passwordConfirm&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> password ? value === password : <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;currentPassword&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="variable constant_">REGEX</span>.<span class="property">currentPassword</span>.<span class="title function_">test</span>(value);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;newPassword&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="variable constant_">REGEX</span>.<span class="property">newPassword</span>.<span class="title function_">test</span>(value);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;name&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="variable constant_">REGEX</span>.<span class="property">name</span>.<span class="title function_">test</span>(value);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;nickname&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="variable constant_">REGEX</span>.<span class="property">nickname</span>.<span class="title function_">test</span>(value);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;contact&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="variable constant_">REGEX</span>.<span class="property">contact</span>.<span class="title function_">test</span>(value);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;birthDate&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="variable constant_">REGEX</span>.<span class="property">birthDate</span>.<span class="title function_">test</span>(value);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;verifyNumber&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="variable constant_">REGEX</span>.<span class="property">verifyNumber</span>.<span class="title function_">test</span>(value);</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// components/auth/form/loginForm.tsx</span></span><br><span class="line"><span class="comment">// UI 컴포넌트</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">LoginForm</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> email = <span class="title function_">useAuthInput</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;email&quot;</span> &#125;);</span><br><span class="line">  <span class="keyword">const</span> password = <span class="title function_">useAuthInput</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;password&quot;</span> &#125;);</span><br><span class="line">  <span class="keyword">const</span> &#123; <span class="attr">mutate</span>: login, <span class="attr">isPending</span>: isLoggingIn &#125; = <span class="title function_">useLogin</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleLogin</span> = (<span class="params">e: React.FormEvent&lt;HTMLFormElement&gt;</span>) =&gt; &#123;</span><br><span class="line">    e.<span class="title function_">preventDefault</span>();</span><br><span class="line"></span><br><span class="line">    <span class="title function_">login</span>(&#123;</span><br><span class="line">      <span class="attr">email</span>: email.<span class="property">value</span>,</span><br><span class="line">      <span class="attr">password</span>: password.<span class="property">value</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">className</span>=<span class="string">&quot;mb-4 w-full&quot;</span> <span class="attr">onSubmit</span>=<span class="string">&#123;handleLogin&#125;</span> <span class="attr">data-testid</span>=<span class="string">&quot;login-form&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">AuthText</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">type</span>=<span class="string">&quot;email&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">name</span>=<span class="string">&quot;email&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">size</span>=<span class="string">&quot;full&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">value</span>=<span class="string">&#123;email.value&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">isValid</span>=<span class="string">&#123;email.isValid&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;email.handleChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">AuthPassword</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">name</span>=<span class="string">&quot;password&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">value</span>=<span class="string">&#123;password.value&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">isValid</span>=<span class="string">&#123;password.isValid&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;password.handleChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">label</span>=<span class="string">&quot;로그인&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">size</span>=<span class="string">&quot;full&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">className</span>=<span class="string">&quot;mt-[180px] hover:bg-primary-normal&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">disabled</span>=<span class="string">&#123;!email.isValid</span> || !<span class="attr">password.isValid</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">showSpinner</span>=<span class="string">&#123;isLoggingIn&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>이러한 구조는 각 부분의 책임이 명확하다는 점, 테스트가 용이하다는 점, 코드의 재사용성이 향상된다는 장점이 있습니다.</p><h1 id="▪︎-상태-공존과-리렌더링-최적화"><a href="#▪︎-상태-공존과-리렌더링-최적화" class="headerlink" title="▪︎ 상태 공존과 리렌더링 최적화"></a>▪︎ <strong>상태 공존과 리렌더링 최적화</strong></h1><h2 id="▫︎-상태-공존-State-Colocation"><a href="#▫︎-상태-공존-State-Colocation" class="headerlink" title="▫︎ 상태 공존 (State Colocation)"></a>▫︎ 상태 공존 (State Colocation)</h2><p>상태 공존이란 하나의 컴포넌트 내에서 여러 개의 독립적인 상태가 함께 존재하는 상황을 말합니다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">LoginForm</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> email = <span class="title function_">useAuthInput</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;email&quot;</span> &#125;); <span class="comment">// 상태 1</span></span><br><span class="line">  <span class="keyword">const</span> password = <span class="title function_">useAuthInput</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;password&quot;</span> &#125;); <span class="comment">// 상태 2</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">AuthText</span> &#123;<span class="attr">...email</span>&#125; /&gt;</span> // 이메일 입력 시 패스워드도 리렌더링</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">AuthPassword</span> &#123;<span class="attr">...password</span>&#125; /&gt;</span> // 패스워드 입력 시 이메일도 리렌더링</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>상태 공존으로 인해 한 입력 필드의 상태 변화가 다른 필드의 불필요한 리렌더링을 유발한다는 문제점이 있었습니다. 이것은 성능 저하로 이어지고 결국 사용자 경험을 저하시키는 결과를 낳을 수 있었습니다.</p><p>이를 위해 메모이제이션 기능을 이용한 최적화 전략을 사용하기로 했습니다.</p><h2 id="▫︎-memoization을-통한-최적화"><a href="#▫︎-memoization을-통한-최적화" class="headerlink" title="▫︎ memoization을 통한 최적화"></a>▫︎ memoization을 통한 최적화</h2><h3 id="React-memo를-통한-컴포넌트-메모이제이션"><a href="#React-memo를-통한-컴포넌트-메모이제이션" class="headerlink" title="React.memo를 통한 컴포넌트 메모이제이션"></a>React.memo를 통한 컴포넌트 메모이제이션</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">AuthText</span> = <span class="title function_">memo</span>(</span><br><span class="line">  <span class="function">(<span class="params">&#123;</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">type</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    name,</span></span></span><br><span class="line"><span class="params"><span class="function">    value,</span></span></span><br><span class="line"><span class="params"><span class="function">    isValid,</span></span></span><br><span class="line"><span class="params"><span class="function">  &#125;: <span class="comment">// ...</span></span></span></span><br><span class="line"><span class="params"><span class="function">  Props</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ul><li>props가 변경되지 않은 컴포넌트의 리렌더링 방지</li><li>각 입력 필드가 독립적으로 렌더링</li></ul><h3 id="useCallback을-통한-이벤트-핸들러-메모이제이션"><a href="#useCallback을-통한-이벤트-핸들러-메모이제이션" class="headerlink" title="useCallback을 통한 이벤트 핸들러 메모이제이션"></a>useCallback을 통한 이벤트 핸들러 메모이제이션</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> handleChange = <span class="title function_">useCallback</span>(</span><br><span class="line">  <span class="function">(<span class="params">e: React.ChangeEvent&lt;HTMLInputElement&gt;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> newValue = e.<span class="property">target</span>.<span class="property">value</span>;</span><br><span class="line">    <span class="title function_">setValue</span>(newValue);</span><br><span class="line">    <span class="title function_">debouncedValidate</span>(newValue);</span><br><span class="line">  &#125;,</span><br><span class="line">  [debouncedValidate]</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ul><li>매 렌더링마다 새로운 함수가 생성되는 것을 방지</li><li>의존성 배열에 debouncedValidate만 포함하여 불필요한 재생성 방지</li></ul><h3 id="useMemo를-통한-검증-함수-메모이제이션"><a href="#useMemo를-통한-검증-함수-메모이제이션" class="headerlink" title="useMemo를 통한 검증 함수 메모이제이션"></a>useMemo를 통한 검증 함수 메모이제이션</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> debouncedValidate = <span class="title function_">useMemo</span>(</span><br><span class="line">  <span class="function">() =&gt;</span></span><br><span class="line">    <span class="title function_">debounce</span>(<span class="function">(<span class="params">newValue: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!newValue) &#123;</span><br><span class="line">        <span class="title function_">setIsValid</span>(<span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">const</span> validationResult = <span class="title function_">validate</span>(&#123; name, <span class="attr">value</span>: newValue, password &#125;);</span><br><span class="line">      <span class="title function_">setIsValid</span>(validationResult);</span><br><span class="line">    &#125;, <span class="number">250</span>),</span><br><span class="line">  [name, password]</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ul><li>고비용 연산인 debounce 함수의 재생성 방지</li><li>의존성이 변경될 때만 새로운 함수 생성</li></ul><h1 id="▪︎-결과"><a href="#▪︎-결과" class="headerlink" title="▪︎ 결과"></a>▪︎ 결과</h1><p>이러한 최적화 전략들을 적용한 결과 다음과 같은 점들이 개선되었습니다.</p><h3 id="1-성능-향상"><a href="#1-성능-향상" class="headerlink" title="1. 성능 향상"></a>1. 성능 향상</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[리렌더링 패턴]</span><br><span class="line">최적화 전: Input1 변경 → 모든 Input 리렌더링</span><br><span class="line">최적화 후: Input1 변경 → Input1만 리렌더링</span><br></pre></td></tr></table></figure><h3 id="2-메모리-사용-개선"><a href="#2-메모리-사용-개선" class="headerlink" title="2. 메모리 사용 개선"></a>2. 메모리 사용 개선</h3><ul><li>불필요한 함수 생성 감소</li><li>효율적인 메모리 관리</li></ul><h3 id="3-사용자-경험-개선"><a href="#3-사용자-경험-개선" class="headerlink" title="3. 사용자 경험 개선"></a>3. 사용자 경험 개선</h3><ul><li>입력 지연 감소</li><li>부드러운 UI 업데이트</li></ul>]]></content:encoded>
      
      
      <category domain="https://NamgungJongMin.github.io/categories/Project/">Project</category>
      
      
      <category domain="https://NamgungJongMin.github.io/tags/WEGO/">WEGO</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/">프로젝트</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/custom-hook/">custom hook</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EB%A9%94%EB%AA%A8%EC%9D%B4%EC%A0%9C%EC%9D%B4%EC%85%98/">메모이제이션</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EB%A1%9C%EA%B7%B8%EC%9D%B8/">로그인</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EB%A6%AC%EB%A0%8C%EB%8D%94%EB%A7%81-%EC%B5%9C%EC%A0%81%ED%99%94/">리렌더링 최적화</category>
      
      
      <comments>https://namgungjongmin.github.io/2025/01/17/project/wego/%EC%9D%B8%EC%A6%9D%ED%8F%BC%EA%B5%AC%ED%98%84/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>WEGO ) input validate 함수에 debounce를 적용하여 리소스 낭비 방지하기</title>
      <link>https://namgungjongmin.github.io/2025/01/15/project/wego/debounce/</link>
      <guid>https://namgungjongmin.github.io/2025/01/15/project/wego/debounce/</guid>
      <pubDate>Wed, 15 Jan 2025 14:22:47 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;사용자의 입력을 실시간으로</description>
        
      
      
      
      <content:encoded><![CDATA[<p><img src="https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png"></p><blockquote><p>사용자의 입력을 실시간으로 검증하는 기능을 구현할 때, 가장 먼저 고려해야 할 것은 성능과 메모리 관리입니다. 특히 이메일이나 비밀번호와 같은 입력 필드에서는 사용자가 타이핑하는 동안 지속적으로 유효성 검증이 발생하게 되는데, 이는 불필요한 연산과 메모리 사용을 초래할 수 있습니다. 이러한 문제를 해결하기 위해 debounce 기법을 활용한 최적화 방법을 소개하고자 합니다.</p></blockquote><h1 id="▪︎-Debounce를-활용한-최적화-구현"><a href="#▪︎-Debounce를-활용한-최적화-구현" class="headerlink" title="▪︎ Debounce를 활용한 최적화 구현"></a>▪︎ Debounce를 활용한 최적화 구현</h1><p>사용자가 입력 필드에 타이핑을 할 때마다 유효성 검증 함수가 실행되면 다음과 같은 문제가 발생할 수 있습니다:</p><ul><li><strong>불필요한 연산 발생</strong>: 사용자가 ‘<a href="mailto:&#101;&#x78;&#x61;&#109;&#x70;&#108;&#101;&#64;&#103;&#x6d;&#x61;&#x69;&#108;&#46;&#x63;&#111;&#x6d;">&#101;&#x78;&#x61;&#109;&#x70;&#108;&#101;&#64;&#103;&#x6d;&#x61;&#x69;&#108;&#46;&#x63;&#111;&#x6d;</a>‘을 입력한다고 가정했을 때, 각 글자가 입력될 때마다 이메일 유효성 검증이 실행됩니다. 즉, ‘e’, ‘ex’, ‘exa’… 와 같이 완성되지 않은 상태에서도 검증이 수행되는 것입니다.</li><li><strong>리소스 낭비</strong>: 특히 복잡한 유효성 검증 로직이나 API 호출이 포함된 경우, 불필요한 리소스 사용이 발생합니다.</li><li><strong>메모리 누수 가능성</strong>: 컴포넌트가 언마운트되었을 때 진행 중이던 검증 작업들이 적절히 정리되지 않으면 메모리 누수로 이어질 수 있습니다.</li></ul><p>이러한 문제를 해결하기 위해 lodash의 debounce 함수를 활용하여 다음과 같이 구현했습니다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> debouncedValidate = <span class="title function_">useMemo</span>(</span><br><span class="line">  <span class="function">() =&gt;</span></span><br><span class="line">    <span class="title function_">debounce</span>(<span class="function">(<span class="params">newValue: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 빈 값 체크는 즉시 수행</span></span><br><span class="line">      <span class="keyword">if</span> (!newValue) &#123;</span><br><span class="line">        <span class="title function_">setIsValid</span>(<span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 실제 유효성 검증은 지연 수행</span></span><br><span class="line">      <span class="keyword">const</span> validationResult = <span class="title function_">validate</span>(&#123; name, <span class="attr">value</span>: newValue, password &#125;);</span><br><span class="line">      <span class="title function_">setIsValid</span>(validationResult);</span><br><span class="line">    &#125;, <span class="number">250</span>),</span><br><span class="line">  [name, password]</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 메모리 누수 방지를 위한 클린업</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    debouncedValidate.<span class="title function_">cancel</span>();</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, [debouncedValidate]);</span><br></pre></td></tr></table></figure><h2 id="▫︎-Debounce-함수의-메모이제이션"><a href="#▫︎-Debounce-함수의-메모이제이션" class="headerlink" title="▫︎ Debounce 함수의 메모이제이션"></a>▫︎ Debounce 함수의 메모이제이션</h2><p>useMemo를 사용하여 debounce 함수를 메모이제이션한 이유는 다음과 같습니다.</p><ul><li>컴포넌트가 리렌더링될 때마다 새로운 debounce 함수가 생성되는 것을 방지합니다.</li><li>의존성 배열에 name과 password만 포함하여, 이 값들이 변경될 때만 새로운 함수가 생성되도록 합니다.</li><li>불필요한 메모리 사용을 줄이고 성능을 최적화할 수 있습니다.</li></ul><h2 id="▫︎-지연-시간의-설정"><a href="#▫︎-지연-시간의-설정" class="headerlink" title="▫︎ 지연 시간의 설정"></a>▫︎ <strong>지연 시간의 설정</strong></h2><p>250밀리초의 지연 시간을 설정한 이유는 다음과 같습니다.</p><ul><li>사용자의 타이핑 속도를 고려하여 적절한 대기 시간을 설정했습니다.</li><li>너무 짧으면 debounce의 효과가 미미하고, 너무 길면 사용자가 답답함을 느낄 수 있습니다.</li><li>실제 사용자 테스트를 통해 최적의 시간을 도출했습니다.</li></ul><h2 id="▫︎-메모리-누수-방지"><a href="#▫︎-메모리-누수-방지" class="headerlink" title="▫︎ 메모리 누수 방지"></a>▫︎ <strong>메모리 누수 방지</strong></h2><p>클린업 함수를 구현한 이유와 그 중요성.</p><ul><li>컴포넌트가 언마운트될 때 진행 중인 모든 debounce 작업을 취소합니다.</li><li>이는 메모리 누수를 방지하고 예기치 않은 상태 업데이트를 막아줍니다.</li><li>React의 Strict Mode에서도 안정적으로 동작하도록 보장합니다.</li></ul><h1 id="▪︎-최적화의-효과"><a href="#▪︎-최적화의-효과" class="headerlink" title="▪︎ 최적화의 효과"></a>▪︎ <strong>최적화의 효과</strong></h1><p>최적화 이전과 이후를 비교하기 위해 chrome dev tools의 performance 탭과 memory 탭을 활용하였습니다.</p><p><img src="https://velog.velcdn.com/images/vbghdl/post/daabc03d-a451-49ab-ba8c-b96042502093/image.png" alt="image.png"></p><h2 id="▫︎-테스트-시나리오"><a href="#▫︎-테스트-시나리오" class="headerlink" title="▫︎ 테스트 시나리오"></a>▫︎ 테스트 시나리오</h2><p>다음과 같은 상황에서 메모리 사용량을 측정했습니다.</p><ol><li>이메일 입력 필드에 지정된 문자열을 250ms 이상의 속도로 빠르게 입력</li><li>5초 동안 대기</li><li>컴포넌트 언마운트</li></ol><h2 id="▫︎-측정-결과"><a href="#▫︎-측정-결과" class="headerlink" title="▫︎ 측정 결과"></a>▫︎ 측정 결과</h2><h3 id="Debounce-적용-시"><a href="#Debounce-적용-시" class="headerlink" title="Debounce 적용 시"></a>Debounce 적용 시</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Debounce 없이 직접 검증</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleChange</span> = (<span class="params">e: React.ChangeEvent&lt;HTMLInputElement&gt;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> newValue = e.<span class="property">target</span>.<span class="property">value</span>;</span><br><span class="line">  <span class="title function_">setValue</span>(newValue);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> validationResult = <span class="title function_">validate</span>(&#123;</span><br><span class="line">    name,</span><br><span class="line">    <span class="attr">value</span>: newValue,</span><br><span class="line">    password,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="title function_">setIsValid</span>(validationResult);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>초기 메모리: 24MB</li><li>입력 중 최대 메모리: 32MB</li><li>언마운트 후 메모리: 28MB (메모리 누수 발생)</li><li>검증 함수 호출 횟수: 16회 (“<a href="mailto:&#116;&#x65;&#x73;&#x74;&#64;&#x65;&#x78;&#97;&#x6d;&#112;&#x6c;&#101;&#x2e;&#x63;&#x6f;&#x6d;">&#116;&#x65;&#x73;&#x74;&#64;&#x65;&#x78;&#97;&#x6d;&#112;&#x6c;&#101;&#x2e;&#x63;&#x6f;&#x6d;</a>“ 입력 시)</li></ul><h3 id="Debounce-미-적용-시"><a href="#Debounce-미-적용-시" class="headerlink" title="Debounce 미 적용 시"></a>Debounce 미 적용 시</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> debouncedValidate = <span class="title function_">useMemo</span>(</span><br><span class="line">  <span class="function">() =&gt;</span></span><br><span class="line">    <span class="title function_">debounce</span>(<span class="function">(<span class="params">newValue: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!newValue) &#123;</span><br><span class="line">        <span class="title function_">setIsValid</span>(<span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">const</span> validationResult = <span class="title function_">validate</span>(&#123; name, <span class="attr">value</span>: newValue, password &#125;);</span><br><span class="line">      <span class="title function_">setIsValid</span>(validationResult);</span><br><span class="line">    &#125;, <span class="number">250</span>),</span><br><span class="line">  [name, password]</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    debouncedValidate.<span class="title function_">cancel</span>();</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, [debouncedValidate]);</span><br></pre></td></tr></table></figure><ul><li>초기 메모리: 24MB</li><li>입력 중 최대 메모리: 27MB</li><li>언마운트 후 메모리: 24MB (초기 상태로 복귀)</li><li>검증 함수 호출 횟수: 1회 (“<a href="mailto:&#116;&#x65;&#x73;&#116;&#x40;&#x65;&#x78;&#97;&#x6d;&#x70;&#x6c;&#101;&#x2e;&#x63;&#x6f;&#109;">&#116;&#x65;&#x73;&#116;&#x40;&#x65;&#x78;&#97;&#x6d;&#x70;&#x6c;&#101;&#x2e;&#x63;&#x6f;&#109;</a>“ 입력 시)</li></ul><h3 id="메모리-패턴"><a href="#메모리-패턴" class="headerlink" title="메모리 패턴"></a>메모리 패턴</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 메모리 사용량 그래프 (시간에 따른 변화)</span><br><span class="line">/*</span><br><span class="line">Debounce 미적용:</span><br><span class="line">     32MB ┌─────┐</span><br><span class="line">     28MB │     └───────</span><br><span class="line">     24MB └─────────────</span><br><span class="line"></span><br><span class="line">Debounce 적용:</span><br><span class="line">     27MB ┌─┐</span><br><span class="line">     24MB └─└───────────</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><p>주요 차이점:</p><ul><li><strong>최대 메모리 사용량</strong>: Debounce를 적용했을 때 약 16% 낮은 최대 메모리 사용량을 보였습니다.</li><li><strong>메모리 해제</strong>: Debounce 적용 시 컴포넌트 언마운트 후 메모리가 완전히 해제되었습니다.</li><li><strong>메모리 변동폭</strong>: Debounce 적용 시 메모리 사용량의 변동폭이 더 작았습니다.</li></ul><h3 id="CPU-사용량"><a href="#CPU-사용량" class="headerlink" title="CPU 사용량"></a>CPU 사용량</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// CPU 사용량 비교</span><br><span class="line">/*</span><br><span class="line">Debounce 미적용:</span><br><span class="line">- 입력 중 CPU 사용: 평균 15%</span><br><span class="line">- 검증 함수 실행 시 스파이크: 최대 25%</span><br><span class="line"></span><br><span class="line">Debounce 적용:</span><br><span class="line">- 입력 중 CPU 사용: 평균 5%</span><br><span class="line">- 검증 함수 실행 시 스파이크: 최대 8%</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><h3 id="가비지-컬렉션-GC-패턴"><a href="#가비지-컬렉션-GC-패턴" class="headerlink" title="가비지 컬렉션 (GC) 패턴"></a>가비지 컬렉션 (GC) 패턴</h3><ul><li><strong>Debounce 미적용</strong>: 잦은 GC 발생 (초당 약 2-3회)</li><li><strong>Debounce 적용</strong>: GC 발생 빈도 감소 (초당 약 0.5회)</li></ul><h1 id="▪︎-최적화-의의"><a href="#▪︎-최적화-의의" class="headerlink" title="▪︎ 최적화 의의"></a>▪︎ 최적화 의의</h1><ol><li><strong>사용자 경험 개선</strong><ul><li>입력 지연 감소</li><li>브라우저 반응성 향상</li><li>배터리 사용량 감소 (모바일 환경)</li></ul></li><li><strong>서버 리소스 절약</strong><ul><li>API 호출이 포함된 검증의 경우, 서버 부하 감소</li><li>네트워크 트래픽 감소</li></ul></li><li><strong>장기적 안정성</strong><ul><li>메모리 누수 방지로 인한 안정적인 장시간 사용</li><li>예측 가능한 리소스 사용 패턴</li></ul></li></ol><p>이러한 측정 결과를 통해 Debounce 적용이 단순한 최적화를 넘어서, 애플리케이션의 전반적인 성능과 안정성 향상에 큰 영향을 미친다는 것을 확인할 수 있었습니다.</p>]]></content:encoded>
      
      
      <category domain="https://NamgungJongMin.github.io/categories/Project/">Project</category>
      
      
      <category domain="https://NamgungJongMin.github.io/tags/WEGO/">WEGO</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/">프로젝트</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/debounce/">debounce</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/lodash/">lodash</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EC%B5%9C%EC%A0%81%ED%99%94/">최적화</category>
      
      
      <comments>https://namgungjongmin.github.io/2025/01/15/project/wego/debounce/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>WEGO ) Zustand를 활용한 재사용 가능한 모달 시스템 구현</title>
      <link>https://namgungjongmin.github.io/2025/01/13/project/wego/modal/</link>
      <guid>https://namgungjongmin.github.io/2025/01/13/project/wego/modal/</guid>
      <pubDate>Mon, 13 Jan 2025 12:12:47 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Next.js 프로젝트에서</description>
        
      
      
      
      <content:encoded><![CDATA[<p><img src="https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png"></p><blockquote><p>Next.js 프로젝트에서 모달을 효율적으로 관리하고 재사용 가능한 시스템을 구축하기 위해 <code>Zustand</code>를 사용하여 <strong>전역 상태 관리</strong>와 <strong>커스텀 훅을 통한 편리한 모달 호출 인터페이스</strong>를 작성하였습니다.</p></blockquote><h1 id="▪︎-주요-기능"><a href="#▪︎-주요-기능" class="headerlink" title="▪︎ 주요 기능"></a>▪︎ 주요 기능</h1><ul><li>전역 모달 상태 관리 ( Zustand )</li><li>텍스트 하이라이팅 기능</li><li>아이콘 커스터마이징</li><li>확인&#x2F;취소 버튼 커스터마이징</li><li>콜백함수 지원</li></ul><h1 id="▪︎-구현-상세"><a href="#▪︎-구현-상세" class="headerlink" title="▪︎ 구현 상세"></a>▪︎ 구현 상세</h1><h2 id="▫︎-Modal-Store"><a href="#▫︎-Modal-Store" class="headerlink" title="▫︎ Modal Store"></a>▫︎ Modal Store</h2><p>zustand를 사용하여 모달의 상태를 전역적으로 관리하였습니다. 텍스트 하이라이팅, 아이콘, 버튼 텍스트, 콜백 함수 등 다양한 커스터마이징 옵션 제공이 가능합니다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// useModalStore.ts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">TextHighlight</span> &#123;</span><br><span class="line">  <span class="attr">range</span>: &#123;</span><br><span class="line">    <span class="attr">start</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="attr">end</span>: <span class="built_in">number</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="attr">color</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ModalState</span> &#123;</span><br><span class="line">  <span class="attr">isOpen</span>: <span class="built_in">boolean</span>;</span><br><span class="line">  icon?: <span class="title class_">ComponentType</span>;</span><br><span class="line">  <span class="attr">title</span>: <span class="built_in">string</span>;</span><br><span class="line">  titleHighlight?: <span class="title class_">TextHighlight</span>;</span><br><span class="line">  <span class="attr">message</span>: <span class="built_in">string</span>;</span><br><span class="line">  messageHighlight?: <span class="title class_">TextHighlight</span>;</span><br><span class="line">  <span class="attr">confirmText</span>: <span class="built_in">string</span>;</span><br><span class="line">  cancelText?: <span class="built_in">string</span>;</span><br><span class="line">  onConfirm?: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  onCancel?: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ModalStore</span> &#123;</span><br><span class="line">  <span class="attr">modal</span>: <span class="title class_">ModalState</span>;</span><br><span class="line">  <span class="attr">openModal</span>: <span class="function">(<span class="params">modal: Partial&lt;ModalState&gt;</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  <span class="attr">closeModal</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">initialState</span>: <span class="title class_">ModalState</span> = &#123;</span><br><span class="line">  <span class="attr">isOpen</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">message</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">confirmText</span>: <span class="string">&quot;확인&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useModalStore = create&lt;<span class="title class_">ModalStore</span>&gt;(<span class="function">(<span class="params">set</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">modal</span>: initialState,</span><br><span class="line">  <span class="attr">openModal</span>: <span class="function">(<span class="params">modal</span>) =&gt;</span></span><br><span class="line">    <span class="title function_">set</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">modal</span>: &#123; ...state.<span class="property">modal</span>, ...modal, <span class="attr">isOpen</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    &#125;)),</span><br><span class="line">  <span class="attr">closeModal</span>: <span class="function">() =&gt;</span> <span class="title function_">set</span>(&#123; <span class="attr">modal</span>: initialState &#125;),</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; useModalStore, <span class="keyword">type</span> <span class="title class_">TextHighlight</span> &#125;;</span><br></pre></td></tr></table></figure><h2 id="▫︎-Modal-Component"><a href="#▫︎-Modal-Component" class="headerlink" title="▫︎ Modal Component"></a>▫︎ Modal Component</h2><p>실제 화면에 그려질 컴포넌트입니다. 텍스트 하이라이팅 기능에 대해 어떻게 구현할지가 최대 고민거리였습니다.</p><p><img src="https://velog.velcdn.com/images/vbghdl/post/3a26c2b9-7dc1-4073-b726-d89f1facdb66/image.png" alt="image.png"></p><p>위 이미지처럼 Title과 message 들 중 텍스트에 색상으로 하이라이트가 들어가 있는 경우가 있었습니다. 어떤 식으로 인자를 받아야 해당 부분을 구현할 수 있을까 고민하다 하이라이팅 할 텍스트의 시작점과 끝점에 대한 정보와 color 정보를 받아 구현하도록 하였습니다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">HighlightedText</span> = (<span class="params">&#123; text, highlight &#125;: &#123; text: <span class="built_in">string</span>; highlight?: TextHighlight &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (!highlight) <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&quot;whitespace-pre-line&quot;</span>&gt;</span>&#123;text&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&quot;whitespace-pre-line&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;text.slice(0, highlight.range.start)&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&#123;highlight.color&#125;</span>&gt;</span>&#123;text.slice(highlight.range.start, highlight.range.end)&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;text.slice(highlight.range.end)&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>모달 컴포넌트의 코드는 다음과 같습니다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Modal.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Modal</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; modal, closeModal &#125; = <span class="title function_">useModalStore</span>();</span><br><span class="line">  <span class="keyword">const</span> &#123;</span><br><span class="line">    isOpen,</span><br><span class="line">    <span class="attr">icon</span>: <span class="title class_">Icon</span>,</span><br><span class="line">    title,</span><br><span class="line">    titleHighlight,</span><br><span class="line">    message,</span><br><span class="line">    messageHighlight,</span><br><span class="line">    confirmText = <span class="string">&quot;확인&quot;</span>,</span><br><span class="line">    cancelText = <span class="string">&quot;취소&quot;</span>,</span><br><span class="line">    onConfirm,</span><br><span class="line">    onCancel,</span><br><span class="line">  &#125; = modal;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleConfirm</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (onConfirm) <span class="title function_">onConfirm</span>();</span><br><span class="line">    <span class="title function_">closeModal</span>();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleCancel</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (onCancel) <span class="title function_">onCancel</span>();</span><br><span class="line">    <span class="title function_">closeModal</span>();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!isOpen) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;fixed inset-0 z-50 flex animate-fade-in items-center justify-center bg-black/40 pb-[80px]&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;min-w-[298px] animate-slide-up rounded-lg bg-white p-8 md:min-w-[380px]&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;Icon &amp;&amp; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;mb-4 flex justify-center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;bg-primary-light flex h-16 w-16 items-center justify-center rounded-full&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">Icon</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        )&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;text-center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">h2</span> <span class="attr">className</span>=<span class="string">&quot;title-5-b&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">HighlightedText</span> <span class="attr">text</span>=<span class="string">&#123;title&#125;</span> <span class="attr">highlight</span>=<span class="string">&#123;titleHighlight&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span> <span class="attr">className</span>=<span class="string">&quot;text-body-2-r mt-2 whitespace-pre-line text-label-neutral&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">HighlightedText</span> <span class="attr">text</span>=<span class="string">&#123;message&#125;</span> <span class="attr">highlight</span>=<span class="string">&#123;messageHighlight&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;mt-6 flex w-full justify-center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;onCancel ? (</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex w-[250px] gap-2&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">Button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">label</span>=<span class="string">&#123;cancelText&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">size</span>=<span class="string">&quot;full&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">handler</span>=<span class="string">&#123;handleCancel&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">fill</span>=<span class="string">&quot;white&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">className</span>=<span class="string">&quot;h-[38px] w-[120px]&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              /&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">Button</span> <span class="attr">label</span>=<span class="string">&#123;confirmText&#125;</span> <span class="attr">size</span>=<span class="string">&quot;full&quot;</span> <span class="attr">handler</span>=<span class="string">&#123;handleConfirm&#125;</span> <span class="attr">className</span>=<span class="string">&quot;h-[38px] w-[120px]&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          ) : (</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">label</span>=<span class="string">&#123;confirmText&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">size</span>=<span class="string">&quot;addon&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">handler</span>=<span class="string">&#123;handleConfirm&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">className</span>=<span class="string">&quot;h-[38px] w-[120px] md:w-[210px]&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            /&gt;</span></span></span><br><span class="line"><span class="language-xml">          )&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Modal</span>;</span><br></pre></td></tr></table></figure><h2 id="▫︎-Modal-Custom-Hook"><a href="#▫︎-Modal-Custom-Hook" class="headerlink" title="▫︎ Modal Custom Hook"></a>▫︎ Modal Custom Hook</h2><p>간편한 모달 호출을 위해서 인터페이스를 제공하기 위해 커스텀 훅을 작성해주었습니다. 이제는 어디서든 이 커스텀 훅을 필요한 정보와 함께 호출하면 모달 사용이 가능해집니다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">ModalOptions</span> &#123;</span><br><span class="line">  icon?: <span class="title class_">ComponentType</span>&lt;<span class="title class_">SVGProps</span>&lt;<span class="title class_">SVGElement</span>&gt;&gt;;</span><br><span class="line">  titleHighlight?: <span class="title class_">TextHighlight</span>;</span><br><span class="line">  messageHighlight?: <span class="title class_">TextHighlight</span>;</span><br><span class="line">  confirmText?: <span class="built_in">string</span>;</span><br><span class="line">  cancelText?: <span class="built_in">string</span>;</span><br><span class="line">  onConfirm?: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  onCancel?: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">useModal</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; openModal, closeModal &#125; = <span class="title function_">useModalStore</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">showModal</span> = (<span class="params">title: <span class="built_in">string</span>, message: <span class="built_in">string</span>, options?: ModalOptions</span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">openModal</span>(&#123;</span><br><span class="line">      title,</span><br><span class="line">      message,</span><br><span class="line">      ...options,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    showModal,</span><br><span class="line">    closeModal,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useModal;</span><br></pre></td></tr></table></figure><h1 id="▪︎-사용-예시"><a href="#▪︎-사용-예시" class="headerlink" title="▪︎ 사용 예시"></a>▪︎ 사용 예시</h1><p>프로젝트 내 동일한 형식의 모달이 필요한 곳에서는 모달 커스텀 훅을 호출하여 편리하게 사용이 가능했습니다. 예시 코드는 TanstackQuery의 useMutation 훅으로 작성된 회원가입 api 가 성공했을 시, 모달이 보여지게 동작합니다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// useSignup.ts</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">useSignup</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> router = <span class="title function_">useRouter</span>();</span><br><span class="line">  <span class="keyword">const</span> &#123; showModal &#125; = <span class="title function_">useModal</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">useMutation</span>(&#123;</span><br><span class="line">    <span class="attr">mutationFn</span>: signup,</span><br><span class="line">    <span class="attr">onError</span>: <span class="function">(<span class="params">error: QueryError</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">switch</span> (error.<span class="property">status</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">500</span>:</span><br><span class="line">          <span class="title function_">showModal</span>(<span class="string">&quot;네트워크를 확인해주세요.&quot;</span>, <span class="string">&quot;회원가입에 실패했습니다.&quot;</span>, &#123;</span><br><span class="line">            <span class="attr">icon</span>: <span class="title class_">ModalErrorIcon</span>,</span><br><span class="line">            <span class="attr">confirmText</span>: <span class="string">&quot;돌아가기&quot;</span>,</span><br><span class="line">            <span class="attr">messageHighlight</span>: &#123;</span><br><span class="line">              <span class="attr">range</span>: &#123; <span class="attr">start</span>: <span class="number">6</span>, <span class="attr">end</span>: <span class="number">8</span> &#125;,</span><br><span class="line">              <span class="attr">color</span>: <span class="string">&quot;text-status-error&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">onConfirm</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">              router.<span class="title function_">push</span>(<span class="string">&quot;/login&quot;</span>);</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">400</span>:</span><br><span class="line">          <span class="comment">// 400 에러 핸들링</span></span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">        <span class="comment">// default 에러 핸들링</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">onSuccess</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">showModal</span>(<span class="string">&quot;축하해요! WE&#x27;GO의\n회원가입이 완료 되었습니다.&quot;</span>, <span class="string">&quot;이제 함께 떠나는 여행을 시작해요.&quot;</span>, &#123;</span><br><span class="line">        <span class="attr">icon</span>: <span class="title class_">ModalSuccessIcon</span>,</span><br><span class="line">        <span class="attr">confirmText</span>: <span class="string">&quot;확인&quot;</span>,</span><br><span class="line">        <span class="attr">titleHighlight</span>: &#123;</span><br><span class="line">          <span class="attr">range</span>: &#123; <span class="attr">start</span>: <span class="number">19</span>, <span class="attr">end</span>: <span class="number">21</span> &#125;,</span><br><span class="line">          <span class="attr">color</span>: <span class="string">&quot;text-primary-normal&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">onConfirm</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">          router.<span class="title function_">push</span>(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="▪︎-구현-방식의-장점"><a href="#▪︎-구현-방식의-장점" class="headerlink" title="▪︎ 구현 방식의 장점"></a>▪︎ 구현 방식의 장점</h1><h3 id="1-재사용성"><a href="#1-재사용성" class="headerlink" title="1. 재사용성"></a>1. 재사용성</h3><p>프로젝트 전체에서 일관된 모달 UI&#x2F;UX 제공</p><h3 id="2-타입-안정성"><a href="#2-타입-안정성" class="headerlink" title="2. 타입 안정성"></a>2. 타입 안정성</h3><p><code>TypeScript</code>를 활용한 완벽한 타입 지원</p><h3 id="3-커스터마이징"><a href="#3-커스터마이징" class="headerlink" title="3. 커스터마이징"></a>3. 커스터마이징</h3><p>다양한 옵션으로 상황에 맞는 모달 구성 가능</p><h3 id="4-사용-편의성"><a href="#4-사용-편의성" class="headerlink" title="4. 사용 편의성"></a>4. 사용 편의성</h3><p>간단한 인터페이스로 복잡한 모달 구현 가능</p><h1 id="▪︎-마치며"><a href="#▪︎-마치며" class="headerlink" title="▪︎ 마치며"></a>▪︎ 마치며</h1><p><code>Zustand</code>와 <code>Custom Hook</code>을 활용하여 재사용 가능하고 타입 안전한 모달 시스템을 구축했습니다. 이를 통해 프로젝트의 일관성을 유지하면서도 다양한 상황에 대응할 수 있는 유연한 모달 구현이 가능했습니다.</p>]]></content:encoded>
      
      
      <category domain="https://NamgungJongMin.github.io/categories/Project/">Project</category>
      
      
      <category domain="https://NamgungJongMin.github.io/tags/WEGO/">WEGO</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/">프로젝트</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EB%AA%A8%EB%8B%AC/">모달</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/zustand/">zustand</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/custom-hook/">custom hook</category>
      
      
      <comments>https://namgungjongmin.github.io/2025/01/13/project/wego/modal/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>WEGO ) Tailwind CSS로 확장성과 재사용성을 고려한 공통 컴포넌트 설계하기</title>
      <link>https://namgungjongmin.github.io/2025/01/11/project/wego/cn/</link>
      <guid>https://namgungjongmin.github.io/2025/01/11/project/wego/cn/</guid>
      <pubDate>Sat, 11 Jan 2025 08:32:17 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;프로젝트를 진행하면서 버튼</description>
        
      
      
      
      <content:encoded><![CDATA[<p><img src="https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png"></p><blockquote><p>프로젝트를 진행하면서 버튼 컴포넌트와 같은 공통 컴포넌트를 설계할 때, 확장성과 재사용성을 최우선으로 고려했습니다. 이를 위해 cva, clsx, tailwind-merge라는 세 가지 라이브러리를 조합하여 사용했는데요, 이번 글에서는 각 라이브러리의 특징과 이들을 조합했을 때의 시너지에 대해 공유하고자 합니다.</p></blockquote><h1 id="▪︎-각-라이브러리의-특징과-역할"><a href="#▪︎-각-라이브러리의-특징과-역할" class="headerlink" title="▪︎ 각 라이브러리의 특징과 역할"></a>▪︎ 각 <strong>라이브러리의 특징과 역할</strong></h1><h2 id="▫︎-CVA-Class-Variance-Authority"><a href="#▫︎-CVA-Class-Variance-Authority" class="headerlink" title="▫︎ CVA (Class Variance Authority)"></a>▫︎ <strong>CVA (Class Variance Authority)</strong></h2><p>Class Variance Authority(CVA)는 컴포넌트의 다양한 스타일 변형(variants)을 타입 안전하게 관리할 수 있게 해주는 라이브러리입니다. 특히 Tailwind CSS와 함께 사용할 때 그 진가를 발휘하는데, 이는 미리 정의된 스타일 조합을 타입 시스템의 보호 아래 안전하게 사용할 수 있게 해줍니다.</p><p>우리 프로젝트의 버튼 컴포넌트에는 다음과 같이 variants를 정의해 사용하였습니다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">ButtonVariants</span> = <span class="title function_">cva</span>(</span><br><span class="line">  <span class="comment">// 기본 스타일</span></span><br><span class="line">  <span class="string">&quot;body-1-m rounded disabled:border disabled:border-line-normal disabled:bg-background-alternative disabled:text-label-alternative flex items-center justify-center&quot;</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">variants</span>: &#123;</span><br><span class="line">      <span class="attr">fill</span>: &#123;</span><br><span class="line">        <span class="attr">default</span>: <span class="string">&quot;bg-label-normal text-white&quot;</span>,</span><br><span class="line">        <span class="attr">white</span>: <span class="string">&quot;bg-white border border-line-strong text-line-strong&quot;</span>,</span><br><span class="line">        <span class="attr">blue</span>: <span class="string">&quot;bg-primary-normal text-white hover:text-primary-normal hover:bg-blue-100&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">size</span>: &#123;</span><br><span class="line">        <span class="attr">default</span>: <span class="string">&quot;w-[335px] h-[52px]&quot;</span>,</span><br><span class="line">        <span class="attr">full</span>: <span class="string">&quot;w-full h-[52px]&quot;</span>,</span><br><span class="line">        <span class="comment">// ... 기타 사이즈 variants</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// ... 기타 variant 그룹들</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">defaultVariants</span>: &#123;</span><br><span class="line">      <span class="attr">fill</span>: <span class="string">&quot;default&quot;</span>,</span><br><span class="line">      <span class="attr">size</span>: <span class="string">&quot;default&quot;</span>,</span><br><span class="line">      <span class="attr">font</span>: <span class="string">&quot;default&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>이러한 CVA의 사용은 다음과 같은 구체적인 이점을 제공합니다.</p><ol><li><strong>타입 안전성</strong>: TypeScript와 완벽하게 통합되어, 정의되지 않은 variant 조합을 사용하려 할 때 컴파일 단계에서 오류를 발견할 수 있습니다. 예를 들어, fill&#x3D;”invalid”와 같은 잘못된 값을 사용하려 하면 즉시 TypeScript 에러가 발생합니다.</li><li><strong>중앙 집중화된 스타일 관리</strong>: 모든 스타일 variant를 한 파일에서 관리함으로써, 디자인 시스템의 일관성을 유지하기가 훨씬 쉬워집니다. 스타일 수정이 필요할 때도 한 곳만 수정하면 되므로 유지보수가 용이합니다.</li><li><strong>자동 완성 지원</strong>: IDE에서 사용 가능한 variant 옵션들을 자동으로 제안받을 수 있어, 개발 생산성이 크게 향상됩니다.</li></ol><h2 id="▫︎-CLSX"><a href="#▫︎-CLSX" class="headerlink" title="▫︎ CLSX"></a>▫︎ <strong>CLSX</strong></h2><p>CLSX는 조건부 클래스명을 처리하기 위한 유틸리티 라이브러리입니다. 특히 React 컴포넌트에서 동적인 클래스명을 다룰 때 매우 유용합니다. 이 라이브러리는 다양한 형태의 입력을 처리할 수 있으며, 최종적으로 유효한 클래스명 문자열을 생성해줍니다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; clsx, <span class="title class_">ClassValue</span> &#125; <span class="keyword">from</span> <span class="string">&quot;clsx&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// clsx 사용 예시</span></span><br><span class="line"><span class="keyword">const</span> className = <span class="title function_">clsx</span>(<span class="string">&quot;base-class&quot;</span>, isActive &amp;&amp; <span class="string">&quot;active&quot;</span>, &#123; <span class="string">&quot;is-disabled&quot;</span>: isDisabled &#125;, [</span><br><span class="line">  <span class="string">&quot;additional-class-1&quot;</span>,</span><br><span class="line">  <span class="string">&quot;additional-class-2&quot;</span>,</span><br><span class="line">]);</span><br></pre></td></tr></table></figure><p>CLSX는 다음과 같은 강력한 기능들을 제공합니다.</p><ol><li><strong>다양한 입력 형식 지원</strong>: 문자열, 객체, 배열 등 어떤 형태로든 클래스명을 전달할 수 있습니다. 이는 다양한 상황에서 유연하게 클래스를 조합할 수 있게 해줍니다.</li><li><strong>자동 정리</strong>: falsy 값(undefined, null, false 등)을 자동으로 필터링하여 깨끗한 클래스명 문자열을 생성합니다.</li><li><strong>직관적인 문법</strong>: 복잡한 조건부 클래스 로직도 읽기 쉽고 이해하기 쉬운 형태로 작성할 수 있습니다.</li></ol><h2 id="▫︎-Tailwind-Merge"><a href="#▫︎-Tailwind-Merge" class="headerlink" title="▫︎ Tailwind Merge"></a>▫︎ <strong>Tailwind Merge</strong></h2><p>Tailwind Merge는 Tailwind CSS를 사용할 때 발생할 수 있는 클래스 충돌 문제를 우아하게 해결해주는 라이브러리입니다. 특히 재사용 가능한 컴포넌트를 만들 때 매우 유용한데, 이는 기본 스타일과 커스텀 스타일이 충돌할 때 가장 마지막에 선언된 스타일을 우선적으로 적용하는 방식으로 동작합니다.</p><p>Tailwind Merge를 통해 해결할 수 있는 실제 문제 상황을 예시로 살펴보겠습니다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Tailwind Merge 없이 사용할 경우</span></span><br><span class="line">&lt;button className=<span class="string">&quot;px-4 py-2 text-sm text-blue-500 px-6&quot;</span>&gt;</span><br><span class="line">  <span class="comment">// px-4와 px-6이 충돌, 브라우저 CSS 규칙에 따라 먼저 선언된 px-4가 적용됨</span></span><br><span class="line">&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Tailwind Merge 사용</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&#123;twMerge(</span>&quot;<span class="attr">px-4</span> <span class="attr">py-2</span> <span class="attr">text-sm</span> <span class="attr">text-blue-500</span>&quot;, &quot;<span class="attr">px-6</span>&quot;)&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">  // 의도한 대로 px-6이 적용됨</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>Tailwind Merge는 다음과 같은 핵심적인 문제들을 해결합니다.</p><ol><li><strong>충돌 해결</strong>: 같은 속성을 가진 클래스들이 충돌할 때, 가장 마지막에 선언된 클래스를 우선적으로 적용합니다. 이는 CSS의 일반적인 캐스케이딩 규칙과도 일치하는 직관적인 동작입니다.</li><li><strong>최적화</strong>: 중복되거나 불필요한 클래스들을 자동으로 제거하여 최종적으로 깔끔한 클래스 문자열을 생성합니다.</li><li><strong>모든 Tailwind 규칙 지원</strong>: Tailwind CSS의 모든 유틸리티 클래스와 변형자(modifiers)를 완벽하게 이해하고 처리할 수 있습니다.</li></ol><h1 id="▪︎-세-라이브러리를-조합한-유틸함수-활용"><a href="#▪︎-세-라이브러리를-조합한-유틸함수-활용" class="headerlink" title="▪︎ 세 라이브러리를 조합한 유틸함수 활용"></a>▪︎ 세 라이브러리를 조합한 유틸함수 활용</h1><p>이 세 라이브러리를 조합하여 사용할 때 발생하는 시너지는 매우 강력합니다. 각각의 라이브러리가 가진 장점들이 서로를 보완하면서, 더욱 강력하고 유지보수하기 쉬운 컴포넌트 시스템을 구축할 수 있게 됩니다.</p><p>우리 프로젝트에 적용하기 위해 세 라이브러리를 조합한 유틸함수인 cn을 작성하였습니다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// cn.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; twMerge &#125; <span class="keyword">from</span> <span class="string">&quot;tailwind-merge&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; clsx, <span class="title class_">ClassValue</span> &#125; <span class="keyword">from</span> <span class="string">&quot;clsx&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">cn</span> = (<span class="params">...inputs: ClassValue[]</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">twMerge</span>(<span class="title function_">clsx</span>(inputs));</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">/ <span class="title class_">Button</span>.<span class="property">tsx</span> (유틸 함수 활용한 공통 컴포넌트)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Button</span> = forwardRef&lt;<span class="title class_">HTMLButtonElement</span>, <span class="title class_">Props</span>&gt;(</span><br><span class="line">  <span class="function">(<span class="params">&#123;</span></span></span><br><span class="line"><span class="params"><span class="function">    fill,</span></span></span><br><span class="line"><span class="params"><span class="function">    size,</span></span></span><br><span class="line"><span class="params"><span class="function">    font,</span></span></span><br><span class="line"><span class="params"><span class="function">    hover,</span></span></span><br><span class="line"><span class="params"><span class="function">    hoverBorder,</span></span></span><br><span class="line"><span class="params"><span class="function">    className,</span></span></span><br><span class="line"><span class="params"><span class="function">    classNameCondition,</span></span></span><br><span class="line"><span class="params"><span class="function">    ...props</span></span></span><br><span class="line"><span class="params"><span class="function">  &#125;, ref</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">className</span>=<span class="string">&#123;cn(</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">ButtonVariants</span>(&#123; <span class="attr">fill</span>, <span class="attr">size</span>, <span class="attr">font</span>, <span class="attr">hover</span>, <span class="attr">hoverBorder</span> &#125;),</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">className</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">classNameCondition</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        )&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &#123;<span class="attr">...props</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">ref</span>=<span class="string">&#123;ref&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* 버튼 내용 */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="1-개발-경험-향상"><a href="#1-개발-경험-향상" class="headerlink" title="1. 개발 경험 향상"></a><strong>1. 개발 경험 향상</strong></h3><ul><li><strong>타입 안전성</strong>: CVA를 통해 정의된 variants는 TypeScript의 타입 검사를 받게 되어, 잘못된 prop 사용을 방지할 수 있습니다.</li><li><strong>자동 완성</strong>: IDE에서 사용 가능한 모든 variant 옵션들을 자동으로 제안받을 수 있어 개발 속도가 향상됩니다.</li><li><strong>디버깅 용이성</strong>: 스타일 관련 문제가 발생했을 때, 문제의 원인을 쉽게 추적할 수 있습니다.</li></ul><h3 id="2-유지보수성-개선"><a href="#2-유지보수성-개선" class="headerlink" title="2. 유지보수성 개선"></a><strong>2. 유지보수성 개선</strong></h3><ul><li><strong>중앙 집중화된 스타일 관리</strong>: 모든 기본 스타일 변형이 한 곳에서 관리되어 일관성 유지가 쉽습니다.</li><li><strong>변경 용이성</strong>: 디자인 시스템의 변경이 필요할 때, variants 정의만 수정하면 되므로 변경 사항을 쉽게 적용할 수 있습니다.</li><li><strong>코드 재사용</strong>: 잘 정의된 variant 시스템으로 인해 동일한 스타일을 여러 곳에서 일관되게 사용할 수 있습니다.</li></ul><h3 id="3-확장성-확보"><a href="#3-확장성-확보" class="headerlink" title="3. 확장성 확보"></a><strong>3. 확장성 확보</strong></h3><ul><li><strong>커스텀 스타일링</strong>: className prop을 통해 기본 스타일을 확장하거나 재정의할 수 있습니다.</li><li><strong>조건부 스타일링</strong>: classNameCondition을 통해 특정 조건에 따른 스타일 적용이 가능합니다.</li><li><strong>새로운 변형 추가</strong>: 새로운 디자인 요구사항이 생겼을 때 variants에 쉽게 추가할 수 있습니다.</li></ul><h1 id="▪︎-컴포넌트-사용-예시"><a href="#▪︎-컴포넌트-사용-예시" class="headerlink" title="▪︎ 컴포넌트 사용 예시"></a>▪︎ 컴포넌트 사용 예시</h1><h2 id="▫︎-기본적인-사용-패턴"><a href="#▫︎-기본적인-사용-패턴" class="headerlink" title="▫︎ 기본적인 사용 패턴"></a>▫︎ 기본적인 사용 패턴</h2><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 기본 버튼</span></span><br><span class="line">&lt;<span class="title class_">Button</span></span><br><span class="line">  fill=<span class="string">&quot;default&quot;</span></span><br><span class="line">  size=<span class="string">&quot;full&quot;</span></span><br><span class="line">  label=<span class="string">&quot;로그인&quot;</span></span><br><span class="line">/&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 모달 내 버튼</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">fill</span>=<span class="string">&quot;white&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">size</span>=<span class="string">&quot;modal&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">label</span>=<span class="string">&quot;취소&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">/&gt;</span></span></span><br></pre></td></tr></table></figure><p>이러한 기본 사용에서는 미리 정의된 variants를 통해 일관된 디자인을 유지하면서도, 각 상황에 맞는 적절한 스타일을 적용할 수 있습니다.</p><h2 id="▫︎-활용-패턴"><a href="#▫︎-활용-패턴" class="headerlink" title="▫︎ 활용 패턴"></a>▫︎ 활용 패턴</h2><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 동적 스타일링이 필요한 경우</span></span><br><span class="line">&lt;<span class="title class_">Button</span></span><br><span class="line">  fill=<span class="string">&quot;blue&quot;</span></span><br><span class="line">  size=<span class="string">&quot;modal&quot;</span></span><br><span class="line">  className=&#123;<span class="title function_">cn</span>(</span><br><span class="line">    <span class="string">&quot;mt-4&quot;</span>,</span><br><span class="line">    isSpecial &amp;&amp; <span class="string">&quot;border-2 border-primary-normal&quot;</span>,</span><br><span class="line">    isPriority ? <span class="string">&quot;shadow-lg&quot;</span> : <span class="string">&quot;shadow-sm&quot;</span></span><br><span class="line">  )&#125;</span><br><span class="line">  label=<span class="string">&quot;확인&quot;</span></span><br><span class="line">/&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 조건부 스타일링이 필요한 경우</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">fill</span>=<span class="string">&quot;white&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">size</span>=<span class="string">&quot;default&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">classNameCondition</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &#x27;<span class="attr">opacity-50</span> <span class="attr">cursor-not-allowed</span>&#x27;<span class="attr">:</span> <span class="attr">isDisabled</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &#x27;<span class="attr">shadow-md</span>&#x27;<span class="attr">:</span> <span class="attr">isActive</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &#x27;<span class="attr">ring-2</span> <span class="attr">ring-primary-normal</span>&#x27;<span class="attr">:</span> <span class="attr">isFocused</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">label</span>=<span class="string">&quot;제출하기&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">disabled</span>=<span class="string">&#123;isDisabled&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">/&gt;</span></span></span><br></pre></td></tr></table></figure><p>활용 패턴에서는 다음과 같은 이점을 얻을 수 있습니다.</p><ul><li>className을 통해 상황에 따른 추가적인 스타일을 적용할 수 있습니다.</li><li>classNameCondition을 사용하여 여러 조건에 따른 스타일 변화를 한 번에 관리할 수 있습니다.</li><li>기본 variants와 커스텀 스타일을 자연스럽게 조합할 수 있습니다.</li></ul><h1 id="▪︎-유지보수와-확장"><a href="#▪︎-유지보수와-확장" class="headerlink" title="▪︎ 유지보수와 확장"></a>▪︎ 유지보수와 확장</h1><p>이러한 설계는 장기적인 관점에서 큰 이점을 제공합니다.</p><h3 id="1-새로운-디자인-요구사항-대응"><a href="#1-새로운-디자인-요구사항-대응" class="headerlink" title="1. 새로운 디자인 요구사항 대응"></a>1. <strong>새로운 디자인 요구사항 대응</strong></h3><ul><li>새로운 variant를 추가하기 쉽습니다.</li><li>기존 스타일을 수정하더라도 타입 시스템이 변경이 필요한 곳을 알려줍니다.</li></ul><h3 id="2-일관성-유지"><a href="#2-일관성-유지" class="headerlink" title="2. 일관성 유지"></a><strong>2. 일관성 유지</strong></h3><ul><li>모든 버튼이 동일한 스타일 시스템을 따르게 됩니다.</li><li>디자인 토큰의 변경이 용이합니다.</li></ul><h3 id="3-팀-협업"><a href="#3-팀-협업" class="headerlink" title="3. 팀 협업"></a><strong>3. 팀 협업</strong></h3><ul><li>명확한 사용 방법과 타입 지원으로 다른 개발자들도 쉽게 사용할 수 있습니다.</li><li>문서화가 용이합니다.</li></ul><h1 id="▪︎-마치며"><a href="#▪︎-마치며" class="headerlink" title="▪︎ 마치며"></a>▪︎ 마치며</h1><p>이번 글에서는 CVA, CLSX, Tailwind Merge를 조합하여 어떻게 확장 가능하고 유지보수하기 좋은 버튼 컴포넌트를 구현했는지 살펴보았습니다. 이러한 설계 방식을 통해 얻은 주요 이점들을 정리해보면 다음과 같습니다:</p><h2 id="▫︎-실제-프로젝트에서의-효과"><a href="#▫︎-실제-프로젝트에서의-효과" class="headerlink" title="▫︎ 실제 프로젝트에서의 효과"></a><strong>▫︎ 실제 프로젝트에서의 효과</strong></h2><ol><li><strong>개발 생산성 향상</strong><ul><li>타입 시스템의 지원으로 실수를 사전에 방지할 수 있었습니다.</li><li>자동 완성 기능으로 개발 속도가 크게 향상되었습니다.</li><li>반복적인 스타일링 코드 작성이 줄어들었습니다.</li></ul></li><li><strong>디자인 시스템 일관성 확보</strong><ul><li>중앙에서 관리되는 스타일 variants로 인해 일관된 UI를 유지할 수 있었습니다.</li><li>디자인 변경 사항을 쉽게 적용할 수 있었습니다.</li><li>새로운 디자인 요구사항에도 유연하게 대응할 수 있었습니다.</li></ul></li><li><strong>코드 품질 향상</strong><ul><li>타입 안전성으로 인해 런타임 에러가 감소했습니다.</li><li>스타일 관련 버그를 쉽게 추적하고 해결할 수 있었습니다.</li><li>코드베이스가 커져도 유지보수가 어렵지 않았습니다.</li></ul></li></ol><p>이러한 접근 방식은 단순히 스타일링 문제를 해결하는 것을 넘어서, 확장 가능하고 유지보수하기 좋은 컴포넌트 시스템을 구축하는 데 큰 도움이 되었습니다. 특히 팀 단위의 개발에서 일관성을 유지하면서도 유연한 확장이 가능한 구조를 만들 수 있었다는 점에서 큰 의미가 있었습니다.</p><p>앞으로도 이러한 경험을 바탕으로, 더 나은 컴포넌트 시스템을 구축해 나가도록 하겠습니다.</p>]]></content:encoded>
      
      
      <category domain="https://NamgungJongMin.github.io/categories/Project/">Project</category>
      
      
      <category domain="https://NamgungJongMin.github.io/tags/WEGO/">WEGO</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/">프로젝트</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/tailwind-css/">tailwind css</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/clsx/">clsx</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/cva/">cva</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/tailwind-merge/">tailwind merge</category>
      
      
      <comments>https://namgungjongmin.github.io/2025/01/11/project/wego/cn/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>WEGO ) Next.js 미들웨어를 활용한 유저 인증 플로우 구현</title>
      <link>https://namgungjongmin.github.io/2025/01/08/project/wego/%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4/</link>
      <guid>https://namgungjongmin.github.io/2025/01/08/project/wego/%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4/</guid>
      <pubDate>Wed, 08 Jan 2025 14:12:21 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;웹 애플리케이션에서 인증된</description>
        
      
      
      
      <content:encoded><![CDATA[<p><img src="https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png"></p><blockquote><p>웹 애플리케이션에서 인증된 사용자와 비인증 사용자에 대한 페이지 접근 제어는 매우 중요합니다. 특히 사용자 경험(UX)을 해치지 않으면서 안전하게 구현하는 것이 핵심인데요. 이번 글에서는 Next.js의 미들웨어를 활용해 어떻게 더 나은 인증 플로우를 구현했는지 공유하고자 합니다.</p></blockquote><h1 id="▪︎-기존-인증-구현의-문제점"><a href="#▪︎-기존-인증-구현의-문제점" class="headerlink" title="▪︎ 기존 인증 구현의 문제점"></a>▪︎ <strong>기존 인증 구현의 문제점</strong></h1><p>유저의 인증 여부를 판단하기 위해 token 검증만을 위한 api를 백엔드 측에 요청했습니다. 백엔드 측에서는 요청의 쿠키에서 accessToken을 읽어 그 검증 여부에 따라 결과를 반환해줬습니다. 우리 프론트에서는 인가 필요 페이지에서 그 결과가 성공이면 페이지를 보여주고, 실패면 로그인 페이지로 리다이렉트 시키는 로직이 필요했습니다.</p><p>처음에는 컴포넌트 내부에서 api 요청을 하고 그 결과에 따라 리다이렉트 여부를 결정했습니다. 그러나 이 경우 api 요청에 대한 결과를 받는 동안 잠깐동안 페이지의 레이아웃이 보여지는 플리킹 현상이 발생했습니다. 추가로 각 컴포넌트마다 토큰 인증에 따른 리다이렉트 로직을 작성해주어야 했습니다.</p><h2 id="▫︎-깜빡임-현상-Flash-of-Unauthorized-Content"><a href="#▫︎-깜빡임-현상-Flash-of-Unauthorized-Content" class="headerlink" title="▫︎ 깜빡임 현상 (Flash of Unauthorized Content)"></a>▫︎ <strong>깜빡임 현상 (Flash of Unauthorized Content)</strong></h2><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 컴포넌트 내부에서 인증 체크 시 발생하는 문제</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">ProtectedPage</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 인증 체크 후 리다이렉트</span></span><br><span class="line">    <span class="keyword">if</span> (!isAuthenticated) &#123;</span><br><span class="line">      router.<span class="title function_">push</span>(<span class="string">&quot;/login&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>보호된 콘텐츠<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>; <span class="comment">// 잠깐 보였다가 사라짐</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="▫︎-중복-코드-발생"><a href="#▫︎-중복-코드-발생" class="headerlink" title="▫︎ 중복 코드 발생"></a>▫︎ <strong>중복 코드 발생</strong></h2><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 여러 서버 컴포넌트에서 반복되는 인증 체크 로직</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">Page1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> isAuthenticated = <span class="keyword">await</span> <span class="title function_">checkAuth</span>();</span><br><span class="line">  <span class="keyword">if</span> (!isAuthenticated) &#123;</span><br><span class="line">    <span class="title function_">redirect</span>(<span class="string">&quot;/login&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">Page2</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> isAuthenticated = <span class="keyword">await</span> <span class="title function_">checkAuth</span>();</span><br><span class="line">  <span class="keyword">if</span> (!isAuthenticated) &#123;</span><br><span class="line">    <span class="title function_">redirect</span>(<span class="string">&quot;/login&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="▪︎-미들웨어를-활용한-해결-방안"><a href="#▪︎-미들웨어를-활용한-해결-방안" class="headerlink" title="▪︎ 미들웨어를 활용한 해결 방안"></a>▪︎ 미들웨어를 활용한 해결 방안</h1><h2 id="▫︎-중앙-집중화된-인증-로직"><a href="#▫︎-중앙-집중화된-인증-로직" class="headerlink" title="▫︎ 중앙 집중화된 인증 로직"></a>▫︎ <strong>중앙 집중화된 인증 로직</strong></h2><p>미들웨어의 가장 큰 장점은 모든 페이지 요청에 대해 선제적으로 실행된다는 점입니다. 이를 활용하여 인증 로직을 중앙에서 관리할 수 있습니다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// middleware.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">middleware</span> = (<span class="params">request: NextRequest</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 정적 파일 요청은 미들웨어 처리하지 않음</span></span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    request.<span class="property">nextUrl</span>.<span class="property">pathname</span>.<span class="title function_">startsWith</span>(<span class="string">&quot;/_next&quot;</span>) ||</span><br><span class="line">    request.<span class="property">nextUrl</span>.<span class="property">pathname</span>.<span class="title function_">includes</span>(<span class="string">&quot;/api/&quot;</span>) ||</span><br><span class="line">    request.<span class="property">nextUrl</span>.<span class="property">pathname</span>.<span class="title function_">match</span>(<span class="regexp">/\.(ico|png|svg|jpg|jpeg|gif)$/</span>)</span><br><span class="line">  ) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">next</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> response = <span class="title class_">NextResponse</span>.<span class="title function_">next</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 로그인 여부에 따라 리다이렉트</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">authRedirect</span>(request, response);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>여기서 주목할 점은 다음과 같습니다.</p><ul><li><strong>성능 최적화</strong>: 정적 파일에 대한 요청은 미들웨어를 거치지 않도록 처리했습니다. 이는 불필요한 인증 검사를 줄여 성능을 향상시킵니다.</li><li><strong>확장성</strong>: authRedirect 함수를 별도로 분리하여, 추후 인증 로직이 변경되거나 추가되어도 유연하게 대응할 수 있습니다.</li><li><strong>유지보수성</strong>: 인증 관련 로직이 한 곳에 집중되어 있어, 변경이 필요할 때 이 파일만 수정하면 됩니다.</li></ul><h2 id="▫︎-환경별-토큰-검증-전략"><a href="#▫︎-환경별-토큰-검증-전략" class="headerlink" title="▫︎ 환경별 토큰 검증 전략"></a>▫︎ <strong>환경별 토큰 검증 전략</strong></h2><p>개발 환경과 프로덕션 환경에서의 토큰 검증 방식을 분리하여 관리했습니다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">authRedirect</span> = <span class="keyword">async</span> (<span class="params">request: NextRequest, response: NextResponse</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> verifyResponse =</span><br><span class="line">    process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&quot;development&quot;</span> ? <span class="keyword">await</span> <span class="title function_">verifyTokenMock</span>(request) : <span class="keyword">await</span> <span class="title function_">verifyToken</span>(request);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 토큰 유효성 검증이 필요한 페이지 처리</span></span><br><span class="line">  <span class="keyword">if</span> ((<span class="title class_">Object</span>.<span class="title function_">values</span>(<span class="variable constant_">NEED_LOGIN_PATH</span>) <span class="keyword">as</span> <span class="built_in">string</span>[]).<span class="title function_">includes</span>(request.<span class="property">nextUrl</span>.<span class="property">pathname</span>)) &#123;</span><br><span class="line">    <span class="keyword">if</span> (verifyResponse.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> response;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> loginUrl = <span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&quot;/login&quot;</span>, request.<span class="property">nextUrl</span>.<span class="property">origin</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">redirect</span>(loginUrl);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 로그인된 사용자가 접근하면 안 되는 페이지 처리</span></span><br><span class="line">  <span class="keyword">if</span> ((<span class="title class_">Object</span>.<span class="title function_">values</span>(<span class="variable constant_">NEED_LOGOUT_PATH</span>) <span class="keyword">as</span> <span class="built_in">string</span>[]).<span class="title function_">includes</span>(request.<span class="property">nextUrl</span>.<span class="property">pathname</span>)) &#123;</span><br><span class="line">    <span class="keyword">if</span> (verifyResponse.<span class="property">status</span> !== <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> response;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> mainUrl = <span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&quot;/&quot;</span>, request.<span class="property">nextUrl</span>.<span class="property">origin</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">redirect</span>(mainUrl);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> response;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li><strong>환경 분기</strong>: process.env.NODE_ENV를 통해 개발&#x2F;프로덕션 환경을 구분하여 적절한 검증 로직을 실행합니다.</li><li><strong>페이지 접근 제어</strong>:<ul><li>NEED_LOGIN_PATH: 로그인이 필요한 페이지들 (예: 마이페이지, 리뷰 작성 등)</li><li>NEED_LOGOUT_PATH: 비로그인 상태에서만 접근 가능한 페이지들 (예: 로그인, 회원가입)</li></ul></li><li><strong>명확한 리다이렉션</strong>: 인증 상태에 따라 적절한 페이지로 리다이렉트합니다.</li></ul><h2 id="▫︎-구현-시-고려-사항"><a href="#▫︎-구현-시-고려-사항" class="headerlink" title="▫︎ 구현 시 고려 사항"></a>▫︎ 구현 시 고려 사항</h2><h3 id="1-성능-최적화"><a href="#1-성능-최적화" class="headerlink" title="1. 성능 최적화"></a>1. 성능 최적화</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> config = &#123;</span><br><span class="line">  <span class="attr">matcher</span>: [<span class="string">&quot;/((?!api|_next/static|_next/image|favicon.ico).*)&quot;</span>],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li><strong>선택적 실행</strong>: 모든 요청이 아닌, 필요한 경로에 대해서만 미들웨어가 실행되도록 설정</li><li><strong>정적 리소스 제외</strong>: 이미지, 스타일시트 등 정적 리소스는 미들웨어 처리에서 제외</li></ul><h3 id="2-서버-컴포넌트-지원"><a href="#2-서버-컴포넌트-지원" class="headerlink" title="2. 서버 컴포넌트 지원"></a>2. <strong>서버 컴포넌트 지원</strong></h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">setPathnameHeader</span> = (<span class="params">request: NextRequest, response: NextResponse</span>) =&gt; &#123;</span><br><span class="line">  response.<span class="property">headers</span>.<span class="title function_">set</span>(<span class="string">&quot;x-pathname&quot;</span>, request.<span class="property">nextUrl</span>.<span class="property">pathname</span>);</span><br><span class="line">  <span class="keyword">return</span> response;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li><strong>경로 정보 전달</strong>: 서버 컴포넌트에서 현재 경로 정보가 필요한 경우를 위해 헤더에 포함</li><li><strong>확장성</strong>: 추후 서버 컴포넌트에서 필요한 추가 정보도 헤더를 통해 전달 가능</li></ul><h1 id="▪︎-미들웨어의-Edge-Runtime을-고려한-모킹-시스템"><a href="#▪︎-미들웨어의-Edge-Runtime을-고려한-모킹-시스템" class="headerlink" title="▪︎ 미들웨어의 Edge Runtime을 고려한 모킹 시스템"></a>▪︎ 미들웨어의 <strong>Edge Runtime을 고려한 모킹 시스템</strong></h1><p>Next.js 미들웨어는 Edge Runtime에서 실행되기 때문에, api 모킹을 위해 개발 환경에서 사용하고 있던 MSW와 같은 모킹 도구를 사용할 수 없었습니다. 이를 해결하기 위한 전용 모킹 시스템을 구현했습니다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// middleware-mock.ts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mockResponses = &#123;</span><br><span class="line">  <span class="string">&quot;/auth/token/verify&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">success</span>: &#123;</span><br><span class="line">      <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line">      <span class="attr">body</span>: &#123; <span class="attr">ok</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&quot;Token is valid&quot;</span> &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">error</span>: &#123;</span><br><span class="line">      <span class="attr">status</span>: <span class="number">401</span>,</span><br><span class="line">      <span class="attr">body</span>: &#123; <span class="attr">ok</span>: <span class="literal">false</span>, <span class="attr">message</span>: <span class="string">&quot;Unauthorized&quot;</span> &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">mockFetch</span> = <span class="keyword">async</span> (<span class="params">url: <span class="built_in">string</span>, options?: RequestInit</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> endpoint = <span class="keyword">new</span> <span class="title function_">URL</span>(url).<span class="property">pathname</span>;</span><br><span class="line">  <span class="keyword">const</span> mock = mockResponses[endpoint <span class="keyword">as</span> keyof <span class="keyword">typeof</span> mockResponses];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!mock) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">fetch</span>(url); <span class="comment">// 모킹되지 않은 엔드포인트는 실제 요청 수행</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> cookies = options?.<span class="property">headers</span> &amp;&amp; <span class="string">&quot;Cookie&quot;</span> <span class="keyword">in</span> options.<span class="property">headers</span> ? options.<span class="property">headers</span>.<span class="property">Cookie</span> : <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">const</span> hasAccessToken = cookies.<span class="title function_">includes</span>(<span class="string">&quot;accessToken=&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 쿠키의 토큰 존재 여부에 따라 적절한 응답 반환</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(hasAccessToken ? mock.<span class="property">success</span>.<span class="property">body</span> : mock.<span class="property">error</span>.<span class="property">body</span>), &#123;</span><br><span class="line">    <span class="attr">status</span>: hasAccessToken ? mock.<span class="property">success</span>.<span class="property">status</span> : mock.<span class="property">error</span>.<span class="property">status</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123; <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span> &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="▫︎-모킹-시스템의-주요-특징"><a href="#▫︎-모킹-시스템의-주요-특징" class="headerlink" title="▫︎ 모킹 시스템의 주요 특징:"></a>▫︎ <strong>모킹 시스템의 주요 특징</strong>:</h2><ul><li><strong>엔드포인트 기반 모킹</strong>: 각 엔드포인트별로 성공&#x2F;실패 응답을 미리 정의합니다.</li><li><strong>토큰 기반 응답</strong>: 쿠키의 토큰 존재 여부에 따라 다른 응답을 반환합니다.</li><li><strong>유연한 확장</strong>: 새로운 엔드포인트 추가가 용이한 구조입니다.</li><li><strong>폴백 메커니즘</strong>: 모킹되지 않은 엔드포인트는 실제 API를 호출합니다.</li><li><strong>이러한 모킹 시스템의 장점</strong>:<ul><li>개발 효율성: 백엔드 API 완성 전에도 프론트엔드 개발 진행 가능</li><li>안정성: 예측 가능한 응답으로 일관된 개발 환경 제공</li><li>디버깅 용이성: 인증 관련 문제 발생 시 빠른 원인 파악 가능</li></ul></li></ul><h1 id="▪︎-마치며"><a href="#▪︎-마치며" class="headerlink" title="▪︎ 마치며"></a>▪︎ 마치며</h1><p>Next.js의 미들웨어를 활용한 인증 플로우 구현은 단순히 기능적인 요구사항을 충족시키는 것을 넘어, 사용자 경험과 코드 품질 모두를 개선하는 결과를 가져왔습니다. 특히 페이지 전환 시의 깜빡임 현상 제거와 인증 로직의 중앙 집중화는 프로젝트의 품질을 한 단계 높이는 중요한 요소가 되었습니다.</p><p>앞으로도 사용자 경험을 해치지 않으면서도 안전한 인증 시스템을 구축하기 위한 고민을 계속해 나갈 예정입니다.</p>]]></content:encoded>
      
      
      <category domain="https://NamgungJongMin.github.io/categories/Project/">Project</category>
      
      
      <category domain="https://NamgungJongMin.github.io/tags/WEGO/">WEGO</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/">프로젝트</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/next-js/">next.js</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4/">미들웨어</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EC%9C%A0%EC%A0%80-%EC%9D%B8%EC%A6%9D/">유저 인증</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EB%A6%AC%EB%8B%A4%EC%9D%B4%EB%A0%89%ED%8A%B8/">리다이렉트</category>
      
      
      <comments>https://namgungjongmin.github.io/2025/01/08/project/wego/%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>WEGO ) 테스트 코드로 더 안정적인 프로젝트 만들기: Jest를 활용한 실전 테스트 적용</title>
      <link>https://namgungjongmin.github.io/2025/01/08/project/wego/%ED%85%8C%EC%8A%A4%ED%8A%B8%EC%BD%94%EB%93%9C/</link>
      <guid>https://namgungjongmin.github.io/2025/01/08/project/wego/%ED%85%8C%EC%8A%A4%ED%8A%B8%EC%BD%94%EB%93%9C/</guid>
      <pubDate>Wed, 08 Jan 2025 11:42:24 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;프로젝트를 진행하면서 가장</description>
        
      
      
      
      <content:encoded><![CDATA[<p><img src="https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png"></p><blockquote><p>프로젝트를 진행하면서 가장 중요하게 생각했던 것 중 하나는 코드의 안정성이었습니다. 특히 여행 관련 서비스를 개발하면서, 사용자 경험에 직접적인 영향을 미치는 UI 컴포넌트들의 안정성은 매우 중요했습니다.</p></blockquote><h1 id="▪︎-테스트-코드의-필요성"><a href="#▪︎-테스트-코드의-필요성" class="headerlink" title="▪︎ 테스트 코드의 필요성"></a>▪︎ <strong>테스트 코드의 필요성</strong></h1><h2 id="▫︎-복잡한-UI-상태-관리"><a href="#▫︎-복잡한-UI-상태-관리" class="headerlink" title="▫︎ 복잡한 UI 상태 관리"></a>▫︎ <strong>복잡한 UI 상태 관리</strong></h2><p>여행 서비스의 특성상 다양한 상태를 가진 컴포넌트들이 많았습니다. 예를 들어 리뷰 카드의 경우 아래와 같은 복잡한 상태들을 수동으로 테스트하는 것은 비효율적이며, 실수하기 쉬웠습니다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">describe</span>(<span class="string">&#x27;리뷰 카드 컴포넌트&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> props = &#123;</span><br><span class="line">    <span class="attr">reviewId</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">profileImage</span>: <span class="string">&#x27;/user.jpg&#x27;</span>,</span><br><span class="line">    <span class="attr">reviewImage</span>: <span class="string">&#x27;/test.png&#x27;</span>,</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;테스트 리뷰&#x27;</span>,</span><br><span class="line">    <span class="attr">content</span>: <span class="string">&#x27;이것은 테스트 리뷰 내용입니다.&#x27;</span>,</span><br><span class="line">    <span class="attr">starRating</span>: <span class="number">4.5</span>,</span><br><span class="line">    <span class="attr">travelLocation</span>: <span class="string">&#x27;서울&#x27;</span>,</span><br><span class="line">    <span class="attr">createdAt</span>: <span class="string">&#x27;2023-10-10&#x27;</span>,</span><br><span class="line">    <span class="attr">likesFlag</span>: <span class="literal">false</span>,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">it</span>(<span class="string">&#x27;리뷰 카드가 올바르게 렌더링되어야 합니다 (리뷰 페이지)&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">renderWithQueryClient</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">ReviewCard</span> &#123;<span class="attr">...props</span>&#125; <span class="attr">nickname</span>=<span class="string">&quot;테스터&quot;</span> /&gt;</span></span>);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">expect</span>(screen.<span class="title function_">getByText</span>(<span class="string">&#x27;테스트 리뷰&#x27;</span>)).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">    <span class="title function_">expect</span>(</span><br><span class="line">      screen.<span class="title function_">getByText</span>(<span class="string">&#x27;이것은 테스트 리뷰 내용입니다.&#x27;</span>),</span><br><span class="line">    ).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">    <span class="title function_">expect</span>(screen.<span class="title function_">getByText</span>(<span class="string">&#x27;테스터&#x27;</span>)).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">    <span class="title function_">expect</span>(screen.<span class="title function_">getByText</span>(<span class="string">&#x27;4.5&#x27;</span>)).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">it</span>(<span class="string">&#x27;리뷰 카드가 올바르게 렌더링되어야 합니다 (마이페이지)&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">renderWithQueryClient</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">ReviewCard</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></span>);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">expect</span>(screen.<span class="title function_">getByText</span>(<span class="string">&#x27;테스트 리뷰&#x27;</span>)).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">    <span class="title function_">expect</span>(</span><br><span class="line">      screen.<span class="title function_">getByText</span>(<span class="string">&#x27;이것은 테스트 리뷰 내용입니다.&#x27;</span>),</span><br><span class="line">    ).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">    <span class="title function_">expect</span>(screen.<span class="title function_">getByText</span>(<span class="string">&#x27;4.5&#x27;</span>)).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">    <span class="title function_">expect</span>(screen.<span class="title function_">getByText</span>(<span class="string">&#x27;서울&#x27;</span>)).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">it</span>(<span class="string">&#x27;이미지가 올바르게 표시되어야 합니다&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">renderWithQueryClient</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">ReviewCard</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> image = screen.<span class="title function_">getByAltText</span>(<span class="string">&#x27;테스트 리뷰&#x27;</span>);</span><br><span class="line">    <span class="title function_">expect</span>(image).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="▫︎-비동기-데이터-처리의-안정성"><a href="#▫︎-비동기-데이터-처리의-안정성" class="headerlink" title="▫︎ 비동기 데이터 처리의 안정성"></a>▫︎ <strong>비동기 데이터 처리의 안정성</strong></h2><p>API 호출과 같은 비동기 작업이 많은 서비스 특성상, 데이터 로딩, 에러 상태 등 다양한 상황에 대한 테스트가 필요했습니다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">it</span>(<span class="string">&quot;로딩 중일 때 스켈레톤 UI를 표시한다&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  (useReview <span class="keyword">as</span> jest.<span class="property">Mock</span>).<span class="title function_">mockReturnValue</span>(&#123;</span><br><span class="line">    <span class="attr">isLoading</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; container &#125; = <span class="title function_">renderWithQueryClient</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">ReviewContents</span> /&gt;</span></span>);</span><br><span class="line">  <span class="comment">// 스켈레톤 UI의 특정 클래스명을 기준으로 요소를 찾습니다.</span></span><br><span class="line">  <span class="keyword">const</span> skeletonElements = container.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.skeleton-style&quot;</span>);</span><br><span class="line">  <span class="title function_">expect</span>(skeletonElements.<span class="property">length</span>).<span class="title function_">toBeGreaterThan</span>(<span class="number">0</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title function_">it</span>(<span class="string">&quot;리뷰 데이터가 있을 때 리뷰 카드가 렌더링된다&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  (useReview <span class="keyword">as</span> jest.<span class="property">Mock</span>).<span class="title function_">mockReturnValue</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="attr">pages</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">data</span>: &#123;</span><br><span class="line">            <span class="attr">content</span>: [</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">nickname</span>: <span class="string">&quot;사용자1&quot;</span>,</span><br><span class="line">                <span class="attr">profileImage</span>: <span class="string">&quot;https://example.com/profile1.jpg&quot;</span>,</span><br><span class="line">                <span class="attr">reviewImage</span>: <span class="string">&quot;https://example.com/review1.jpg&quot;</span>,</span><br><span class="line">                <span class="attr">title</span>: <span class="string">&quot;리뷰 제목 1&quot;</span>,</span><br><span class="line">                <span class="attr">content</span>: <span class="string">&quot;리뷰 내용 1&quot;</span>,</span><br><span class="line">                <span class="attr">starRating</span>: <span class="number">5</span>,</span><br><span class="line">                <span class="attr">travelLocation</span>: <span class="string">&quot;서울&quot;</span>,</span><br><span class="line">                <span class="attr">createdAt</span>: <span class="string">&quot;2023-10-01&quot;</span>,</span><br><span class="line">                <span class="attr">isLiked</span>: <span class="literal">true</span>,</span><br><span class="line">              &#125;,</span><br><span class="line">            ],</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">isLoading</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">isError</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">hasNextPage</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">fetchNextPage</span>: jest.<span class="title function_">fn</span>(),</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; getByText &#125; = <span class="title function_">renderWithQueryClient</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">ReviewContents</span> /&gt;</span></span>);</span><br><span class="line">  <span class="title function_">expect</span>(<span class="title function_">getByText</span>(<span class="string">&quot;리뷰 제목 1&quot;</span>)).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">  <span class="title function_">expect</span>(<span class="title function_">getByText</span>(<span class="string">&quot;리뷰 내용 1&quot;</span>)).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title function_">it</span>(<span class="string">&quot;리뷰 데이터가 없을 때 아무것도 렌더링하지 않는다&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  (useReview <span class="keyword">as</span> jest.<span class="property">Mock</span>).<span class="title function_">mockReturnValue</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="attr">pages</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">data</span>: &#123;</span><br><span class="line">            <span class="attr">content</span>: [],</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">isLoading</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">isError</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">hasNextPage</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">fetchNextPage</span>: jest.<span class="title function_">fn</span>(),</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; queryByText &#125; = <span class="title function_">renderWithQueryClient</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">ReviewContents</span> /&gt;</span></span>);</span><br><span class="line">  <span class="title function_">expect</span>(<span class="title function_">queryByText</span>(<span class="regexp">/리뷰 제목 1/i</span>)).<span class="property">not</span>.<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="▪︎-테스트-코드-작성-전략"><a href="#▪︎-테스트-코드-작성-전략" class="headerlink" title="▪︎ 테스트 코드 작성 전략"></a>▪︎ 테스트 코드 작성 전략</h1><h2 id="▫︎-테스트-시나리오-구성"><a href="#▫︎-테스트-시나리오-구성" class="headerlink" title="▫︎ 테스트 시나리오 구성"></a>▫︎ <strong>테스트 시나리오 구성</strong></h2><p>테스트 코드는 크게 세 가지 관점에서 작성했습니다.</p><h3 id="1-기본-렌더링-테스트"><a href="#1-기본-렌더링-테스트" class="headerlink" title="1. 기본 렌더링 테스트"></a>1. 기본 렌더링 테스트</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">describe</span>(<span class="string">&quot;ReviewComment&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">it</span>(<span class="string">&quot;리뷰 작성칸을 렌더링합니다&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">ReviewComment</span> /&gt;</span></span>);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">expect</span>(screen.<span class="title function_">getByText</span>(<span class="string">&quot;여행에 대한 후기를 남겨주세요!&quot;</span>)).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">    <span class="title function_">expect</span>(screen.<span class="title function_">getByLabelText</span>(<span class="string">&quot;최대 20자 입력 가능 textarea&quot;</span>)).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">    <span class="title function_">expect</span>(screen.<span class="title function_">getByPlaceholderText</span>(<span class="string">&quot;여행 제목을 입력해 주세요.&quot;</span>)).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">    <span class="title function_">expect</span>(screen.<span class="title function_">getByLabelText</span>(<span class="string">&quot;최대 100자 입력 가능 textarea&quot;</span>)).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">    <span class="title function_">expect</span>(screen.<span class="title function_">getByPlaceholderText</span>(<span class="string">&quot;여행에 대한 다양한 후기를 공유해 주세요!&quot;</span>)).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="2-사용자-인터렉션-테스트"><a href="#2-사용자-인터렉션-테스트" class="headerlink" title="2. 사용자 인터렉션 테스트"></a>2. 사용자 인터렉션 테스트</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">it</span>(<span class="string">&quot;페이지 버튼 클릭 시 paginate 함수가 호출된다&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> paginateMock = jest.<span class="title function_">fn</span>();</span><br><span class="line">  <span class="keyword">const</span> &#123; getByText &#125; = <span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Pagination</span> <span class="attr">totalPages</span>=<span class="string">&#123;4&#125;</span> <span class="attr">currentPage</span>=<span class="string">&#123;1&#125;</span> <span class="attr">paginate</span>=<span class="string">&#123;paginateMock&#125;</span> /&gt;</span></span>);</span><br><span class="line"></span><br><span class="line">  fireEvent.<span class="title function_">click</span>(<span class="title function_">getByText</span>(<span class="string">&quot;2&quot;</span>));</span><br><span class="line">  <span class="title function_">expect</span>(paginateMock).<span class="title function_">toHaveBeenCalledWith</span>(<span class="number">2</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="3-엣지-케이스-테스트"><a href="#3-엣지-케이스-테스트" class="headerlink" title="3. 엣지 케이스 테스트"></a>3. 엣지 케이스 테스트</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">it</span>(<span class="string">&quot;리뷰 데이터가 없을 때 빈 상태 메시지를 렌더링한다&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  (useMyReview <span class="keyword">as</span> jest.<span class="property">Mock</span>).<span class="title function_">mockReturnValue</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">content</span>: [],</span><br><span class="line">        <span class="attr">total</span>: <span class="number">0</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">renderWithProvider</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Written</span> /&gt;</span></span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">expect</span>(screen.<span class="title function_">getByText</span>(<span class="string">&quot;아직 작성한 리뷰가 없어요!&quot;</span>)).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="▫︎-비동기-테스트-처리"><a href="#▫︎-비동기-테스트-처리" class="headerlink" title="▫︎ 비동기 테스트 처리"></a>▫︎ <strong>비동기 테스트 처리</strong></h2><h3 id="1-로딩-상태-처리"><a href="#1-로딩-상태-처리" class="headerlink" title="1. 로딩 상태 처리"></a>1. <strong>로딩 상태 처리</strong></h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">it</span>(<span class="string">&quot;로딩 중일 때 스켈레톤 UI를 표시한다&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  (useReview <span class="keyword">as</span> jest.<span class="property">Mock</span>).<span class="title function_">mockReturnValue</span>(&#123;</span><br><span class="line">    <span class="attr">isLoading</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; container &#125; = <span class="title function_">renderWithQueryClient</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">ReviewContents</span> /&gt;</span></span>);</span><br><span class="line">  <span class="comment">// 스켈레톤 UI의 특정 클래스명을 기준으로 요소를 찾습니다.</span></span><br><span class="line">  <span class="keyword">const</span> skeletonElements = container.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.skeleton-style&quot;</span>);</span><br><span class="line">  <span class="title function_">expect</span>(skeletonElements.<span class="property">length</span>).<span class="title function_">toBeGreaterThan</span>(<span class="number">0</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="2-데이터-페칭-결과-처리"><a href="#2-데이터-페칭-결과-처리" class="headerlink" title="2. 데이터 페칭 결과 처리"></a>2. <strong>데이터 페칭 결과 처리</strong></h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">it</span>(<span class="string">&quot;여행 데이터가 있을 때 여행 카드가 렌더링된다&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  (usePastTravel <span class="keyword">as</span> jest.<span class="property">Mock</span>).<span class="title function_">mockReturnValue</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">content</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">travelId</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="attr">travelName</span>: <span class="string">&quot;과거 여행 1&quot;</span>,</span><br><span class="line">            <span class="attr">maxTravelMateCount</span>: <span class="number">5</span>,</span><br><span class="line">            <span class="attr">currentTravelMateCount</span>: <span class="number">2</span>,</span><br><span class="line">            <span class="attr">isDomestic</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">location</span>: <span class="string">&quot;서울&quot;</span>,</span><br><span class="line">            <span class="attr">image</span>: <span class="string">&quot;https://example.com/image.jpg&quot;</span>,</span><br><span class="line">            <span class="attr">startAt</span>: <span class="string">&quot;2023-10-01&quot;</span>,</span><br><span class="line">            <span class="attr">endAt</span>: <span class="string">&quot;2023-10-10&quot;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">total</span>: <span class="number">1</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; getByText &#125; = <span class="title function_">renderWithQueryClient</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">PastTravel</span> /&gt;</span></span>);</span><br><span class="line">  <span class="title function_">expect</span>(<span class="title function_">getByText</span>(<span class="regexp">/과거 여행 1/i</span>)).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="3-에러-상태-처리"><a href="#3-에러-상태-처리" class="headerlink" title="3. 에러 상태 처리"></a>3. 에러 상태 처리</h3><p>추가로 각 컴포넌트에서 발생할 수 있는 에러 상황을 고려하여 테스트케이스를 작성했습니다.</p><h2 id="▫︎-모킹-전략-활용"><a href="#▫︎-모킹-전략-활용" class="headerlink" title="▫︎ 모킹 전략 활용"></a>▫︎ 모킹 전략 활용</h2><p>외부 의존성이 있는 컴포넌트의 경우, 적절한 모킹을 통해 테스트의 안정성을 확보했습니다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">jest.<span class="title function_">mock</span>(<span class="string">&quot;next/navigation&quot;</span>, <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">useRouter</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">push</span>: jest.<span class="title function_">fn</span>(),</span><br><span class="line">    <span class="attr">replace</span>: jest.<span class="title function_">fn</span>(),</span><br><span class="line">    <span class="attr">back</span>: jest.<span class="title function_">fn</span>(),</span><br><span class="line">    <span class="comment">// 필요한 다른 router 메서드들...</span></span><br><span class="line">  &#125;),</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure><h1 id="▪︎-테스트-코드-작성-시-중점-사항"><a href="#▪︎-테스트-코드-작성-시-중점-사항" class="headerlink" title="▪︎ 테스트 코드 작성 시 중점 사항"></a>▪︎ <strong>테스트 코드 작성 시 중점 사항</strong></h1><h2 id="▫︎-테스트-가독성"><a href="#▫︎-테스트-가독성" class="headerlink" title="▫︎ 테스트 가독성"></a>▫︎ <strong>테스트 가독성</strong></h2><p>각 테스트 케이스의 의도가 명확히 드러나도록 작성했습니다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">it</span>(<span class="string">&#x27;기본적으로 &quot;myTravel&quot; 탭이 선택되어야 한다&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">renderWithQueryClient</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">MainTab</span> <span class="attr">selectedTab</span>=<span class="string">&quot;myTravel&quot;</span> <span class="attr">setSelectedTab</span>=<span class="string">&#123;setSelectedTabMock&#125;</span> <span class="attr">setSelectedSubTab</span>=<span class="string">&#123;setSelectedSubTabMock&#125;</span> /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="title function_">expect</span>(screen.<span class="title function_">getByText</span>(<span class="regexp">/나의 여행/i</span>)).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="▫︎-테스트-유지보수성"><a href="#▫︎-테스트-유지보수성" class="headerlink" title="▫︎ 테스트 유지보수성"></a>▫︎ <strong>테스트 유지보수성</strong></h2><p>반복되는 테스트 로직은 유틸리티 함수로 분리하여 재사용성을 높였습니다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">renderWithProvider</span> = (<span class="params">ui: React.ReactNode</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">QueryClientProvider</span> <span class="attr">client</span>=<span class="string">&#123;queryClient&#125;</span>&gt;</span>&#123;ui&#125;<span class="tag">&lt;/<span class="name">QueryClientProvider</span>&gt;</span></span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="▪︎-마치며"><a href="#▪︎-마치며" class="headerlink" title="▪︎ 마치며"></a>▪︎ 마치며</h1><p>테스트 코드 작성은 단순히 버그를 잡기 위한 도구가 아닌, 더 나은 설계를 위한 도구이자 문서의 역할도 수행했습니다. 특히 비동기 처리가 많은 현대 웹 애플리케이션에서 다양한 상황에 대한 테스트 케이스를 작성함으로써, 더 안정적인 서비스를 제공할 수 있었습니다.</p><p>앞으로도 테스트 커버리지를 높이고, 더 효율적인 테스트 전략을 발전시켜 나갈 예정입니다.</p>]]></content:encoded>
      
      
      <category domain="https://NamgungJongMin.github.io/categories/Project/">Project</category>
      
      
      <category domain="https://NamgungJongMin.github.io/tags/WEGO/">WEGO</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%ED%85%8C%EC%8A%A4%ED%8A%B8/">테스트</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%ED%85%8C%EC%8A%A4%ED%8A%B8%EC%BD%94%EB%93%9C/">테스트코드</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/">프로젝트</category>
      
      
      <comments>https://namgungjongmin.github.io/2025/01/08/project/wego/%ED%85%8C%EC%8A%A4%ED%8A%B8%EC%BD%94%EB%93%9C/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>MSW를 활용한 API 모킹과 개발 환경의 분리</title>
      <link>https://namgungjongmin.github.io/2025/01/01/project/wego/msw/</link>
      <guid>https://namgungjongmin.github.io/2025/01/01/project/wego/msw/</guid>
      <pubDate>Wed, 01 Jan 2025 11:22:51 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;▪︎-API-모킹-도입의-배경&quot;&gt;&lt;a h</description>
        
      
      
      
      <content:encoded><![CDATA[<p><img src="https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png"></p><h1 id="▪︎-API-모킹-도입의-배경"><a href="#▪︎-API-모킹-도입의-배경" class="headerlink" title="▪︎ API 모킹 도입의 배경"></a>▪︎ API 모킹 도입의 배경</h1><p>프론트엔드와 백엔드가 동시에 개발을 시작하는 프로젝트에서는 항상 한 가지 딜레마가 존재합니다. 프론트엔드 개발자는 백엔드 API가 완성되기 전까지 실제 데이터를 다루는 코드를 작성하기 어렵다는 점입니다.</p><p><img src="https://velog.velcdn.com/images/vbghdl/post/ce62df94-25c5-4137-b22c-8b7f17fde857/image.png" alt="image.png"></p><p>우리 프로젝트는 짧은 MVP 개발 기간이라는 제약 조건 속에서 이 문제를 해결해야 했습니다. 이를 위해 다음과 같은 접근 방식을 채택했습니다.</p><h2 id="▫︎-선행-API-명세-작성"><a href="#▫︎-선행-API-명세-작성" class="headerlink" title="▫︎ 선행 API 명세 작성"></a>▫︎ <strong>선행 API 명세 작성</strong></h2><ul><li>디자인 시안 분석을 통한 필요 API 도출</li><li>데이터 구조 및 엔드포인트 사전 정의</li><li>팀 간 API 명세서 공유 및 합의</li></ul><h2 id="▫︎-병렬-개발-전략"><a href="#▫︎-병렬-개발-전략" class="headerlink" title="▫︎ 병렬 개발 전략"></a>▫︎ <strong>병렬 개발 전략</strong></h2><ul><li>백엔드: API 명세에 따른 실제 구현</li><li>프론트엔드: 모킹된 API를 통한 선행 개발</li></ul><p><img src="https://velog.velcdn.com/images/vbghdl/post/73689267-243f-4f10-a2ff-c0f3c865df9d/image.png" alt="image.png"></p><p>우선 디자인 시안을 분석하여 우리 앱 개발에 필요한 API들을 분석하고 정리하여 API 명세서를 작성했습니다. 해당 문서를 통해 프론트엔드 - 백엔드 간 소통을 진행하였으며 이를 바탕으로 모킹된 API를 작성, API 관련 개발을 초기부터 진행할 수 있었습니다.</p><h1 id="▪︎-MSW란"><a href="#▪︎-MSW란" class="headerlink" title="▪︎ MSW란?"></a>▪︎ MSW란?</h1><p>MSW는 서비스 워커를 활용하여 네트워크 수준에서 API 요청을 가로채고 모의 응답을 제공하는 API 모킹 라이브러리입니다.</p><p><img src="https://velog.velcdn.com/images/vbghdl/post/36b8209b-caa9-42c7-94db-f1d7c89bf98a/image.png" alt="image.png"></p><p>출처: <a href="https://www.codit.eu/blog/how-to-mock-api-requests-in-front-end-development/">https://www.codit.eu/blog/how-to-mock-api-requests-in-front-end-development/</a></p><ol><li>브라우저에 Service Worker가 구성되어 있고, 실제 요청(Request)이 발생하면 Service Worker가 이를 가로챕니다.</li><li>Service Worker는 가로챈 요청(Request)을 복사하여 MSW로 전달합니다.</li><li>MSW는 가로챈 요청을 미리 정의된 모의 응답(Mock Response)과 매칭하는 작업을 수행합니다.</li><li>MSW는 모의 응답을 Service Worker에 전달합니다.</li><li>Service Worker는 모의 응답을 브라우저에 전달합니다.</li></ol><h2 id="▫︎-MSW의-주요-특징"><a href="#▫︎-MSW의-주요-특징" class="headerlink" title="▫︎ MSW의 주요 특징"></a>▫︎ MSW의 주요 특징</h2><ol><li><strong>네트워크 레벨 모킹</strong><ul><li>실제 네트워크 요청을 가로채서 처리</li><li>브라우저 네트워크 탭에서 요청 확인 가능</li><li>실제 API와 동일한 동작 방식</li></ul></li><li><strong>개발 환경 통합</strong><ul><li>별도의 서버 없이 모킹 환경 구축</li><li>실제 API로의 전환이 용이</li><li>테스트 코드와의 높은 호환성</li></ul></li></ol><h1 id="▪︎-MSW를-활용한-API-모킹"><a href="#▪︎-MSW를-활용한-API-모킹" class="headerlink" title="▪︎ MSW를 활용한 API 모킹"></a>▪︎ MSW를 활용한 API 모킹</h1><p>우리 프로젝트에 MSW를 적용하여 백엔드 개발 이전 모킹된 API를 통한 관련 코드 작성이 가능했습니다. 뿐만아니라 테스트 코드에서도 MSW를 활용하여 API 통신과 관련된 테스트도 진행하여 보다 안정된 코드 작성이 가능했습니다.</p><p>이는 프론트엔드 개발 생산성을 크게 증대시켰습니다. 실제 API와 모킹 API 연결 간 코드의 수정이 필요가 없었기 때문에 명세서 대로 작성하고 백엔드 개발 완료 이후에는 정상적으로 동작하는지 확인만 해주면 되었습니다.</p><p><img src="https://velog.velcdn.com/images/vbghdl/post/835a9bde-c2ab-4e32-907a-2b2bf683e8fb/image.png" alt="image.png"></p><h2 id="▫︎-핸들러-구현-예시-Auth"><a href="#▫︎-핸들러-구현-예시-Auth" class="headerlink" title="▫︎ 핸들러 구현 예시 (Auth)"></a>▫︎ 핸들러 구현 예시 (Auth)</h2><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> signup = [</span><br><span class="line">  <span class="comment">/* -------------------------------- 인증 이메일 전송 ------------------------------- */</span></span><br><span class="line">  http.<span class="property">post</span>&lt;<span class="title class_">MailSendRequestBody</span>, <span class="title class_">PathParams</span>&gt;(</span><br><span class="line">    <span class="string">`<span class="subst">$&#123;process.env.NEXT_PUBLIC_BASE_URL&#125;</span>/auth/sign-up/emails`</span>,</span><br><span class="line">    <span class="keyword">async</span> (&#123; request &#125;) =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; email &#125; = <span class="keyword">await</span> request.<span class="title function_">json</span>();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 이메일 중복 체크 실패 (이미 가입된 이메일)</span></span><br><span class="line">      <span class="keyword">if</span> (email === <span class="variable constant_">FAKE_USER_EMAIL</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">HttpResponse</span>.<span class="title function_">json</span>(</span><br><span class="line">          &#123; <span class="attr">message</span>: <span class="string">&#x27;Email already exists&#x27;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">status</span>: <span class="number">400</span> &#125;,</span><br><span class="line">        );</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 이메일 중복 체크 성공</span></span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">HttpResponse</span>.<span class="title function_">json</span>(</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&#x27;Email sent&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123; <span class="attr">status</span>: <span class="number">200</span> &#125;,</span><br><span class="line">      );</span><br><span class="line">    &#125;,</span><br><span class="line">  ),</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* ------------------------------- 이메일 인증코드 확인 ------------------------------ */</span></span><br><span class="line">  http.<span class="property">post</span>&lt;<span class="title class_">VerifyRequestBody</span>, <span class="title class_">PathParams</span>&gt;(</span><br><span class="line">    <span class="string">`<span class="subst">$&#123;process.env.NEXT_PUBLIC_BASE_URL&#125;</span>/auth/emails/verify`</span>,</span><br><span class="line">    <span class="keyword">async</span> (&#123; request &#125;) =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; verifyNumber &#125; = <span class="keyword">await</span> request.<span class="title function_">json</span>();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 이메일 인증코드 확인 실패</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="title class_">Number</span>(verifyNumber) !== <span class="variable constant_">FAKE_EMAIL_CODE</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">HttpResponse</span>.<span class="title function_">json</span>(</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">message</span>: <span class="string">&#x27;Invalid email code&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">status</span>: <span class="number">400</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        );</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 이메일 인증코드 확인 성공</span></span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">HttpResponse</span>.<span class="title function_">json</span>(</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&#x27;Email code verified&#x27;</span>,</span><br><span class="line">          <span class="attr">verifiedToken</span>: <span class="variable constant_">FAKE_VERIFIED_TOKEN</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123; <span class="attr">status</span>: <span class="number">200</span> &#125;,</span><br><span class="line">      );</span><br><span class="line">    &#125;,</span><br><span class="line">  ),</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* -------------------------------- 회원 가입 요청 -------------------------------- */</span></span><br><span class="line">  http.<span class="property">post</span>&lt;<span class="title class_">SignupRequestBody</span>, <span class="title class_">PathParams</span>&gt;(</span><br><span class="line">    <span class="string">`<span class="subst">$&#123;process.env.NEXT_PUBLIC_BASE_URL&#125;</span>/auth/sign-up`</span>,</span><br><span class="line">    <span class="keyword">async</span> (&#123; request &#125;) =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123;</span><br><span class="line">        email,</span><br><span class="line">        password,</span><br><span class="line">        name,</span><br><span class="line">        nickname,</span><br><span class="line">        birthDate,</span><br><span class="line">        contact,</span><br><span class="line">        verifiedToken,</span><br><span class="line">      &#125; = <span class="keyword">await</span> request.<span class="title function_">json</span>();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 회원 가입 성공</span></span><br><span class="line">      <span class="keyword">if</span> (</span><br><span class="line">        email &amp;&amp;</span><br><span class="line">        password &amp;&amp;</span><br><span class="line">        name &amp;&amp;</span><br><span class="line">        nickname &amp;&amp;</span><br><span class="line">        birthDate &amp;&amp;</span><br><span class="line">        contact &amp;&amp;</span><br><span class="line">        verifiedToken</span><br><span class="line">      ) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">HttpResponse</span>.<span class="title function_">json</span>(</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">message</span>: <span class="string">&#x27;Sign up successful&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line">            <span class="attr">headers</span>: &#123;</span><br><span class="line">              <span class="string">&#x27;Set-Cookie&#x27;</span>: <span class="string">&#x27;accessToken=msw-access, refreshToken=msw-refresh&#x27;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        );</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">HttpResponse</span>.<span class="title function_">json</span>(&#123; <span class="attr">message</span>: <span class="string">&#x27;Sign up failed&#x27;</span> &#125;, &#123; <span class="attr">status</span>: <span class="number">400</span> &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  ),</span><br></pre></td></tr></table></figure><ol><li><strong>실제 API 스펙 반영</strong><ul><li>동일한 엔드포인트 사용</li><li>일치하는 요청&#x2F;응답 구조</li><li>에러 케이스 시뮬레이션</li></ul></li><li><strong>상태 관리</strong><ul><li>모의 데이터베이스 구현</li><li>상태 변경 추적</li><li>실제 서버와 유사한 동작</li></ul></li></ol><h1 id="▪︎-개발-환경-분리"><a href="#▪︎-개발-환경-분리" class="headerlink" title="▪︎ 개발 환경 분리"></a>▪︎ 개발 환경 분리</h1><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cross-env NEXT_PUBLIC_MODE=production next dev -H front.we-go.world --experimental-https&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dev-mock&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cross-env NEXT_PUBLIC_MODE=mock next dev&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>개발을 진행하며 모킹된 API를 적용한 환경과 실제 API를 적용한 환경을 구별하여 개발 편의성을 늘렸습니다. npm dev-mock 명령어를 통해 우리가 작성한 모킹 API를 기반으로 한 테스트를 진행하고, 이후 npm run dev 명령어를 통해 실제 API 환경에서도 작성된 코드가 잘 동작하는지를 확인할 수 있었습니다.</p><p>백엔드 개발이 완료된다 하더라도 모킹 환경은 큰 이점이 있었습니다. 에러 케이스들을 확인해야 할 때 특히 유용하게 사용되었는데, 에러 상황을 띄우기 위해 브라우저에서 다른 동작을 해주지 않고 간단한 코드 수정만으로 해당 상황을 연출할 수 있었기 때문입니다.</p><h2 id="▫︎-환경별-동작-방식"><a href="#▫︎-환경별-동작-방식" class="headerlink" title="▫︎ 환경별 동작 방식"></a>▫︎ <strong>환경별 동작 방식</strong></h2><ol><li><strong>실제 API 환경 (npm run dev)</strong><ul><li>실제 백엔드 서버로 요청</li><li>프로덕션과 동일한 동작</li><li>실제 데이터로 테스트</li></ul></li><li><strong>모킹 환경 (npm run dev-mock)</strong><ul><li>MSW가 요청 가로챔</li><li>모의 응답 반환</li><li>빠른 개발 반복 가능</li></ul></li></ol><h2 id="▫︎-환경-분리의-이점"><a href="#▫︎-환경-분리의-이점" class="headerlink" title="▫︎ 환경 분리의 이점"></a>▫︎ <strong>환경 분리의 이점</strong></h2><ol><li><strong>개발 생산성 향상</strong><ul><li>백엔드 의존성 제거</li><li>빠른 프로토타이핑</li><li>병렬 개발 가능</li></ul></li><li><strong>코드 재사용성</strong><ul><li>API 관련 코드의 재사용</li><li>환경 전환 시 코드 수정 최소화</li><li>일관된 인터페이스 유지</li></ul></li><li><strong>유지보수 용이성</strong><ul><li>API 스펙 변경 시 한 곳만 수정</li><li>테스트 환경 구축 용이</li><li>디버깅 효율성 증가</li></ul></li></ol><h2 id="▫︎-실제-적용-효과"><a href="#▫︎-실제-적용-효과" class="headerlink" title="▫︎ 실제 적용 효과"></a>▫︎ <strong>실제 적용 효과</strong></h2><ol><li><strong>개발 프로세스 개선</strong><ul><li>API 명세 기반 선행 개발 가능</li><li>백엔드 개발 완료 전 기능 구현</li><li>빠른 피드백 루프 형성</li></ul></li><li><strong>코드 품질 향상</strong><ul><li>일관된 API 인터페이스 유지</li><li>엣지 케이스 테스트 용이</li><li>안정적인 개발 환경 제공</li></ul></li><li><strong>팀 협업 효율화</strong><ul><li>명확한 API 계약 정의</li><li>의사소통 비용 감소</li><li>병렬 작업 가능</li></ul></li></ol><h1 id="▪︎-마치며"><a href="#▪︎-마치며" class="headerlink" title="▪︎ 마치며"></a>▪︎ 마치며</h1><p>MSW를 활용한 API 모킹과 개발 환경 분리는 현대적인 웹 개발 프로세스에서 매우 효과적인 전략입니다. 특히 짧은 개발 기간 내에 프론트엔드와 백엔드가 동시에 개발을 진행해야 하는 상황에서, 이 접근 방식은 개발 생산성을 크게 향상시키고 코드 품질을 유지하는 데 도움이 되었습니다.</p><p>이러한 방식은 단순히 개발 편의성을 넘어서, 더 나은 소프트웨어 아키텍처와 개발 프로세스를 구축하는 데 기여했습니다. API 명세를 중심으로 한 개발 방식은 프론트엔드와 백엔드 간의 명확한 계약을 형성하며, 이는 장기적으로 프로젝트의 유지보수성과 확장성을 높이는 결과로 이어진다고 생각합니다.</p>]]></content:encoded>
      
      
      <category domain="https://NamgungJongMin.github.io/categories/Project/">Project</category>
      
      
      <category domain="https://NamgungJongMin.github.io/tags/WEGO/">WEGO</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/">프로젝트</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/MSW/">MSW</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/API-%EB%AA%A8%ED%82%B9/">API 모킹</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EA%B0%9C%EB%B0%9C%ED%99%98%EA%B2%BD-%EB%B6%84%EB%A6%AC/">개발환경 분리</category>
      
      
      <comments>https://namgungjongmin.github.io/2025/01/01/project/wego/msw/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>WEGO ) 개발 환경에 HTTPS 및 Custom Domain 설정하기</title>
      <link>https://namgungjongmin.github.io/2024/12/30/project/wego/https/</link>
      <guid>https://namgungjongmin.github.io/2024/12/30/project/wego/https/</guid>
      <pubDate>Mon, 30 Dec 2024 07:32:33 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Next.js 프론트엔드 </description>
        
      
      
      
      <content:encoded><![CDATA[<p><img src="https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png"></p><blockquote><p>Next.js 프론트엔드 개발 중 백엔드와의 쿠키 공유 이슈를 해결하기 위해 HTTPS 를 설정하게 되었습니다. <code>SameSite=None</code>, <code>Secure</code> 설정이 된 쿠키를 저장하기 위해서는 HTTPS 를 사용해야합니다.</p></blockquote><h1 id="▪︎-Window-에서-localhost를-HTTPS-로-설정하는-방법"><a href="#▪︎-Window-에서-localhost를-HTTPS-로-설정하는-방법" class="headerlink" title="▪︎ Window 에서 localhost를 HTTPS 로 설정하는 방법"></a>▪︎ Window 에서 localhost를 HTTPS 로 설정하는 방법</h1><p>1️⃣ <strong>Chocolatey 설치</strong></p><p>PowerShell을 관리자 권한으로 실행하여 다음 명령어를 입력합니다.</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Set-ExecutionPolicy</span> Bypass <span class="literal">-Scope</span> <span class="keyword">Process</span> <span class="literal">-Force</span>; [<span class="type">System.Net.ServicePointManager</span>]::SecurityProtocol = [<span class="type">System.Net.ServicePointManager</span>]::SecurityProtocol <span class="operator">-bor</span> <span class="number">3072</span>; <span class="built_in">iex</span> ((<span class="built_in">New-Object</span> System.Net.WebClient).DownloadString(<span class="string">&#x27;https://community.chocolatey.org/install.ps1&#x27;</span>))</span><br></pre></td></tr></table></figure><p>2️⃣ <strong>mkcert 설치</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">choco install mkcert</span><br></pre></td></tr></table></figure><p>3️⃣ <strong>Local CA 설치</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkcert <span class="literal">-install</span></span><br></pre></td></tr></table></figure><p>4️⃣ <strong>localhost 인증서 생성</strong></p><p>프로젝트 루트로 이동하여 다음 명령어를 입력합니다.</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkcert localhost</span><br></pre></td></tr></table></figure><p>위 단계를 정상적으로 마쳤다면 <code>localhost.pem</code> 과 <code>localhost-key.pem</code> 파일이 생성됩니다.</p><p>여기서 생성된 인증서의 개인키는 절대 공유되어서는 안되며 프로젝트의 모든 팀원들이 각자의 시스템에 개별적으로 설치하여야 합니다.</p><p>5️⃣ <strong>Github 에 공유되는 것을 막기 위해 .gitignore 파일에 다음 텍스트를 추가</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SSL Certificate</span></span><br><span class="line">*.pem</span><br><span class="line">*.key</span><br><span class="line">*.crt</span><br><span class="line">*.cert</span><br></pre></td></tr></table></figure><p>6️⃣ <strong>package.json 의 script에 개발 환경 테스트 명령어를 수정</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;next dev -H [개발 도메인 주소] --experimental-https&quot;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><h1 id="▪︎-호스트에-Custom-Domain을-설정하는-방법"><a href="#▪︎-호스트에-Custom-Domain을-설정하는-방법" class="headerlink" title="▪︎ 호스트에 Custom Domain을 설정하는 방법"></a>▪︎ 호스트에 Custom Domain을 설정하는 방법</h1><blockquote><p>호스트 파일을 수정하여 <code>Custom Domain</code>을 설정하면 개발 환경에서 <code>localhost</code> 대신 지정한 도메인을 사용하여 애플리케이션에 접근할 수 있습니다. 이를 통해 프론트엔드와 백엔드가 동일한 베이스 도메인 하에서 동작하게 되어 쿠키 설정 시 도메인 불일치 문제를 해결할 수 있습니다.</p></blockquote><p>1️⃣ <strong>&#x2F;etc&#x2F;hosts 파일을 수정</strong></p><p>호스트 파일을 수정함으로써 특정 도메인을 localhost (127.0.0.1)로 매핑할 수 있습니다.</p><ol><li>vscode와 같은 에디터를 관리자 권한으로 실행합니다.</li><li>open file 클릭 후 ****<code>C:\Windows\System32\drivers\etc</code> ****경로에서 hosts 파일을 실행합니다.</li><li>코드 맨 아래에 <strong>127.0.0.1 front.we-go.world</strong> 를 추가합니다.</li></ol><p><img src="https://velog.velcdn.com/images/vbghdl/post/a458a16b-795b-4cbc-9cfc-0be69f50d912/image.png" alt="image.png"></p><p>2️⃣ <strong>package.json 파일의 script의 dev 명령어에서 도메인을 수정</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;next dev -H front.we-go.world --experimental-https&quot;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><h3 id="확인"><a href="#확인" class="headerlink" title="확인"></a>확인</h3><p><img src="https://velog.velcdn.com/images/vbghdl/post/a7cce7c5-fc0a-43c2-8c4c-69c46b32c1c1/image.png" alt="image.png"></p><p>실행 시 다음과 같이 설정한 도메인의 개발 환경에서 테스트를 할 수 있다.</p>]]></content:encoded>
      
      
      <category domain="https://NamgungJongMin.github.io/categories/Project/">Project</category>
      
      
      <category domain="https://NamgungJongMin.github.io/tags/WEGO/">WEGO</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/">프로젝트</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/HTTPS/">HTTPS</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EC%BB%A4%EC%8A%A4%ED%85%80-%EB%8F%84%EB%A9%94%EC%9D%B8/">커스텀 도메인</category>
      
      
      <comments>https://namgungjongmin.github.io/2024/12/30/project/wego/https/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>WEGO ) 프론트의 개발환경에서 현재 배포된 백엔드 서버의 쿠키 공유가 불가능한 이슈</title>
      <link>https://namgungjongmin.github.io/2024/12/29/project/wego/cookie/</link>
      <guid>https://namgungjongmin.github.io/2024/12/29/project/wego/cookie/</guid>
      <pubDate>Sun, 29 Dec 2024 02:12:53 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;▪︎-백엔드-서버와의-쿠키-공유&quot;&gt;&lt;a </description>
        
      
      
      
      <content:encoded><![CDATA[<p><img src="https://velog.velcdn.com/images/vbghdl/post/921dd816-acad-468d-b160-8e912a3d9f5f/image.png"></p><h1 id="▪︎-백엔드-서버와의-쿠키-공유"><a href="#▪︎-백엔드-서버와의-쿠키-공유" class="headerlink" title="▪︎ 백엔드 서버와의 쿠키 공유"></a>▪︎ 백엔드 서버와의 쿠키 공유</h1><h2 id="▫︎-개발-환경에서-Set-Cookie로-받은-쿠키가-사라진다"><a href="#▫︎-개발-환경에서-Set-Cookie로-받은-쿠키가-사라진다" class="headerlink" title="▫︎ 개발 환경에서 Set-Cookie로 받은 쿠키가 사라진다?"></a>▫︎ 개발 환경에서 Set-Cookie로 받은 쿠키가 사라진다?</h2><p>우리 프로젝트에서는 로그인을 하면 서버에서 <code>Set-Cookie</code>를 통해 인증 토큰을 심어주고, 이후 인증이 필요한 요청 (로그인이 필요한 요청) 시 서버에서 프론트 요청의 쿠키를 읽어 인증 여부를 검증하고 그에 따른 응답을 반환하도록 설계되어있다.</p><p>배포 환경에서는 해당 로직이 잘 동작하였으나 개발 환경에서 받아온 쿠키가 계속해서 사라지는 현상이 일어났다.</p><p><img src="https://velog.velcdn.com/images/vbghdl/post/ec9762b5-d607-4581-8570-ac1caf60161c/image.png" alt="image.png"></p><h2 id="▫︎-문제-찾아보기"><a href="#▫︎-문제-찾아보기" class="headerlink" title="▫︎ 문제 찾아보기"></a>▫︎ 문제 찾아보기</h2><p><strong>1️⃣ cors 설정이 제대로 안되어있는 것은 아닐까?</strong></p><p>우선 백엔드 측에 <code>cors</code> 설정이 되어있는지를 확인해보았다. 백엔드 측에서는 개발환경과 배포환경에 대해 조건부로 잘 설정해주었다고 답변받았다. 혹시 실수가 있었던 것은 아닐까? next.js 의 <code>rewrites</code> 기능을 이용하여 프록시를 통해 <code>cors</code>를 우회하여 테스트를 해보았다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// next.config.ts</span></span><br><span class="line">  <span class="attr">rewrites</span>: <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">source</span>: <span class="string">&#x27;/api/:path*&#x27;</span>,</span><br><span class="line">        <span class="attr">destination</span>: <span class="string">`<span class="subst">$&#123;process.env.NEXT_PUBLIC_BASE_URL&#125;</span>/:path*`</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ];</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p><strong>$ 여전히 쿠키는 사라진다. <code>cors</code> 문제는 아니다.</strong></p><hr><p><strong>2️⃣ SameSite 를 None 으로 설정하면 해결되지 않을까? ( + Secure )</strong></p><p>크로스 사이트 요청 시 쿠키 전송을 허가하는 설정인 <code>SameSite=None</code> 을 쿠키에 설정해주면 어떨까? 우선 <code>SameSite</code>를 설정하기 위해서는 Secure 설정또한 추가로 해줘야 한다.</p><p><img src="https://velog.velcdn.com/images/vbghdl/post/3469abc1-95f6-4dc7-a642-3165ec5b4b9c/image.png" alt="image.png"></p><p><strong>$ 해당 설정을 해주어도 동일한 현상이 일어났다.</strong></p><hr><p><strong>3️⃣ HTTP 의 문제</strong></p><p>문제 해결을 위해 쿠키의 각 속성에 대한 정보를 찾아보았다. <code>Secure</code> 설정을 위해서는 반드시 <code>HTTPS</code> 요청이 필요하다. <code>HTTP</code>와 <code>HTTPS</code> 간의 scheme 차이 때문에 발생하는 문제였다는 것을 찾아냈다.</p><p>정리해보자면 <code>SameSite=None</code>을 사용하기 위해서는 반드시 <code>Secure</code> 플래그가 필요하고, 이를 위해서는 다시 <code>HTTPS</code>가 필요하다.</p><p><code>mkcert</code> 로 로컬 인증서를 생성하고 <code>pakage.json</code>의 script에서 “dev” 명령어에 <code>—experimental-https</code> 옵션을 사용하여 <strong><a href="https://localhost:3000/">https://localhost:3000</a></strong> 에서 요청을 보내보았다.</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// package.json</span><br><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;next dev -H localhost --experimental-https&quot;</span>,</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p><strong>$ https 설정을 하여 SameSite&#x3D;None, Secure 설정을 해줘도 쿠키는 사라졌다.</strong></p><hr><p><strong>4️⃣ 크로스 도메인 문제인 것 같다. 쿠키를 구워줄 때, 개발환경에서의 요청이라면 Domain 값을</strong></p><pre><code>    **localhost로 설정하면 되지 않을까?**</code></pre><p>마지막으로 살펴볼만한 문제는 쿠키의 <code>Domain</code> 속성이다. 쿠키의 도메인은 .<a href="http://we-go.world/">we-go.world</a> 로 되어있다. 배포 주소가 <strong>we-go.world</strong> 이기 때문에 배포 사이트에서는 정상적으로 동작하고, <code>localhost</code> 인 개발환경에서는 정상적으로 동작하지 않는 것이 아닐까?</p><p>백엔드와 상황을 공유하니 백엔드에서 요청한 클라이언트의 <code>Origin</code>을 읽어 그에 따라 조건부로 <code>Domain</code>을 설정해주기로 했다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CookieProvider</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;cookie.domain&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String domain;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;security.jwt.token.expire-length&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String accessTokenExpire;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ResponseCookie <span class="title function_">accessTokenCookie</span><span class="params">(String accessToken, HttpServletRequest request)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">origin</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;Origin&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">referer</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;Referer&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">isLocalhost</span> <span class="operator">=</span> (origin != <span class="literal">null</span> &amp;&amp; (origin.contains(<span class="string">&quot;localhost&quot;</span>) || origin.contains(<span class="string">&quot;127.0.0.1&quot;</span>)))</span><br><span class="line">            || (referer != <span class="literal">null</span> &amp;&amp; (referer.contains(<span class="string">&quot;localhost&quot;</span>) || referer.contains(<span class="string">&quot;127.0.0.1&quot;</span>)));</span><br><span class="line"></span><br><span class="line">        ResponseCookie.<span class="type">ResponseCookieBuilder</span> <span class="variable">cookieBuilder</span> <span class="operator">=</span> ResponseCookie.from(<span class="string">&quot;accessToken&quot;</span>, accessToken)</span><br><span class="line">            .httpOnly(<span class="literal">true</span>)</span><br><span class="line">            .secure(<span class="literal">true</span>)</span><br><span class="line">            .path(<span class="string">&quot;/&quot;</span>)</span><br><span class="line">            .maxAge(Duration.ofSeconds(Long.parseLong(accessTokenExpire)))</span><br><span class="line">            .sameSite(<span class="string">&quot;None&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!isLocalhost) &#123;</span><br><span class="line">            cookieBuilder.domain(domain);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> cookieBuilder.build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>그러나 동일하게 쿠키의 <code>Domain</code> 부분에는 <strong>.we-go.world</strong> 가 설정되어있다.</p><p><img src="https://velog.velcdn.com/images/vbghdl/post/d48f76de-7a87-4f59-9045-ebf3e5e1d434/image.png" alt="image.png"></p><hr><p>5️⃣ <strong>서버는 자신의 도메인이 아닌 다른 도메인에 쿠키를 설정할 수 없다.</strong></p><p>api 요청 시 백엔드도 <code>localhost</code> 에서 실행되었을 때에는 쿠키가 정상적으로 설정되었겠지만, 우리는 지금 배포된 백엔드에 테스트를 하려고 했다. 그래서 <code>Domain</code>이 우리가 의도한 대로 설정되지 않았다.</p><hr><p>6️⃣ <strong>로컬 호스트 환경에서도 도메인 일치를 위해 Custom Domain을 설정하자.</strong></p><p>프론트의 로컬 호스트 환경에서 <code>Custom Domain</code>을 설정하여 프론트와 백엔드가 동일한 베이스 도메인 하에서 테스트할 수 있다면 해결되지 않을까?</p><p><strong>&#x2F;etc&#x2F;hosts</strong> 파일을 수정하여 <code>localhost</code> 도메인을 <strong>front.we-go.world</strong>로 설정하고, 추가로 개발 모드 실행에서 도메인을 명시해주었다.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line">...</span><br><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;next dev -H front.we-go.world --experimental-https&quot;</span>,</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p><img src="https://velog.velcdn.com/images/vbghdl/post/3036a22c-0aa9-4619-96fa-24f8e22cc4d5/image.png" alt="image.png"></p><h1 id="▪︎-정리"><a href="#▪︎-정리" class="headerlink" title="▪︎ 정리"></a>▪︎ 정리</h1><p>프론트와 백엔드 간의 쿠키 공유를 위해서는 서로의 베이스 도메인을 일치시켜야한다. 또한 서로가 동일한 도메인이 아닌 경우, 쿠키의 <code>SameSite=None</code> 과 <code>Secure</code> 설정이 필요하며 이를 위해서는 프론트의 개발 환경에서 <code>HTTPS</code> 를 사용해야만 한다.</p><p><a href="https://namgungjongmin.github.io/2024/12/30/project/wego/https/">포스팅: 개발 환경에 HTTPS 및 Custom Domain 설정하기</a></p>]]></content:encoded>
      
      
      <category domain="https://NamgungJongMin.github.io/categories/Project/">Project</category>
      
      
      <category domain="https://NamgungJongMin.github.io/tags/WEGO/">WEGO</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/">프로젝트</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EC%BF%A0%ED%82%A4-%EA%B3%B5%EC%9C%A0/">쿠키 공유</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/SameSite/">SameSite</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EB%8F%84%EB%A9%94%EC%9D%B8/">도메인</category>
      
      
      <comments>https://namgungjongmin.github.io/2024/12/29/project/wego/cookie/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>KMP 알고리즘 ) 문자열에서 특정한 문자열을 찾는 것을 O(N)으로 해결하기</title>
      <link>https://namgungjongmin.github.io/2024/04/16/algorithm/kmp/</link>
      <guid>https://namgungjongmin.github.io/2024/04/16/algorithm/kmp/</guid>
      <pubDate>Tue, 16 Apr 2024 07:25:46 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/vbghdl/post/e0ccaaba-5d36-47b1-b7ec-e658aad36afe/image.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;부분문자열-찾기&quot;&gt;&lt;a href=&quot;#부분</description>
        
      
      
      
      <content:encoded><![CDATA[<p><img src="https://velog.velcdn.com/images/vbghdl/post/e0ccaaba-5d36-47b1-b7ec-e658aad36afe/image.png"></p><h1 id="부분문자열-찾기"><a href="#부분문자열-찾기" class="headerlink" title="부분문자열 찾기"></a>부분문자열 찾기</h1><p><img src="https://velog.velcdn.com/images/vbghdl/post/b197faaf-f92e-4f97-bdfa-c09bb9bbe970/image.png" alt="image.png"></p><blockquote><p>위 이미지와 같은 문제에서 어떠한 문자열 내에서 특정한 다른 문자열을 찾을 때 가장 단순한 방법은 두 문자열의 각 문자들을 비교하는 것입니다. 그러나 이 경우 각 문자열의 모든 문자들을 매칭하여 탐색해야하기 때문에 효율성이 낮습니다. 따라서 대상 문자열의 크기가 크거나 효율성을 높이고 싶다면 KMP 알고리즘을 고려해볼 수 있습니다. 위 사진을 예시로하여 문자열을 찾는 두가지 방법에 대해 밑에서 알아보겠습니다.</p></blockquote><h1 id="▪︎-두-문자열의-각-문자-비교"><a href="#▪︎-두-문자열의-각-문자-비교" class="headerlink" title="▪︎ 두 문자열의 각 문자 비교"></a>▪︎ 두 문자열의 각 문자 비교</h1><p>str을 기준으로 각 문자를 순회하되 해당 문자가 subStr의 첫 문자와 같다면 그 다음 문자들을 비교하는 방식으로 이루어집니다. 이 경우 str을 순회하는 start 포인터와 str과 subStr의 일치여부 확인을 위한 위치 포인터가 필요하기 때문에 O(NM)의 시간복잡도를 가집니다.</p><p><img src="https://velog.velcdn.com/images/vbghdl/post/9cf5f140-18fa-46f1-be7a-67fbc4c0888f/image.png" alt="image.png"></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">&quot;ABCABCABBD&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> subStr = <span class="string">&quot;ABCABB&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> answerIdx = [];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; str.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">let</span> isMatched = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; subStr.<span class="property">length</span>; j++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (str[i + j] !== subStr[j]) &#123;</span><br><span class="line">      isMatched = <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (isMatched) answerIdx.<span class="title function_">push</span>(i + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(answerIdx); <span class="comment">// output: [4] 4번째 문자로 시작하는 하나의 같은 문자열이 존재</span></span><br></pre></td></tr></table></figure><h1 id="▪︎-KMP-알고리즘"><a href="#▪︎-KMP-알고리즘" class="headerlink" title="▪︎ KMP 알고리즘"></a>▪︎ KMP 알고리즘</h1><p>위 방법을 개선하여 효율성 높게 문자열을 찾는 방법이 KMP 알고리즘입니다. KMP 알고리즘은 무려 O(N+M)의 시간복잡도로 해결이 가능합니다. 어떻게 그것이 가능할까요? 문자열들의 각 문자들을 비교하는 방법에서는 버려지는 정보들을 활용하기 때문입니다. 위의 예시를 다시 가져와보겠습니다.</p><p><img src="https://velog.velcdn.com/images/vbghdl/post/48c12352-403e-4c82-87ad-0b78085edc8e/image.png" alt="image.png"></p><p>두 문자열을 비교하던 중 매칭이되지 않은 문자들을 만났습니다. 이 때 우리는 ABCABC가 ABCABB가 아니라는 것을 확인함과 동시에 ABCABB의 앞쪽 문자들과 매칭되는 부분(index 3 ~ 4)이 있다는 정보를 얻게되었습니다. 이 정보를 활용하면 str문자열의 각 문자를 시작으로 하는 문자열을 전부 확인하는 것이 아니라 subStr의 앞쪽 부분과 매칭되는 index 3에서부터 다시 비교를 시작할 수 있습니다.</p><p>이 원리를 이용하면 str을 이중 순회하는 것이 아닌 한번의 순회만으로 문자열을 찾아낼 수 있습니다. subStr을 문자열의 접두사이면서 접미사인 부분 문자열들에 대한 정보와 매칭하고 그 정보를 이용하여 str의 문자를 순회하는 동안 subStr의 포인터를 이동시켜 같은 문자열인지를 판단합니다.</p><p>KMP 알고리즘은 다음 단계를 통해 구현할 수 있습니다.</p><ol><li>subStr의 접두사,접미사 관련 정보를 담은 pi를 생성합니다.</li><li>str을 순회하며 각 문자열의 pointer 이동합니다.</li><li>subStr의 포인터가 끝으로 이동했을 때에 문자끼리 같다면 동일 문자열입니다.</li></ol><h2 id="▫︎-failure-함수를-통해-pi-배열-생성"><a href="#▫︎-failure-함수를-통해-pi-배열-생성" class="headerlink" title="▫︎ failure 함수를 통해 pi 배열 생성"></a>▫︎ failure 함수를 통해 pi 배열 생성</h2><p><img src="https://velog.velcdn.com/images/vbghdl/post/703259a6-44a5-46a1-bb38-1287d68adcfa/image.png" alt="image.png"></p><p>pi 배열은 subStr의 접두사와 접미사를 확인하여 같은 길이를 값으로 가지는 배열입니다. pi의 index 0은 0으로 시작하며 이후부터는 해당 인덱스까지의 부분문자열의 접두사와 접미사가 같은 길이를 값으로 가집니다. <strong>pi 배열은 failure함수를 통해 만들 수 있습니다.</strong></p><p>“ABCA”의 경우 앞 뒤 “A”가 같기 때문에 1을 값으로 가집니다.</p><p>“ABCAB”의 경우 앞 뒤 “AB”가 같기 때문에 2를 값으로 가집니다.</p><h3 id="failure-함수의-동작"><a href="#failure-함수의-동작" class="headerlink" title="failure 함수의 동작"></a>failure 함수의 동작</h3><ol><li>첫 인덱스 값을 0으로하는 subStr 길이와 같은 배열을 생성합니다.</li><li>새로운 포인터 k를 선언하고 subStr을 순회하면서 다음 동작을 반복합니다.<ul><li>subStr[k]와 subStr[i]가 같은 경우 pi[i]에 k+1을 저장하고 k와 i 인덱스를 모두 증가시킵니다.</li><li>다를경우 k에 pi[k-1] 위치에 있는 값을 재할당합니다. (이 동작을 subStr[k]와 subStr[i]가 같아지거나 k가 0이 될 때까지 반복합니다) 이후 i 인덱스만 증가시킵니다.</li></ul></li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> subStr = <span class="string">&quot;ABCABB&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> pi = <span class="title class_">Array</span>(subStr.<span class="property">length</span>).<span class="title function_">fill</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> k = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; subStr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">while</span> (k &gt; <span class="number">0</span> &amp;&amp; subStr[k] !== subStr[i]) &#123;</span><br><span class="line">    k = pi[k - <span class="number">1</span>];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (subStr[k] === subStr[i]) &#123;</span><br><span class="line">    pi[i] = k + <span class="number">1</span>;</span><br><span class="line">    k++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(pi); <span class="comment">// [0,0,0,1,2,0]</span></span><br></pre></td></tr></table></figure><h2 id="▫︎-pi배열과-두-문자열을-이용해-문자열-찾기"><a href="#▫︎-pi배열과-두-문자열을-이용해-문자열-찾기" class="headerlink" title="▫︎ pi배열과 두 문자열을 이용해 문자열 찾기"></a>▫︎ pi배열과 두 문자열을 이용해 문자열 찾기</h2><p>이제 pi 배열을 이용해서 문자열을 찾아보겠습니다. str과 subStr의 각 포인터들을 이동시키면서 str을 순회합니다. 아래 그림과 같은 방식으로 동작합니다.</p><p><img src="https://velog.velcdn.com/images/vbghdl/post/231216cb-a99e-4582-bab3-f4550e5f5bd6/image.png" alt="image.png"></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">&quot;ABCABCABBD&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> subStr = <span class="string">&quot;ABCABB&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> pi = <span class="title class_">Array</span>(subStr.<span class="property">length</span>).<span class="title function_">fill</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// failure 함수를 통해 pi 배열 설정</span></span><br><span class="line"><span class="keyword">let</span> k = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; subStr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">while</span> (k &gt; <span class="number">0</span> &amp;&amp; subStr[k] !== subStr[i]) &#123;</span><br><span class="line">    k = pi[k - <span class="number">1</span>];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (subStr[k] === subStr[i]) &#123;</span><br><span class="line">    pi[i] = k + <span class="number">1</span>;</span><br><span class="line">    k++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// pi 배열을 이용해 문자열 찾기</span></span><br><span class="line"><span class="keyword">let</span> j = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> answerIdx = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; str.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">while</span> (j &gt; <span class="number">0</span> &amp;&amp; subStr[j] !== str[i]) &#123;</span><br><span class="line">    j = pi[j - <span class="number">1</span>];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (subStr[j] === str[i]) &#123;</span><br><span class="line">    <span class="keyword">if</span> (j === subStr.<span class="property">length</span> - <span class="number">1</span>) &#123;</span><br><span class="line">      answerIdx.<span class="title function_">push</span>(i - subStr.<span class="property">length</span> + <span class="number">2</span>);</span><br><span class="line">      j = pi[j];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      j++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(answerIdx); <span class="comment">// output: [4] 4번째 문자로 시작하는 하나의 같은 문자열이 존재</span></span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="https://NamgungJongMin.github.io/categories/Algorithm/">Algorithm</category>
      
      
      <category domain="https://NamgungJongMin.github.io/tags/JavaScript/">JavaScript</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/">알고리즘</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/KMP/">KMP</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EB%AC%B8%EC%9E%90%EC%97%B4-%EC%B0%BE%EA%B8%B0/">문자열 찾기</category>
      
      
      <comments>https://namgungjongmin.github.io/2024/04/16/algorithm/kmp/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>에라토스테네스의 체 ) 범위 내 소수 구하기</title>
      <link>https://namgungjongmin.github.io/2024/04/08/algorithm/%EC%97%90%EB%9D%BC%ED%86%A0%EC%8A%A4%ED%85%8C%EB%84%A4%EC%8A%A4%EC%9D%98%EC%B2%B4/</link>
      <guid>https://namgungjongmin.github.io/2024/04/08/algorithm/%EC%97%90%EB%9D%BC%ED%86%A0%EC%8A%A4%ED%85%8C%EB%84%A4%EC%8A%A4%EC%9D%98%EC%B2%B4/</guid>
      <pubDate>Mon, 08 Apr 2024 02:15:21 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/vbghdl/post/e0ccaaba-5d36-47b1-b7ec-e658aad36afe/image.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;▪︎-에라토스테네스의-체&quot;&gt;&lt;a href</description>
        
      
      
      
      <content:encoded><![CDATA[<p><img src="https://velog.velcdn.com/images/vbghdl/post/e0ccaaba-5d36-47b1-b7ec-e658aad36afe/image.png"></p><h1 id="▪︎-에라토스테네스의-체"><a href="#▪︎-에라토스테네스의-체" class="headerlink" title="▪︎ 에라토스테네스의 체"></a>▪︎ 에라토스테네스의 체</h1><p>에라토스테네스의 체는 빠르게 범위 내 소수들을 찾는 방법입니다. 하나의 수에 대해 소수인지 아닌지를 판별하는 것은 O(N)으로 해결이 가능하지만 범위 내에서 소수들을 찾기 위해서는 추가로 범위 내에 존재하는 K개의 수가 곱해진 O(N*K)의 시간복잡도를 가질 것입니다. 그러나 에라토스테네스의 체를 이용하면 O(N * log logN)의 시간복잡도로 이를 해결할 수 있습니다.</p><h2 id="▫︎-에라토스테네스의-체-원리"><a href="#▫︎-에라토스테네스의-체-원리" class="headerlink" title="▫︎ 에라토스테네스의 체 원리"></a>▫︎ 에라토스테네스의 체 원리</h2><p><img src="https://upload.wikimedia.org/wikipedia/commons/b/b9/Sieve_of_Eratosthenes_animation.gif" alt="gif"></p><ul><li><strong>_출처 : <a href="https://ko.wikipedia.org/wiki/%EC%97%90%EB%9D%BC%ED%86%A0%EC%8A%A4%ED%85%8C%EB%84%A4%EC%8A%A4%EC%9D%98_%EC%B2%B4">https://ko.wikipedia.org/wiki/에라토스테네스의_체</a>_</strong></li></ul><p>step 1) 2부터 소수를 구하고자 하는 구간의 모든 수를 나열한다. 그림에서 회색 사각형으로 두른 수들이 여기에 해당한다.</p><p>step 2) 2는 소수이므로 오른쪽에 2를 쓴다. (빨간색)</p><p>step 3) 자기 자신을 제외한 2의 배수를 모두 지운다.</p><p>step 4) 남아있는 수 가운데 3은 소수이므로 오른쪽에 3을 쓴다. (초록색)</p><p>step 5) 자기 자신을 제외한 3의 배수를 모두 지운다.</p><p>step 6) 남아있는 수 가운데 5는 소수이므로 오른쪽에 5를 쓴다. (파란색)</p><p>step 7) 자기 자신을 제외한 5의 배수를 모두 지운다.</p><p>step 8) 남아있는 수 가운데 7은 소수이므로 오른쪽에 7을 쓴다. (노란색)</p><p>step 9) 자기 자신을 제외한 7의 배수를 모두 지운다.</p><p>step 10) 위의 과정을 반복하면 구하는 구간의 모든 소수가 남는다. (보라색)</p><blockquote><p>범위 최대값의 제곱근보다 작거나 같은 자연수의 배수들만 지우면 된다. 위 예시의 경우 10까지만 배수들을 지워주는 동작을 시행한다.</p></blockquote><h2 id="▫︎-에라토스테네스의-체-구현"><a href="#▫︎-에라토스테네스의-체-구현" class="headerlink" title="▫︎ 에라토스테네스의 체 구현"></a>▫︎ 에라토스테네스의 체 구현</h2><ol><li>2부터 소수를 구하고자하는 구간의 모든 수를 배열의 인덱스를 key로 삼아 0과 1을 제외하고 모두 true로 초기화합니다.</li><li>생성한 배열을 순회하면서 value가 false인 경우 스킵하고, true인 경우 배열 내 해당 index의 배수에 위치하는 모든 값들을 false로 재할당합니다.</li><li>초기 생성한 배열에서 true를 값으로 가진 인덱스들이 소수입니다.</li></ol><h1 id="▪︎-Example-of-Apply"><a href="#▪︎-Example-of-Apply" class="headerlink" title="▪︎ Example of Apply"></a>▪︎ Example of Apply</h1><h2 id="▫︎-100보다-작은-소수-찾기"><a href="#▫︎-100보다-작은-소수-찾기" class="headerlink" title="▫︎ 100보다 작은 소수 찾기"></a>▫︎ 100보다 작은 소수 찾기</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 소수 체크 테이블</span></span><br><span class="line"><span class="keyword">const</span> check = <span class="title class_">Array</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="number">101</span>)).<span class="title function_">fill</span>(<span class="literal">true</span>).<span class="title function_">fill</span>(<span class="literal">false</span>, <span class="number">0</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 100의 제곱근인 10보다 작은 자연수의 배수들만 지우기</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">2</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!check[i]) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> j = i * <span class="number">2</span>; j &lt;= <span class="number">100</span>; j += i) &#123;</span><br><span class="line">    check[j] = <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 소수 배열</span></span><br><span class="line"><span class="keyword">const</span> prime = [];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 체크 테이블의 값이 true인 index가 소수</span></span><br><span class="line">check.<span class="title function_">forEach</span>(<span class="function">(<span class="params">el, idx</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (el) prime.<span class="title function_">push</span>(idx);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(prime);</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="https://NamgungJongMin.github.io/categories/Algorithm/">Algorithm</category>
      
      
      <category domain="https://NamgungJongMin.github.io/tags/JavaScript/">JavaScript</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/">알고리즘</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EC%97%90%EB%9D%BC%ED%86%A0%EC%8A%A4%ED%85%8C%EB%84%A4%EC%8A%A4%EC%9D%98-%EC%B2%B4/">에라토스테네스의 체</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EC%86%8C%EC%88%98-%EC%B0%BE%EA%B8%B0/">소수 찾기</category>
      
      
      <comments>https://namgungjongmin.github.io/2024/04/08/algorithm/%EC%97%90%EB%9D%BC%ED%86%A0%EC%8A%A4%ED%85%8C%EB%84%A4%EC%8A%A4%EC%9D%98%EC%B2%B4/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>DXDY 테크닉 ) 2차원 배열에서 4방향 움직이기</title>
      <link>https://namgungjongmin.github.io/2024/04/01/algorithm/dxdy%ED%85%8C%ED%81%AC%EB%8B%89/</link>
      <guid>https://namgungjongmin.github.io/2024/04/01/algorithm/dxdy%ED%85%8C%ED%81%AC%EB%8B%89/</guid>
      <pubDate>Mon, 01 Apr 2024 07:25:22 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/vbghdl/post/e0ccaaba-5d36-47b1-b7ec-e658aad36afe/image.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;코딩테스트에서 2차원 배열</description>
        
      
      
      
      <content:encoded><![CDATA[<p><img src="https://velog.velcdn.com/images/vbghdl/post/e0ccaaba-5d36-47b1-b7ec-e658aad36afe/image.png"></p><blockquote><p>코딩테스트에서 2차원 배열을 데이터로 주고 그 안에서 포인터를 이동시키는 문제 유형에서 유용하게 사용할 수 있는 방법입니다.</p></blockquote><h1 id="▪︎-dxdy-테크닉"><a href="#▪︎-dxdy-테크닉" class="headerlink" title="▪︎ dxdy 테크닉"></a>▪︎ dxdy 테크닉</h1><p>dxdy 테크닉은 2차원 배열에서 어느 한지점의 포인터를 상하좌우로 간편하게 이동할 수 있는 방법입니다. x방향과 y방향의 direction 정보를 저장한 배열을 생성하고 순서대로 각 데이터를 참조하면서 현재 포인터 기준 4방향의 인덱스를 탐색할 수 있습니다.</p><p><img src="https://velog.velcdn.com/images/vbghdl/post/6e960a32-c62b-4f01-9d10-bbf2828940f9/image.png" alt="image.png"></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [</span><br><span class="line">  [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">  [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>],</span><br><span class="line">  [<span class="number">100</span>, <span class="number">200</span>, <span class="number">300</span>],</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> dx = [<span class="number">0</span>, <span class="number">0</span>, -<span class="number">1</span>, <span class="number">1</span>];</span><br><span class="line"><span class="keyword">const</span> dy = [-<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 현재 위치를 (1,1) 이라고 할 때, pointer 위치의 값은 20</span></span><br><span class="line"><span class="keyword">const</span> cx = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> cy = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(arr[cy + dy[i]][cx + dx[i]]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// output :</span></span><br><span class="line"><span class="comment">// 2 (pointer 기준 &#x27;상&#x27;)</span></span><br><span class="line"><span class="comment">// 200 (pointer 기준 &#x27;하&#x27;)</span></span><br><span class="line"><span class="comment">// 10 (pointer 기준 &#x27;좌&#x27;)</span></span><br><span class="line"><span class="comment">// 30 (pointer 기준 &#x27;우&#x27;)</span></span><br></pre></td></tr></table></figure><h1 id="▪︎-Example-of-Apply"><a href="#▪︎-Example-of-Apply" class="headerlink" title="▪︎ Example of Apply"></a>▪︎ Example of Apply</h1><p><img src="https://velog.velcdn.com/images/vbghdl/post/043f5a9f-8ae5-44b5-bdf5-251928622fc4/image.png" alt="image.png"></p><p><img src="https://velog.velcdn.com/images/vbghdl/post/384e8f9a-a6a4-4527-8b59-36ec679ee4e4/image.png" alt="image.png"></p><ul><li><a href="https://www.acmicpc.net/problem/1987">https://www.acmicpc.net/problem/1987</a></li></ul><p>이 문제는 (0,0) 위치에서부터 4방향을 움직이되 움직인 위치의 값이 이전에 지나온 값이라면 갈 수 없습니다. 따라서 dxdy 테크닉을 통해 2차원 배열을 재귀로 움직이면서 현재 위치의 값을 visited 변수에 저장하고 이동하면서 참조한 뒤, visited 값이 true라면 재귀를 멈추면 됩니다.</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> input = fs.<span class="title function_">readFileSync</span>(<span class="string">&quot;dev/stdin&quot;</span>).<span class="title function_">toString</span>().<span class="title function_">trim</span>().<span class="title function_">split</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> arr = input.<span class="title function_">slice</span>(<span class="number">1</span>).<span class="title function_">map</span>(<span class="function">(<span class="params">el</span>) =&gt;</span> el.<span class="title function_">trim</span>().<span class="title function_">split</span>(<span class="string">&quot;&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dx = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, -<span class="number">1</span>];</span><br><span class="line"><span class="keyword">const</span> dy = [<span class="number">1</span>, -<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>];</span><br><span class="line"><span class="keyword">const</span> visited = <span class="title class_">Array</span>(<span class="number">26</span>).<span class="title function_">fill</span>(<span class="literal">false</span>);</span><br><span class="line"><span class="keyword">let</span> answer = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">dfs</span> = (<span class="params">depth, x, y</span>) =&gt; &#123;</span><br><span class="line">  answer = answer &lt; depth ? depth : answer;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> nx = x + dx[i];</span><br><span class="line">    <span class="keyword">const</span> ny = y + dy[i];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 이동할 좌표가 없을 경우 continue</span></span><br><span class="line">    <span class="keyword">if</span> (nx &lt; <span class="number">0</span> || nx &gt;= arr[<span class="number">0</span>].<span class="property">length</span> || ny &lt; <span class="number">0</span> || ny &gt;= arr.<span class="property">length</span>) <span class="keyword">continue</span>;</span><br><span class="line">    <span class="comment">// 이동한 좌표의 알파벳의 아스키코드가 true면 이미 지나온 블록. continue</span></span><br><span class="line">    <span class="keyword">if</span> (visited[arr[ny][nx].<span class="title function_">charCodeAt</span>() - <span class="number">65</span>]) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">    visited[arr[ny][nx].<span class="title function_">charCodeAt</span>() - <span class="number">65</span>] = <span class="literal">true</span>;</span><br><span class="line">    <span class="title function_">dfs</span>(depth + <span class="number">1</span>, nx, ny);</span><br><span class="line">    visited[arr[ny][nx].<span class="title function_">charCodeAt</span>() - <span class="number">65</span>] = <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">visited[arr[<span class="number">0</span>][<span class="number">0</span>].<span class="title function_">charCodeAt</span>() - <span class="number">65</span>] = <span class="literal">true</span>;</span><br><span class="line"><span class="title function_">dfs</span>(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(answer);</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="https://NamgungJongMin.github.io/categories/Algorithm/">Algorithm</category>
      
      
      <category domain="https://NamgungJongMin.github.io/tags/JavaScript/">JavaScript</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/DXDY-%ED%85%8C%ED%81%AC%EB%8B%89/">DXDY 테크닉</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EA%B7%B8%EB%9E%98%ED%94%84/">그래프</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/">알고리즘</category>
      
      
      <comments>https://namgungjongmin.github.io/2024/04/01/algorithm/dxdy%ED%85%8C%ED%81%AC%EB%8B%89/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>그래프 ) 배열 데이터로 정제하기</title>
      <link>https://namgungjongmin.github.io/2024/03/25/algorithm/%EA%B7%B8%EB%9E%98%ED%94%84/</link>
      <guid>https://namgungjongmin.github.io/2024/03/25/algorithm/%EA%B7%B8%EB%9E%98%ED%94%84/</guid>
      <pubDate>Mon, 25 Mar 2024 05:35:52 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/vbghdl/post/e0ccaaba-5d36-47b1-b7ec-e658aad36afe/image.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;코딩테스트에서 그래프와 관</description>
        
      
      
      
      <content:encoded><![CDATA[<p><img src="https://velog.velcdn.com/images/vbghdl/post/e0ccaaba-5d36-47b1-b7ec-e658aad36afe/image.png"></p><blockquote><p>코딩테스트에서 그래프와 관련된 문제를 만났을 때, 해당 그래프를 순회하고 조작할 수 있는 정제된 형태의 데이터로 만들 필요가 있습니다. 이번 포스트에서는 여러 그래프의 종료들의 분석하는 방법과 함께 그래프 정보를 인접행렬 &#x2F; 인접리스트 데이터로 정제하는 방법에 대해 다뤄보겠습니다.</p></blockquote><h1 id="▪︎-무방향-그래프"><a href="#▪︎-무방향-그래프" class="headerlink" title="▪︎ 무방향 그래프"></a>▪︎ 무방향 그래프</h1><p><img src="https://velog.velcdn.com/images/vbghdl/post/f238072b-4c39-49e0-9a55-b049eecd5750/image.png" alt="image.png"></p><p>무방향 그래프는 노드가 서로 양방향으로 연결되어있는 형태로 방향에 상관없이 연결된 노드에 접근이 가능한 구조입니다. 행을 타겟 노드로, 열을 접근할 노드로 하는 인접행렬 데이터를 배열로 만들어 순회할 수 있습니다.</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 무방향 그래프</span></span><br><span class="line"><span class="keyword">const</span> N = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> input = [</span><br><span class="line">  [<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">  [<span class="number">1</span>, <span class="number">3</span>],</span><br><span class="line">  [<span class="number">2</span>, <span class="number">4</span>],</span><br><span class="line">  [<span class="number">2</span>, <span class="number">5</span>],</span><br><span class="line">  [<span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> graph = <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="title class_">Array</span>(N + <span class="number">1</span>), <span class="function">() =&gt;</span> <span class="title class_">Array</span>(N + <span class="number">1</span>).<span class="title function_">fill</span>(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">input.<span class="title function_">forEach</span>(<span class="function">(<span class="params">array</span>) =&gt;</span> &#123;</span><br><span class="line">  graph[array[<span class="number">0</span>]][array[<span class="number">1</span>]] = <span class="number">1</span>;</span><br><span class="line">  graph[array[<span class="number">1</span>]][array[<span class="number">0</span>]] = <span class="number">1</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(graph);</span><br></pre></td></tr></table></figure><h1 id="▪︎-방향-그래프"><a href="#▪︎-방향-그래프" class="headerlink" title="▪︎ 방향 그래프"></a>▪︎ 방향 그래프</h1><p><img src="https://velog.velcdn.com/images/vbghdl/post/55c2451c-d4c9-447c-8b82-cbd9bcdef88d/image.png" alt="image.png"></p><p>방향 그래프는 노드가 단방향으로 연결되어있는 형태로 한쪽 방향으로만 연결된 노드에 접근할 수 있습니다. 입력된 그래프 데이터에서 노드가 가리키는 다른 노드의 위치에 대한 정보만을 인접행렬에 저장합니다. (입력 데이터 각 배열의 인덱스의 값의 순서가 의미를 가집니다.)</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 방향 그래프</span></span><br><span class="line"><span class="keyword">const</span> N = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> input = [</span><br><span class="line">  [<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">  [<span class="number">1</span>, <span class="number">3</span>],</span><br><span class="line">  [<span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">  [<span class="number">4</span>, <span class="number">2</span>],</span><br><span class="line">  [<span class="number">2</span>, <span class="number">5</span>],</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> graph = <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="title class_">Array</span>(N + <span class="number">1</span>), <span class="function">() =&gt;</span> <span class="title class_">Array</span>(N + <span class="number">1</span>).<span class="title function_">fill</span>(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">input.<span class="title function_">forEach</span>(<span class="function">(<span class="params">array</span>) =&gt;</span> &#123;</span><br><span class="line">  graph[array[<span class="number">0</span>]][array[<span class="number">1</span>]] = <span class="number">1</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(graph);</span><br></pre></td></tr></table></figure><h1 id="▪︎-가중치-그래프"><a href="#▪︎-가중치-그래프" class="headerlink" title="▪︎ 가중치 그래프"></a>▪︎ 가중치 그래프</h1><p><img src="https://velog.velcdn.com/images/vbghdl/post/7601dc13-cef7-4d7a-9ced-03d1bd1acdd7/image.png" alt="image.png"></p><p><img src="https://velog.velcdn.com/images/vbghdl/post/afb6628e-d06b-437f-a4d0-b0c342c642e3/image.png" alt="image.png"></p><p>가중치 그래프는 노드끼리에 연결에 가중치가 붙어있는 구조입니다. 입력 데이터에 [1, 3, 3]과 같이 가중치에 대한 정보가 추가로 들어있습니다. 구현 방법은 위와 같으며 연결된 노드에 1이 아닌 가중치를 저장해주면 됩니다.</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 가중치 무방향 그래프</span></span><br><span class="line"><span class="keyword">const</span> N = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> input1 = [</span><br><span class="line">  [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>],</span><br><span class="line">  [<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">  [<span class="number">2</span>, <span class="number">4</span>, <span class="number">2</span>],</span><br><span class="line">  [<span class="number">2</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">  [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> graph1 = <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="title class_">Array</span>(N + <span class="number">1</span>), <span class="function">() =&gt;</span> <span class="title class_">Array</span>(N + <span class="number">1</span>).<span class="title function_">fill</span>(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">input1.<span class="title function_">forEach</span>(<span class="function">(<span class="params">array</span>) =&gt;</span> &#123;</span><br><span class="line">  graph1[array[<span class="number">0</span>]][array[<span class="number">1</span>]] = array[<span class="number">2</span>];</span><br><span class="line">  graph1[array[<span class="number">1</span>]][array[<span class="number">0</span>]] = array[<span class="number">2</span>];</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(graph1);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* --------------------------------------------------------------------- */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 가중치 방향 그래프</span></span><br><span class="line"><span class="keyword">const</span> input2 = [</span><br><span class="line">  [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>],</span><br><span class="line">  [<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">  [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">  [<span class="number">4</span>, <span class="number">2</span>, <span class="number">2</span>],</span><br><span class="line">  [<span class="number">2</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> graph2 = <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="title class_">Array</span>(N + <span class="number">1</span>), <span class="function">() =&gt;</span> <span class="title class_">Array</span>(N + <span class="number">1</span>).<span class="title function_">fill</span>(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">input2.<span class="title function_">forEach</span>(<span class="function">(<span class="params">array</span>) =&gt;</span> &#123;</span><br><span class="line">  graph2[array[<span class="number">0</span>]][array[<span class="number">1</span>]] = array[<span class="number">2</span>];</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(graph2);</span><br></pre></td></tr></table></figure><h1 id="▪︎-노드-개수가-많을-때"><a href="#▪︎-노드-개수가-많을-때" class="headerlink" title="▪︎ 노드 개수가 많을 때"></a>▪︎ 노드 개수가 많을 때</h1><p>노드의 개수가 적을 때에는 인접 행렬 데이터로 변환하여 문제를 풀 수 있지만, 노드의 개수가 많아질수록 그래프 크기가 커져 재귀의 동작이 많아져 문제를 푸는데 어려움이 생깁니다. 이럴 때는 인접행렬 대신 인접리스트를 사용하여 문제를 풀 수 있습니다.</p><p><img src="https://velog.velcdn.com/images/vbghdl/post/f9ba602a-af2f-45a3-ba4d-bdfae53610aa/image.png" alt="image.png"></p><p>인접리스트에서는 graph의 행의 인덱스 만이 노드를 키값으로 의미를 지니게 되고, 열의 인덱스는 인접행렬과 달리 의미를 지니지 않습니다. 각 노드 행에 연결된 노드에 대한 정보를 push해주면 됩니다.</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 인접리스트</span></span><br><span class="line"><span class="keyword">const</span> N = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> input = [</span><br><span class="line">  [<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">  [<span class="number">1</span>, <span class="number">3</span>],</span><br><span class="line">  [<span class="number">1</span>, <span class="number">4</span>],</span><br><span class="line">  [<span class="number">2</span>, <span class="number">1</span>],</span><br><span class="line">  [<span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">  [<span class="number">2</span>, <span class="number">5</span>],</span><br><span class="line">  [<span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">  [<span class="number">4</span>, <span class="number">2</span>],</span><br><span class="line">  [<span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> graph = <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="title class_">Array</span>(N + <span class="number">1</span>), <span class="function">() =&gt;</span> <span class="title class_">Array</span>(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">input.<span class="title function_">forEach</span>(<span class="function">(<span class="params">el</span>) =&gt;</span> &#123;</span><br><span class="line">  graph[el[<span class="number">0</span>]].<span class="title function_">push</span>(el[<span class="number">1</span>]);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(graph);</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="https://NamgungJongMin.github.io/categories/Algorithm/">Algorithm</category>
      
      
      <category domain="https://NamgungJongMin.github.io/tags/JavaScript/">JavaScript</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EA%B7%B8%EB%9E%98%ED%94%84/">그래프</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/">알고리즘</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EB%B0%B0%EC%97%B4-%EB%B3%80%ED%99%98/">배열 변환</category>
      
      
      <comments>https://namgungjongmin.github.io/2024/03/25/algorithm/%EA%B7%B8%EB%9E%98%ED%94%84/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>재귀함수 ) 멍청한 내 동생도 이해시킨 자바스크립트 재귀함수 구현</title>
      <link>https://namgungjongmin.github.io/2024/03/20/algorithm/%EC%9E%AC%EA%B7%80%ED%95%A8%EC%88%98/</link>
      <guid>https://namgungjongmin.github.io/2024/03/20/algorithm/%EC%9E%AC%EA%B7%80%ED%95%A8%EC%88%98/</guid>
      <pubDate>Wed, 20 Mar 2024 07:32:32 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/vbghdl/post/e0ccaaba-5d36-47b1-b7ec-e658aad36afe/image.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;▪︎-재귀-함수&quot;&gt;&lt;a href=&quot;#▪︎</description>
        
      
      
      
      <content:encoded><![CDATA[<p><img src="https://velog.velcdn.com/images/vbghdl/post/e0ccaaba-5d36-47b1-b7ec-e658aad36afe/image.png"></p><h1 id="▪︎-재귀-함수"><a href="#▪︎-재귀-함수" class="headerlink" title="▪︎ 재귀 함수"></a>▪︎ 재귀 함수</h1><p>재귀 함수란 자기 자신을 호출하는 함수를 말합니다. 종료 조건이 충족될 때까지 반복적으로 자신을 호출하면서 주어진 동작을 수행합니다. 재귀 함수는 순회할 대상의 상태를 변경하면서 각 대상마다 비슷한 동작을 수행해야 할 때 효율적으로 사용할 수 있습니다.</p><p>[1, 2, 3, 4, 5, 6] 이라는 배열안의 모든 숫자의 합을 구하는 코드를 작성한다고 해보겠습니다. 이 경우 간단하게 배열을 for문으로 순회하는 것으로 풀이가 가능합니다.</p><p>[1, 2, 3, [1, 2, [4, 5], 3], 5, 6] 이러한 형태의 배열은 어떨까요? 3중 for문으로 배열들을 순회하면 가능할 것입니다. 그러나 문제에서 주어지는 입력값이 계속 바뀔 수 있고, 어느정도 중첩될지 예측할 수 없는 상황이라면 기존처럼 코드를 구현하기에는 한계가 있을 것입니다. 이 때 재귀함수를 사용하면 효율적이고 가독성있는 코드 작성이 가능합니다.</p><h2 id="▫︎-재귀-함수의-구성"><a href="#▫︎-재귀-함수의-구성" class="headerlink" title="▫︎ 재귀 함수의 구성"></a>▫︎ 재귀 함수의 구성</h2><p>재귀 함수는 크게 종료 조건과 실행할 동작으로 나누어 구성할 수 있습니다. 실행할 동작에서 주어진 데이터들을 가공하고 동작을 수행하면서 자기 자신을 계속 호출하다가 정해놓은 종료 조건에 다달았을 때 함수를 return하게 하는 것입니다.</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">recursive</span> = (<span class="params">depth, ...</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span>( 종료 조건 ) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//-------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// depth별 실행할 동작</span></span><br><span class="line">  <span class="title function_">recursive</span>(depth+<span class="number">1</span>, ...)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">recursive</span>(<span class="number">1</span>, ...)</span><br></pre></td></tr></table></figure><h2 id="▫︎-재귀-함수의-depth"><a href="#▫︎-재귀-함수의-depth" class="headerlink" title="▫︎ 재귀 함수의 depth"></a>▫︎ 재귀 함수의 depth</h2><p>재귀 함수를 자바스크립트 코드로 처음 구현할 때, 코드의 동작을 따라가며 이해하는 것이 어렵습니다. 그러나 depth 개념을 적용하여 코드를 구현한다면 원활한 이해가 가능합니다. depth는 재귀 함수가 호출된 깊이, 즉 자신을 몇번째 호출했는지에 대한 데이터입니다.</p><p>순열과 조합을 예시로 지금까지의 내용들을 적용하여 재귀함수를 이해해보겠습니다.</p><h1 id="▪︎-카드를-뽑아보자"><a href="#▪︎-카드를-뽑아보자" class="headerlink" title="▪︎ 카드를 뽑아보자"></a>▪︎ 카드를 뽑아보자</h1><p><img src="https://velog.velcdn.com/images/vbghdl/post/a3d4d3dc-678b-41f8-aeb1-577b763694e2/image.png" alt="image.png"></p><h2 id="▫︎-순열"><a href="#▫︎-순열" class="headerlink" title="▫︎ 순열"></a>▫︎ 순열</h2><p>순열은 순서를 고려하여 카드들을 뽑는 방법입니다. 카드를 하나씩 뽑되, 뽑은 카드는 제외하고 남은 카드들 중에서 하나씩 뽑는 것을 반복하면 됩니다. 그러다가 원하는 개수의 카드를 뽑았을 때 동작을 멈추면 됩니다. 재귀를 사용하면 효율적인 이유는 카드를 뽑는 동작들이 모두 ‘주어진 배열들을 순회하며 하나를 선택한다’라는 같은 동작을 하기 때문입니다. 각 카드를 뽑는 동작, 몇 번째 카드를 뽑는 상황인지에 따라 depth가 부여됩니다. (첫 번째 카드를 뽑으면 depth 1 …)</p><p><img src="https://velog.velcdn.com/images/vbghdl/post/7d8d03e1-e393-4e81-a4ee-00100ad54d93/image.png" alt="image.png"></p><p>이제 우리는 재귀 함수를 구현하기 위해 세가지만 고려하면 됩니다.</p><ol><li>종료 조건</li><li>시행할 동작</li><li>필요한 데이터</li></ol><ol><li><p>종료 조건은 우리가 카드를 3개 다 뽑았을 경우입니다. 따라서 3의 depth까지만 함수를 실행하고 재귀를 멈추면 됩니다.</p></li><li><p>시행할 동작은 남은 카드들 중 한개를 뽑는 것입니다. 카드 배열들을 for문으로 순회하면서 각 자리에 하나씩 넣어주면 됩니다.</p></li><li><p>필요한 데이터는 다음 세가지입니다. depth, 남은 카드들의 정보를 담은 배열, 뽑은 카드들의 배열</p></li></ol><p>위 정보를 바탕으로 처음 소개한 재귀 함수와 동일한 구성으로 코드를 구현해보면 다음과 같습니다.</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cards = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 순열</span></span><br><span class="line"><span class="keyword">const</span> answer = [];</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">permutation</span> = (<span class="params">depth, leftCards, arr</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 종료 조건</span></span><br><span class="line">  <span class="keyword">if</span> (depth &gt; <span class="number">3</span>) &#123;</span><br><span class="line">    answer.<span class="title function_">push</span>(arr);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// depth별 실행할 동작</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; leftCards.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> cardsArr = leftCards.<span class="title function_">filter</span>(<span class="function">(<span class="params">_, idx</span>) =&gt;</span> idx !== i); <span class="comment">// 다음에 뽑을 수 있는 카드들의 배열</span></span><br><span class="line">    <span class="title function_">permutation</span>(depth + <span class="number">1</span>, cardsArr, [...arr, leftCards[i]]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">permutation</span>(<span class="number">1</span>, cards, []);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(answer);</span><br></pre></td></tr></table></figure><h2 id="▫︎-조합"><a href="#▫︎-조합" class="headerlink" title="▫︎ 조합"></a>▫︎ 조합</h2><p>조합은 순서를 고려하지 않고 카드들을 뽑는 방법입니다. 뽑은 카드를 제외하고 다시 카드를 뽑되, 순서가 달라도 같은 카드들을 뽑으면 안되기 때문에 순회할 때 뽑은 카드 뒤쪽의 카드들만을 대상으로 합니다. 이외에는 순열과 같습니다.</p><p><img src="https://velog.velcdn.com/images/vbghdl/post/c1a979e2-f25c-4090-834f-e176722b6787/image.png" alt="image.png"></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cards = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 조합</span></span><br><span class="line"><span class="keyword">const</span> answer = [];</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">combination</span> = (<span class="params">depth, leftCards, arr</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 종료 조건</span></span><br><span class="line">  <span class="keyword">if</span> (depth &gt; <span class="number">3</span>) &#123;</span><br><span class="line">    answer.<span class="title function_">push</span>(arr);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// depth별 실행할 함수</span></span><br><span class="line">  <span class="keyword">if</span> (leftCards.<span class="property">length</span> === <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; leftCards.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> cardsArr = leftCards.<span class="title function_">slice</span>(i + <span class="number">1</span>); <span class="comment">// 다음에 뽑을 수 있는 카드들의 배열</span></span><br><span class="line">    <span class="title function_">combination</span>(depth + <span class="number">1</span>, cardsArr, [...arr, leftCards[i]]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">combination</span>(<span class="number">1</span>, cards, []);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(answer);</span><br></pre></td></tr></table></figure><h1 id="▪︎-Depth가-유동적이라면"><a href="#▪︎-Depth가-유동적이라면" class="headerlink" title="▪︎ Depth가 유동적이라면?"></a>▪︎ Depth가 유동적이라면?</h1><p>위에 설명한 depth 데이터는 재귀가 몇번째까지 타고 들어가며 실행되는지를 쉽게 이해하기 위해 추가한 개념입니다. depth 개념으로 순열과 조합을 구현해보면서 재귀의 동작에 대해 기본적인 이해가 생겼다면 depth에 기반한 재귀가 아닌 함수 그 자체가 데이터를 변동하며 스스로를 호출하는 경우를 생각해보겠습니다.</p><p>위의 depth를 이용한 재귀 함수의 구현은 모든 상황에서 사용할 수는 없습니다. 예를들어 얼만큼 함수를 다시 호출할지가 정해지지 않은 문제의 경우가 그렇습니다. 위의 예시에서는 ‘5장 중 3장의 카드를 뽑는다’ 였지만, 만약 숫자가 적힌 5장의 카드 중 임의의 수의 카드를 뽑아 손안의 카드와 남은 카드를 비교하는 문제에서는 depth를 기준으로 하여 재귀 함수를 호출할 수 없습니다. 아래 문제를 살펴보겠습니다.</p><p><img src="https://velog.velcdn.com/images/vbghdl/post/af2cb58f-e093-48d0-85ce-c5422c8dabbc/image.png" alt="image.png"></p><p>이 문제에서 필요한 정보는 각 부분집합의 경우들과 그와 매치되는 남은 원소들입니다. 위 카드 예시에 대입해보자면 임의의 개수의 카드를 뽑아 순서에 상관하지 않고 뽑는 경우(조합)와 같습니다. 따라서 depth가 아닌 다른 데이터들을 바탕으로 함수를 구성해야 합니다.</p><p>임의의 개수의 원소를 뽑는다는 것은 0개 ~ 모든 원소의 개수까지를 뽑아본다는 것입니다. 따라서 조합을 실행하며 선택된 원소의 이전 원소들은 제외하고 남은 원소들의 수가 0이 될 때 함수를 종료하면 될 것 같습니다. 또한 문제를 푸는데 필요한 정보인 각 부분집합, 즉 뽑은 원소들의 배열과 그에 매칭된 남은 원소들이므로 이 둘을 데이터로하여 재귀 함수를 구성하면 문제를 풀 수 있습니다.</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> n = <span class="number">6</span>;</span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> answer = <span class="string">&quot;NO&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> arr1 = [];</span><br><span class="line"><span class="keyword">let</span> arr2 = [];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">recursive</span> = (<span class="params">leftArr, picks</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (leftArr.<span class="property">length</span> === <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; leftArr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> newArr = [...picks, leftArr[i]]; <span class="comment">// 전체 배열에서 뽑을 수 있는 (남아있는) 카드들</span></span><br><span class="line">    <span class="title function_">recursive</span>(leftArr.<span class="title function_">slice</span>(i + <span class="number">1</span>), newArr); <span class="comment">// i번째 카드를 뽑았다면 i 이후의 카드들이 남아있게 된다.</span></span><br><span class="line">    arr1.<span class="title function_">push</span>(newArr);</span><br><span class="line">    arr2.<span class="title function_">push</span>(arr.<span class="title function_">filter</span>(<span class="function">(<span class="params">el</span>) =&gt;</span> !newArr.<span class="title function_">includes</span>(el)));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">recursive</span>(arr, []);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr1.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">if</span> (arr1[i].<span class="title function_">reduce</span>(<span class="function">(<span class="params">acc, cur</span>) =&gt;</span> acc + cur, <span class="number">0</span>) === arr2[i].<span class="title function_">reduce</span>(<span class="function">(<span class="params">acc, cur</span>) =&gt;</span> acc + cur, <span class="number">0</span>)) answer = <span class="string">&quot;YES&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(answer);</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="https://NamgungJongMin.github.io/categories/Algorithm/">Algorithm</category>
      
      
      <category domain="https://NamgungJongMin.github.io/tags/JavaScript/">JavaScript</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/">알고리즘</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EC%9E%AC%EA%B7%80%ED%95%A8%EC%88%98/">재귀함수</category>
      
      
      <comments>https://namgungjongmin.github.io/2024/03/20/algorithm/%EC%9E%AC%EA%B7%80%ED%95%A8%EC%88%98/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>그리디 ) 현재의 최적의 선택을 미래의 최적의 선택으로</title>
      <link>https://namgungjongmin.github.io/2024/03/11/algorithm/%EA%B7%B8%EB%A6%AC%EB%94%94/</link>
      <guid>https://namgungjongmin.github.io/2024/03/11/algorithm/%EA%B7%B8%EB%A6%AC%EB%94%94/</guid>
      <pubDate>Mon, 11 Mar 2024 08:42:22 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/vbghdl/post/e0ccaaba-5d36-47b1-b7ec-e658aad36afe/image.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;▪︎-그리디-알고리즘&quot;&gt;&lt;a href=&quot;</description>
        
      
      
      
      <content:encoded><![CDATA[<p><img src="https://velog.velcdn.com/images/vbghdl/post/e0ccaaba-5d36-47b1-b7ec-e658aad36afe/image.png"></p><h1 id="▪︎-그리디-알고리즘"><a href="#▪︎-그리디-알고리즘" class="headerlink" title="▪︎ 그리디 알고리즘"></a>▪︎ 그리디 알고리즘</h1><p>그리디 알고리즘은 미래를 고려하지 않고, 오직 현재 시점에 가장 좋은 선택을 하는 알고리즘입니다. 현재의 선택이 미래에 어떤 영향을 미칠지는 고려하지 않고, 무조건 현재 가장 빠른 선택, 가장 가치있는 선택을 내리게됩니다. 현실에서는 모든 경우를 고려하면 리소스가 너무 크고, 당장의 최적의 결과만을 쫓는다 하더라도 미래에 (최적의 결과는 아니지만) 어느 정도 보장된 결과를 내고 싶을 때 사용되는 알고리즘입니다.</p><p>그러나 코딩테스트에서 우리는 모든 케이스에 적용되는, 항상 최적의 결과가 되는 답을 찾아내야 합니다. 따라서 현재의 최적의 답이 미래의 최적의 답이 되는 상태에서만 적용할 수 있습니다.</p><h2 id="▫︎-그리디-알고리즘을-적용할-수-있는-경우"><a href="#▫︎-그리디-알고리즘을-적용할-수-있는-경우" class="headerlink" title="▫︎ 그리디 알고리즘을 적용할 수 있는 경우"></a>▫︎ 그리디 알고리즘을 적용할 수 있는 경우</h2><ol><li>현재의 선택이 미래의 선택에 영향을 주지 않는다. (탐욕스러운 선택 조건)</li><li>부분의 최적해가 모이면 전체의 최적해가 된다.</li></ol><p><img src="https://velog.velcdn.com/images/vbghdl/post/897e905f-09ac-4b1f-9087-0228e6c1c9c2/image.png" alt="image.png"></p><p>500원, 100원, 10원 짜리 동전들을 위 그림과 같이 가지고 있다고 할 때, 동전을 가장 적게 사용하면서 2120원을 만드는 방법을 고민해봅시다.</p><p>그리디 알고리즘에 따라 동전을 선택한다면 가장 큰 액수의 동전을 선택하는 것이 현재 상황에서 가장 적은 개수로 2120원에 가까워지는 방법입니다. 이 때 (1) 지금 내가 500원을 선택한 것 때문에 미래에 100원 대신 10원을 선택해야만 경우나 10원 대신 100원을 선택해야만 하는 경우는 없습니다. 또한 (2) 각 동전을 선택하는 시점에서, 남은 액수를 넘지 않는 동전 중 가장 큰 액수의 동전을 선택하면 가장 적은 동전의 수로 2120원을 맞출 수 있습니다.</p><p>대부분의 코딩테스트 경우에서 그리디 알고리즘의 적용은 주어진 데이터를 “각 판단의 시점마다 동일한 동작으로 최적해를 찾을 수 있도록 설정”하고 “예외 조건을 찾아 처리”해주는 형태로 코드를 작성하게 됩니다. 따라서 대부분의 케이스에서 그리디 문제의 핵심은 데이터의 정렬로 볼 수 있습니다. 주어진 데이터를 정렬할 수 있는 여러 방법들을 우선적으로 고려해봅니다.</p><h1 id="▪︎-Example-of-Apply-1"><a href="#▪︎-Example-of-Apply-1" class="headerlink" title="▪︎ Example of Apply 1"></a>▪︎ Example of Apply 1</h1><p><img src="https://velog.velcdn.com/images/vbghdl/post/402330a9-c43a-4c40-bb57-25d641d04470/image.png" alt="image.png"></p><ul><li><a href="https://www.acmicpc.net/problem/1931">https://www.acmicpc.net/problem/1931</a></li></ul><p>위 문제는 겹치지 않고 진행할 수 있는 최대 회의 수를 출력하는 문제입니다. 직관적으로 볼 때 가장 많은 회의를 진행하기 위해서는 가장 빨리 끝나는 회의를 먼저 처리하면 남은 시간이 많아지기 때문에 정답에 가까울 것 같습니다.</p><ol><li>데이터 설정) 입력받은 배열 데이터들의 인덱스 1 을 기준으로 오름차순 정렬합니다. 이 때 인덱스 1의 값이 같은 경우 인덱스 0의 값이 더 작은 (빨리 시작하는) 데이터를 우선합니다.</li><li>예외 조건 처리) 정렬한 데이터를 순차적으로 순회하며 카운팅하되, 아직 이전 회의가 진행중이라면 카운팅하지 않습니다.</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> input = fs.<span class="title function_">readFileSync</span>(<span class="string">&quot;dev/stdin&quot;</span>).<span class="title function_">toString</span>().<span class="title function_">trim</span>().<span class="title function_">split</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> arr = input.<span class="title function_">slice</span>(<span class="number">1</span>).<span class="title function_">map</span>(<span class="function">(<span class="params">el</span>) =&gt;</span> el.<span class="title function_">split</span>(<span class="string">&quot; &quot;</span>).<span class="title function_">map</span>(<span class="title class_">Number</span>));</span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (a[<span class="number">1</span>] === b[<span class="number">1</span>]) <span class="keyword">return</span> a[<span class="number">0</span>] - b[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">return</span> a[<span class="number">1</span>] - b[<span class="number">1</span>];</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> prev = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> answer = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">[start, end]</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (prev &lt;= start) &#123;</span><br><span class="line">    answer++;</span><br><span class="line">    prev = end;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(answer);</span><br></pre></td></tr></table></figure><h1 id="▪︎-Example-of-Apply-2"><a href="#▪︎-Example-of-Apply-2" class="headerlink" title="▪︎ Example of Apply 2"></a>▪︎ Example of Apply 2</h1><p><img src="https://velog.velcdn.com/images/vbghdl/post/5c22b7f5-dea9-48c2-b6ce-d2dd1ba5496a/image.png" alt="image.png"></p><p><img src="https://velog.velcdn.com/images/vbghdl/post/353eb72a-bc62-41f5-9203-3502b0fef543/image.png" alt="image.png"></p><ul><li><a href="https://www.acmicpc.net/problem/11000">https://www.acmicpc.net/problem/11000</a></li></ul><p>이번 문제는 모든 회의가 가능하도록 하는 강의실의 개수를 출력하는 문제입니다. 현재 진행중인 강의의 개수를 추적하고, 지금까지 동시에 진행된 강의가 가장 많을 때마다 정답을 업데이트해주면 풀 수 있을 것 같습니다. 강의의 개수를 추적하는 방법은 강의가 시작되고 끝나는 시간에 값을 부여하여 시간마다 그 값을 더해주면 됩니다. 그렇게 타임 테이블을 만들고 오름차순 정렬하여 데이터를 순회하면 정답을 도출할 수 있습니다.</p><p>타임테이블을 배열로하여 인덱스를 시간으로 추상화하는 방법은 Si, Ti의 최대값이 10^9 이므로 메모리 초과가 뜰 것 같습니다. 따라서 입력받은 데이터들에 저장된 시간들을 O(1)의 시간 복잡도로 조작가능한 Map 함수에서 key : value 형태로 관리하겠습니다. 각 시간에 시작하는 회의가 있을 때 +1, 끝나는 회의가 있을 때 -1을 하면서 시간단위로 강의실 개수를 추적합니다.</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> input = fs.<span class="title function_">readFileSync</span>(<span class="string">&quot;dev/stdin&quot;</span>).<span class="title function_">toString</span>().<span class="title function_">trim</span>().<span class="title function_">split</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> arr = input.<span class="title function_">slice</span>(<span class="number">1</span>).<span class="title function_">map</span>(<span class="function">(<span class="params">el</span>) =&gt;</span> el.<span class="title function_">split</span>(<span class="string">&quot; &quot;</span>).<span class="title function_">map</span>(<span class="title class_">Number</span>));</span><br><span class="line"><span class="keyword">const</span> timeTable = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 타임테이블 생성</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  timeTable.<span class="title function_">set</span>(arr[i][<span class="number">0</span>], timeTable.<span class="title function_">get</span>(arr[i][<span class="number">0</span>]) ? timeTable.<span class="title function_">get</span>(arr[i][<span class="number">0</span>]) + <span class="number">1</span> : <span class="number">1</span>);</span><br><span class="line">  timeTable.<span class="title function_">set</span>(arr[i][<span class="number">1</span>], timeTable.<span class="title function_">get</span>(arr[i][<span class="number">1</span>]) ? timeTable.<span class="title function_">get</span>(arr[i][<span class="number">1</span>]) - <span class="number">1</span> : -<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 타임테이블 정렬</span></span><br><span class="line"><span class="keyword">const</span> answerArr = <span class="title class_">Array</span>.<span class="title function_">from</span>(timeTable).<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a[<span class="number">0</span>] - b[<span class="number">0</span>]);</span><br><span class="line"><span class="keyword">let</span> answer = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> lectures = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 타임테이블 순회</span></span><br><span class="line">answerArr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">el</span>) =&gt;</span> &#123;</span><br><span class="line">  lectures += el[<span class="number">1</span>];</span><br><span class="line">  <span class="keyword">if</span> (lectures &gt; answer) answer = lectures;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(answer);</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="https://NamgungJongMin.github.io/categories/Algorithm/">Algorithm</category>
      
      
      <category domain="https://NamgungJongMin.github.io/tags/JavaScript/">JavaScript</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/">알고리즘</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EA%B7%B8%EB%A6%AC%EB%94%94/">그리디</category>
      
      
      <comments>https://namgungjongmin.github.io/2024/03/11/algorithm/%EA%B7%B8%EB%A6%AC%EB%94%94/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>정렬 ) O(N^2)의 대표적인 정렬 방법</title>
      <link>https://namgungjongmin.github.io/2024/03/07/algorithm/%EC%A0%95%EB%A0%AC/</link>
      <guid>https://namgungjongmin.github.io/2024/03/07/algorithm/%EC%A0%95%EB%A0%AC/</guid>
      <pubDate>Thu, 07 Mar 2024 03:42:44 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/vbghdl/post/e0ccaaba-5d36-47b1-b7ec-e658aad36afe/image.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;이번 포스트에서는 정렬 알</description>
        
      
      
      
      <content:encoded><![CDATA[<p><img src="https://velog.velcdn.com/images/vbghdl/post/e0ccaaba-5d36-47b1-b7ec-e658aad36afe/image.png"></p><blockquote><p>이번 포스트에서는 정렬 알고리즘의 가장 기본이 되는 세 가지의 알고리즘을 알아보고 같은 문제를 각각의 알고리즘을 적용하여 풀이해보겠습니다. O(n^2)의 시간복잡도를 가지는 효율이 낮은 정렬 방법들이지만, 코딩테스트 문제의 시간 조건이 충분할 때 간단하게 구현할 수 있습니다.</p></blockquote><h1 id="▪︎-선택-정렬"><a href="#▪︎-선택-정렬" class="headerlink" title="▪︎ 선택 정렬"></a>▪︎ 선택 정렬</h1><p><img src="https://velog.velcdn.com/images/vbghdl/post/0b922ac7-1511-4d62-bb81-03ce00f98da2/image.png" alt="Untitled"></p><p>선택 정렬은 배열의 모든 요소를 비교하여 해당되는 위치에 요소를 삽입함으로써 정렬을 완성하는 알고리즘입니다.</p><ol><li>첫 요소를 기준삼아 시작합니다.</li><li>배열에서 최솟값을 찾아 첫 요소와 교환합니다.</li><li>두 번째 요소부터 시작해 최솟값을 찾아 두 번째 요소와 교환합니다.</li><li>2의 과정을 매 위치에서 반복합니다.</li></ol><h1 id="▪︎-삽입-정렬"><a href="#▪︎-삽입-정렬" class="headerlink" title="▪︎ 삽입 정렬"></a>▪︎ 삽입 정렬</h1><p><img src="https://velog.velcdn.com/images/vbghdl/post/4f3f8406-d792-4914-a75a-9e06f078a8cd/image.png" alt="Untitled"></p><p>삽입 정렬은 매 순서마다 해당 요소를 삽입할 위치를 찾아 정렬을 완성하는 알고리즘입니다.</p><ol><li>정렬되지 않은 첫 요소를 목표로 진행합니다.</li><li>두 번째 요소가 첫 번째 요소보다 작다면 자리를 교환합니다.</li><li>세 번째 요소와 두 번째 요소를 비교하여 교환하고, 교환했다면 그 이전 요소와 다시 비교 &#x2F; 두 번째 요소보다 크다면 네 번째 요소로 넘어갑니다.</li><li>2의 과정을 매 위치에서 반복합니다.</li></ol><h1 id="▪︎-버블-정렬"><a href="#▪︎-버블-정렬" class="headerlink" title="▪︎ 버블 정렬"></a>▪︎ 버블 정렬</h1><p><img src="https://velog.velcdn.com/images/vbghdl/post/13664fbe-8031-4527-bc60-650aadbbe08b/image.png" alt="Untitled"></p><p>버블 정렬은 인접한 두 요소를 비교하여 정렬하는 알고리즘입니다. 가장 큰 요소부터 마지막 인덱스에 위치시키기 때문에 요소의 이동이 마치 거품이 수면으로 올라오는 듯한 모습을 보입니다.</p><ol><li>정렬되지 않은 마지막 요소를 목표로 진행합니다.</li><li>첫 요소와 다음 요소를 비교 첫 요소가 크다면 두 번째 요소와 자리를 교환합니다.</li><li>두 번째 요소와 그 다음 요소를 비교 두 번째 요소가 크다면 세 번째 요소와 자리를 교환합니다.</li><li>동작을 반복하면 마지막 요소에 배열의 가장 큰 값이 위치하게 됩니다.</li><li>이후 1-3 과정을 반복합니다.</li></ol><h1 id="▪︎-문제-적용"><a href="#▪︎-문제-적용" class="headerlink" title="▪︎ 문제 적용"></a>▪︎ 문제 적용</h1><p><img src="https://velog.velcdn.com/images/vbghdl/post/5fed9f67-2632-4b68-8d0f-46e5170ba6c9/image.png" alt="Untitled"></p><h2 id="▫︎-선택-정렬-풀이"><a href="#▫︎-선택-정렬-풀이" class="headerlink" title="▫︎ 선택 정렬 풀이"></a>▫︎ 선택 정렬 풀이</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">solution</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> answer = [...arr];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = i; j &lt; arr.<span class="property">length</span>; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (answer[i] &lt;= answer[j]) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">      [answer[i], answer[j]] = [answer[j], answer[i]];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> answer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="▫︎-삽입-정렬-풀이"><a href="#▫︎-삽입-정렬-풀이" class="headerlink" title="▫︎ 삽입 정렬 풀이"></a>▫︎ 삽입 정렬 풀이</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">solution</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> answer = [...arr];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; answer.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = i; j &gt; <span class="number">0</span>; j--) &#123;</span><br><span class="line">      <span class="keyword">if</span> (answer[j] &lt; answer[j - <span class="number">1</span>]) [answer[j], answer[j - <span class="number">1</span>]] = [answer[j - <span class="number">1</span>], answer[j]];</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> answer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="▫︎-버블-정렬-풀이"><a href="#▫︎-버블-정렬-풀이" class="headerlink" title="▫︎ 버블 정렬 풀이"></a>▫︎ 버블 정렬 풀이</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">solution</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> answer = [...arr];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = arr.<span class="property">length</span> - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; arr.<span class="property">length</span> - i; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (answer[j] &lt;= answer[j + <span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">      [answer[j], answer[j + <span class="number">1</span>]] = [answer[j + <span class="number">1</span>], answer[j]];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> answer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="https://NamgungJongMin.github.io/categories/Algorithm/">Algorithm</category>
      
      
      <category domain="https://NamgungJongMin.github.io/tags/JavaScript/">JavaScript</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/">알고리즘</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EC%A0%95%EB%A0%AC/">정렬</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EC%84%A0%ED%83%9D%EC%A0%95%EB%A0%AC/">선택정렬</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EC%82%BD%EC%9E%85%EC%A0%95%EB%A0%AC/">삽입정렬</category>
      
      <category domain="https://NamgungJongMin.github.io/tags/%EB%B2%84%EB%B8%94%EC%A0%95%EB%A0%AC/">버블정렬</category>
      
      
      <comments>https://namgungjongmin.github.io/2024/03/07/algorithm/%EC%A0%95%EB%A0%AC/#disqus_thread</comments>
      
    </item>
    
  </channel>
</rss>
